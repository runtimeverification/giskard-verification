<!DOCTYPE html>
<html class="alectryon-standalone"><head><title>commit.v</title><meta charset="utf-8"><meta content="Alectryon" name="generator"><meta name="viewport" content="width=device-width, initial-scale=1"><link href="alectryon.css" rel="stylesheet"><link href="pygments.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/IBM-type/0.5.4/css/ibm-type.min.css" integrity="sha512-sky5cf9Ts6FY1kstGOBHSybfKqdHR41M0Ldb0BjNiv3ifltoQIsg0zIaQ+wwdwgQ0w9vKFW7Js50lxH9vqNSSw==" crossorigin="anonymous" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/firacode/5.2.0/fira_code.min.css" integrity="sha512-MbysAYimH1hH2xYzkkMHB6MqxBqfP0megxsCLknbYqHVwXTCg9IqHbk+ZP/vnhO8UEW6PaXAkKe2vQ+SWACxxA==" crossorigin="anonymous" /><script src="alectryon.js"></script></head><body><article class="alectryon-root alectryon-windowed alectryon-coqdoc"><div class="alectryon-banner">Built with <a href="https://github.com/cpitclaudel/alectryon/">Alectryon</a>, running Coq+SerAPI v8.16.0+0.16.2. Bubbles (<span class="alectryon-bubble"></span>) indicate interactive fragments: hover for details, tap to reveal contents. Use <kbd>Ctrl+‚Üë</kbd> <kbd>Ctrl+‚Üì</kbd> to navigate, <kbd>Ctrl+üñ±Ô∏è</kbd> to focus. On Mac, use <kbd>‚åò</kbd> instead of <kbd>Ctrl</kbd>.</div><pre class="alectryon-io highlight"><!-- Generator: Alectryon --><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">From</span> Coq <span class="kn">Require Import</span> Arith Bool List.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">From</span> Giskard <span class="kn">Require Import</span> lib structures local <span class="kn">global</span> prepare precommit.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Import</span> ListNotations.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Set Implicit Arguments</span>.</span></span></pre><div class="doc">
<a id="lab1"></a><h1 class="section">Safety property three: Commit stage height injectivity</h1>
</div><pre class="alectryon-io highlight"><!-- Generator: Alectryon --></pre><div class="doc">
<a id="lab2"></a><h2 class="section">Commit stage definition</h2>
</div><pre class="alectryon-io highlight"><!-- Generator: Alectryon --></pre><div class="doc">
We say that a block is in commit stage in some local state iff it is in precommit stage
and its child block is in precommit stage. 
</div><pre class="alectryon-io highlight"><!-- Generator: Alectryon --><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Definition</span> <span class="nf">commit_stage</span> (<span class="nv">tr</span> : GTrace) (<span class="nv">i</span> : nat) (<span class="nv">n</span> : node) (<span class="nv">b</span> : block) :=
  <span class="kr">exists</span> <span class="nv">b_child</span>,
    parent_of b_child = b /\
    precommit_stage tr i n b /\ 
    precommit_stage tr i n b_child.</span></span></pre><div class="doc">
<a id="lab3"></a><h2 class="section">Commit stage height injectivity statement</h2>
</div><pre class="alectryon-io highlight"><!-- Generator: Alectryon --></pre><div class="doc">
The third and final safety property states that no two same height blocks can be at
commit stage, i.e., commit stage block height is injective. 
</div><pre class="alectryon-io highlight"><!-- Generator: Alectryon --></pre><div class="doc">
In any global state <code>i</code> in a valid protocol trace <code>tr</code> that begins with the
initial state and respects the protocol transition rules, if there are two participating
nodes <code>n</code> and <code>m</code>, and two distinct blocks <code>b1</code> and <code>b2</code> of the same height
that are both at precommit stage for <code>n</code> and <code>m</code>'s local state, respectively,
then we can prove a contradiction. 
</div><pre class="alectryon-io highlight"><!-- Generator: Alectryon --><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Definition</span> <span class="nf">commit_height_injective_statement</span> :=
  <span class="kr">forall</span> (<span class="nv">tr</span> : GTrace),
    protocol_trace tr -&gt;
    <span class="kr">forall</span> (<span class="nv">i</span> : nat) (<span class="nv">n</span> <span class="nv">m</span> : node),
      In n participants -&gt;
      In m participants -&gt;
      <span class="kr">forall</span> (<span class="nv">b1</span> <span class="nv">b2</span> : block),
        b1 &lt;&gt; b2 -&gt; 
        commit_stage tr i n b1 -&gt;
        commit_stage tr i m b2 -&gt; 
        b_height b1 = b_height b2 -&gt;
        <span class="kt">False</span>.</span></span></pre><div class="doc">
<a id="lab4"></a><h2 class="section">Proof of commit stage height injectivity</h2>
</div><pre class="alectryon-io highlight"><!-- Generator: Alectryon --></pre><div class="doc">
Intuition behind the proof: From the definition of commit stage, we know that each
block must also be in precommit stage. Because the two blocks are of equal height and
different, their respective children must also be of equal height and different.
We then apply precommit stage height injectivity to directly obtain a contradiction. 
</div><pre class="alectryon-io highlight"><!-- Generator: Alectryon --><span class="alectryon-sentence"><input class="alectryon-toggle" id="commit-v-chk0" style="display: none" type="checkbox"><label class="alectryon-input" for="commit-v-chk0"><span class="kn">Theorem</span> <span class="nf">commit_height_injective</span> :
  precommit_stage_height_injective_statement -&gt;
  commit_height_injective_statement.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion">precommit_stage_height_injective_statement -&gt;
commit_height_injective_statement</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="commit-v-chk1" style="display: none" type="checkbox"><label class="alectryon-input" for="commit-v-chk1"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion">precommit_stage_height_injective_statement -&gt;
commit_height_injective_statement</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="commit-v-chk2" style="display: none" type="checkbox"><label class="alectryon-input" for="commit-v-chk2"><span class="nb">intros</span> H_precommit tr H_prot i n m H_part_n H_part_m b1 b2 H_neq H_commit1 H_commit2 H_height.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H_precommit</var><span class="hyp-type"><b>: </b><span>precommit_stage_height_injective_statement</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>GTrace</span></span></span><br><span><var>H_prot</var><span class="hyp-type"><b>: </b><span>protocol_trace tr</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>n, m</var><span class="hyp-type"><b>: </b><span>node</span></span></span><br><span><var>H_part_n</var><span class="hyp-type"><b>: </b><span>In n participants</span></span></span><br><span><var>H_part_m</var><span class="hyp-type"><b>: </b><span>In m participants</span></span></span><br><span><var>b1, b2</var><span class="hyp-type"><b>: </b><span>block</span></span></span><br><span><var>H_neq</var><span class="hyp-type"><b>: </b><span>b1 &lt;&gt; b2</span></span></span><br><span><var>H_commit1</var><span class="hyp-type"><b>: </b><span>commit_stage tr i n b1</span></span></span><br><span><var>H_commit2</var><span class="hyp-type"><b>: </b><span>commit_stage tr i m b2</span></span></span><br><span><var>H_height</var><span class="hyp-type"><b>: </b><span>b_height b1 = b_height b2</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kt">False</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="commit-v-chk3" style="display: none" type="checkbox"><label class="alectryon-input" for="commit-v-chk3"><span class="nb">destruct</span> H_commit1 <span class="kr">as</span> [b_child1 [H_parent1 [H_precommit1 _]]].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H_precommit</var><span class="hyp-type"><b>: </b><span>precommit_stage_height_injective_statement</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>GTrace</span></span></span><br><span><var>H_prot</var><span class="hyp-type"><b>: </b><span>protocol_trace tr</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>n, m</var><span class="hyp-type"><b>: </b><span>node</span></span></span><br><span><var>H_part_n</var><span class="hyp-type"><b>: </b><span>In n participants</span></span></span><br><span><var>H_part_m</var><span class="hyp-type"><b>: </b><span>In m participants</span></span></span><br><span><var>b1, b2</var><span class="hyp-type"><b>: </b><span>block</span></span></span><br><span><var>H_neq</var><span class="hyp-type"><b>: </b><span>b1 &lt;&gt; b2</span></span></span><br><span><var>b_child1</var><span class="hyp-type"><b>: </b><span>block</span></span></span><br><span><var>H_parent1</var><span class="hyp-type"><b>: </b><span>parent_of b_child1 = b1</span></span></span><br><span><var>H_precommit1</var><span class="hyp-type"><b>: </b><span>precommit_stage tr i n b1</span></span></span><br><span><var>H_commit2</var><span class="hyp-type"><b>: </b><span>commit_stage tr i m b2</span></span></span><br><span><var>H_height</var><span class="hyp-type"><b>: </b><span>b_height b1 = b_height b2</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kt">False</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="commit-v-chk4" style="display: none" type="checkbox"><label class="alectryon-input" for="commit-v-chk4"><span class="nb">destruct</span> H_commit2 <span class="kr">as</span> [b_child2 [H_parent2 [H_precommit2 _]]].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H_precommit</var><span class="hyp-type"><b>: </b><span>precommit_stage_height_injective_statement</span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>GTrace</span></span></span><br><span><var>H_prot</var><span class="hyp-type"><b>: </b><span>protocol_trace tr</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>n, m</var><span class="hyp-type"><b>: </b><span>node</span></span></span><br><span><var>H_part_n</var><span class="hyp-type"><b>: </b><span>In n participants</span></span></span><br><span><var>H_part_m</var><span class="hyp-type"><b>: </b><span>In m participants</span></span></span><br><span><var>b1, b2</var><span class="hyp-type"><b>: </b><span>block</span></span></span><br><span><var>H_neq</var><span class="hyp-type"><b>: </b><span>b1 &lt;&gt; b2</span></span></span><br><span><var>b_child1</var><span class="hyp-type"><b>: </b><span>block</span></span></span><br><span><var>H_parent1</var><span class="hyp-type"><b>: </b><span>parent_of b_child1 = b1</span></span></span><br><span><var>H_precommit1</var><span class="hyp-type"><b>: </b><span>precommit_stage tr i n b1</span></span></span><br><span><var>b_child2</var><span class="hyp-type"><b>: </b><span>block</span></span></span><br><span><var>H_parent2</var><span class="hyp-type"><b>: </b><span>parent_of b_child2 = b2</span></span></span><br><span><var>H_precommit2</var><span class="hyp-type"><b>: </b><span>precommit_stage tr i m b2</span></span></span><br><span><var>H_height</var><span class="hyp-type"><b>: </b><span>b_height b1 = b_height b2</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kt">False</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="commit-v-chk5" style="display: none" type="checkbox"><label class="alectryon-input" for="commit-v-chk5"><span class="nb">red</span> <span class="kr">in</span> H_precommit.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H_precommit</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">tr</span> : GTrace,
protocol_trace tr -&gt;
<span class="kr">forall</span> (<span class="nv">i</span> : nat) (<span class="nv">n</span> <span class="nv">m</span> : node)
  (<span class="nv">b1</span> <span class="nv">b2</span> : block),
In n participants -&gt;
In m participants -&gt;
b1 &lt;&gt; b2 -&gt;
precommit_stage tr i n b1 -&gt;
precommit_stage tr i m b2 -&gt;
b_height b1 = b_height b2 -&gt; <span class="kt">False</span></span></span></span><br><span><var>tr</var><span class="hyp-type"><b>: </b><span>GTrace</span></span></span><br><span><var>H_prot</var><span class="hyp-type"><b>: </b><span>protocol_trace tr</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>n, m</var><span class="hyp-type"><b>: </b><span>node</span></span></span><br><span><var>H_part_n</var><span class="hyp-type"><b>: </b><span>In n participants</span></span></span><br><span><var>H_part_m</var><span class="hyp-type"><b>: </b><span>In m participants</span></span></span><br><span><var>b1, b2</var><span class="hyp-type"><b>: </b><span>block</span></span></span><br><span><var>H_neq</var><span class="hyp-type"><b>: </b><span>b1 &lt;&gt; b2</span></span></span><br><span><var>b_child1</var><span class="hyp-type"><b>: </b><span>block</span></span></span><br><span><var>H_parent1</var><span class="hyp-type"><b>: </b><span>parent_of b_child1 = b1</span></span></span><br><span><var>H_precommit1</var><span class="hyp-type"><b>: </b><span>precommit_stage tr i n b1</span></span></span><br><span><var>b_child2</var><span class="hyp-type"><b>: </b><span>block</span></span></span><br><span><var>H_parent2</var><span class="hyp-type"><b>: </b><span>parent_of b_child2 = b2</span></span></span><br><span><var>H_precommit2</var><span class="hyp-type"><b>: </b><span>precommit_stage tr i m b2</span></span></span><br><span><var>H_height</var><span class="hyp-type"><b>: </b><span>b_height b1 = b_height b2</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kt">False</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="commit-v-chk6" style="display: none" type="checkbox"><label class="alectryon-input" for="commit-v-chk6">spec H_precommit tr H_prot i n m b1 b2.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>tr</var><span class="hyp-type"><b>: </b><span>GTrace</span></span></span><br><span><var>H_prot</var><span class="hyp-type"><b>: </b><span>protocol_trace tr</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>n, m</var><span class="hyp-type"><b>: </b><span>node</span></span></span><br><span><var>H_part_n</var><span class="hyp-type"><b>: </b><span>In n participants</span></span></span><br><span><var>H_part_m</var><span class="hyp-type"><b>: </b><span>In m participants</span></span></span><br><span><var>b1, b2</var><span class="hyp-type"><b>: </b><span>block</span></span></span><br><span><var>H_neq</var><span class="hyp-type"><b>: </b><span>b1 &lt;&gt; b2</span></span></span><br><span><var>b_child1</var><span class="hyp-type"><b>: </b><span>block</span></span></span><br><span><var>H_parent1</var><span class="hyp-type"><b>: </b><span>parent_of b_child1 = b1</span></span></span><br><span><var>H_precommit1</var><span class="hyp-type"><b>: </b><span>precommit_stage tr i n b1</span></span></span><br><span><var>b_child2</var><span class="hyp-type"><b>: </b><span>block</span></span></span><br><span><var>H_parent2</var><span class="hyp-type"><b>: </b><span>parent_of b_child2 = b2</span></span></span><br><span><var>H_precommit2</var><span class="hyp-type"><b>: </b><span>precommit_stage tr i m b2</span></span></span><br><span><var>H_height</var><span class="hyp-type"><b>: </b><span>b_height b1 = b_height b2</span></span></span><br><span><var>H_precommit</var><span class="hyp-type"><b>: </b><span>In n participants -&gt;
In m participants -&gt;
b1 &lt;&gt; b2 -&gt;
precommit_stage tr i n b1 -&gt;
precommit_stage tr i m b2 -&gt;
b_height b1 = b_height b2 -&gt; <span class="kt">False</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kt">False</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="commit-v-chk7" style="display: none" type="checkbox"><label class="alectryon-input" for="commit-v-chk7">spec H_precommit H_part_n H_part_m.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>tr</var><span class="hyp-type"><b>: </b><span>GTrace</span></span></span><br><span><var>H_prot</var><span class="hyp-type"><b>: </b><span>protocol_trace tr</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>n, m</var><span class="hyp-type"><b>: </b><span>node</span></span></span><br><span><var>H_part_n</var><span class="hyp-type"><b>: </b><span>In n participants</span></span></span><br><span><var>H_part_m</var><span class="hyp-type"><b>: </b><span>In m participants</span></span></span><br><span><var>b1, b2</var><span class="hyp-type"><b>: </b><span>block</span></span></span><br><span><var>H_neq</var><span class="hyp-type"><b>: </b><span>b1 &lt;&gt; b2</span></span></span><br><span><var>b_child1</var><span class="hyp-type"><b>: </b><span>block</span></span></span><br><span><var>H_parent1</var><span class="hyp-type"><b>: </b><span>parent_of b_child1 = b1</span></span></span><br><span><var>H_precommit1</var><span class="hyp-type"><b>: </b><span>precommit_stage tr i n b1</span></span></span><br><span><var>b_child2</var><span class="hyp-type"><b>: </b><span>block</span></span></span><br><span><var>H_parent2</var><span class="hyp-type"><b>: </b><span>parent_of b_child2 = b2</span></span></span><br><span><var>H_precommit2</var><span class="hyp-type"><b>: </b><span>precommit_stage tr i m b2</span></span></span><br><span><var>H_height</var><span class="hyp-type"><b>: </b><span>b_height b1 = b_height b2</span></span></span><br><span><var>H_precommit</var><span class="hyp-type"><b>: </b><span>b1 &lt;&gt; b2 -&gt;
precommit_stage tr i n b1 -&gt;
precommit_stage tr i m b2 -&gt;
b_height b1 = b_height b2 -&gt; <span class="kt">False</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kt">False</span></div></blockquote></div></div></small><span class="alectryon-wsp"> 
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="commit-v-chk8" style="display: none" type="checkbox"><label class="alectryon-input" for="commit-v-chk8">spec H_precommit.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>tr</var><span class="hyp-type"><b>: </b><span>GTrace</span></span></span><br><span><var>H_prot</var><span class="hyp-type"><b>: </b><span>protocol_trace tr</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>n, m</var><span class="hyp-type"><b>: </b><span>node</span></span></span><br><span><var>H_part_n</var><span class="hyp-type"><b>: </b><span>In n participants</span></span></span><br><span><var>H_part_m</var><span class="hyp-type"><b>: </b><span>In m participants</span></span></span><br><span><var>b1, b2</var><span class="hyp-type"><b>: </b><span>block</span></span></span><br><span><var>H_neq</var><span class="hyp-type"><b>: </b><span>b1 &lt;&gt; b2</span></span></span><br><span><var>b_child1</var><span class="hyp-type"><b>: </b><span>block</span></span></span><br><span><var>H_parent1</var><span class="hyp-type"><b>: </b><span>parent_of b_child1 = b1</span></span></span><br><span><var>H_precommit1</var><span class="hyp-type"><b>: </b><span>precommit_stage tr i n b1</span></span></span><br><span><var>b_child2</var><span class="hyp-type"><b>: </b><span>block</span></span></span><br><span><var>H_parent2</var><span class="hyp-type"><b>: </b><span>parent_of b_child2 = b2</span></span></span><br><span><var>H_precommit2</var><span class="hyp-type"><b>: </b><span>precommit_stage tr i m b2</span></span></span><br><span><var>H_height</var><span class="hyp-type"><b>: </b><span>b_height b1 = b_height b2</span></span></span><br><span><var>H_precommit</var><span class="hyp-type"><b>: </b><span>b1 &lt;&gt; b2 -&gt;
precommit_stage tr i n b1 -&gt;
precommit_stage tr i m b2 -&gt;
b_height b1 = b_height b2 -&gt; <span class="kt">False</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">b1 &lt;&gt; b2</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="commit-v-chk9" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>tr</var><span class="hyp-type"><b>: </b><span>GTrace</span></span></span><br><span><var>H_prot</var><span class="hyp-type"><b>: </b><span>protocol_trace tr</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>n, m</var><span class="hyp-type"><b>: </b><span>node</span></span></span><br><span><var>H_part_n</var><span class="hyp-type"><b>: </b><span>In n participants</span></span></span><br><span><var>H_part_m</var><span class="hyp-type"><b>: </b><span>In m participants</span></span></span><br><span><var>b1, b2</var><span class="hyp-type"><b>: </b><span>block</span></span></span><br><span><var>H_neq</var><span class="hyp-type"><b>: </b><span>b1 &lt;&gt; b2</span></span></span><br><span><var>b_child1</var><span class="hyp-type"><b>: </b><span>block</span></span></span><br><span><var>H_parent1</var><span class="hyp-type"><b>: </b><span>parent_of b_child1 = b1</span></span></span><br><span><var>H_precommit1</var><span class="hyp-type"><b>: </b><span>precommit_stage tr i n b1</span></span></span><br><span><var>b_child2</var><span class="hyp-type"><b>: </b><span>block</span></span></span><br><span><var>H_parent2</var><span class="hyp-type"><b>: </b><span>parent_of b_child2 = b2</span></span></span><br><span><var>H_precommit2</var><span class="hyp-type"><b>: </b><span>precommit_stage tr i m b2</span></span></span><br><span><var>H_height</var><span class="hyp-type"><b>: </b><span>b_height b1 = b_height b2</span></span></span><br><span><var>H_precommit</var><span class="hyp-type"><b>: </b><span>precommit_stage tr i n b1 -&gt;
precommit_stage tr i m b2 -&gt;
b_height b1 = b_height b2 -&gt; <span class="kt">False</span></span></span></span><br></div><label class="goal-separator" for="commit-v-chk9"><hr></label><div class="goal-conclusion"><span class="kt">False</span></div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="commit-v-chka" style="display: none" type="checkbox"><label class="alectryon-input" for="commit-v-chka"><span class="nb">intro</span> H_false.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>tr</var><span class="hyp-type"><b>: </b><span>GTrace</span></span></span><br><span><var>H_prot</var><span class="hyp-type"><b>: </b><span>protocol_trace tr</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>n, m</var><span class="hyp-type"><b>: </b><span>node</span></span></span><br><span><var>H_part_n</var><span class="hyp-type"><b>: </b><span>In n participants</span></span></span><br><span><var>H_part_m</var><span class="hyp-type"><b>: </b><span>In m participants</span></span></span><br><span><var>b1, b2</var><span class="hyp-type"><b>: </b><span>block</span></span></span><br><span><var>H_neq</var><span class="hyp-type"><b>: </b><span>b1 &lt;&gt; b2</span></span></span><br><span><var>b_child1</var><span class="hyp-type"><b>: </b><span>block</span></span></span><br><span><var>H_parent1</var><span class="hyp-type"><b>: </b><span>parent_of b_child1 = b1</span></span></span><br><span><var>H_precommit1</var><span class="hyp-type"><b>: </b><span>precommit_stage tr i n b1</span></span></span><br><span><var>b_child2</var><span class="hyp-type"><b>: </b><span>block</span></span></span><br><span><var>H_parent2</var><span class="hyp-type"><b>: </b><span>parent_of b_child2 = b2</span></span></span><br><span><var>H_precommit2</var><span class="hyp-type"><b>: </b><span>precommit_stage tr i m b2</span></span></span><br><span><var>H_height</var><span class="hyp-type"><b>: </b><span>b_height b1 = b_height b2</span></span></span><br><span><var>H_precommit</var><span class="hyp-type"><b>: </b><span>b1 &lt;&gt; b2 -&gt;
precommit_stage tr i n b1 -&gt;
precommit_stage tr i m b2 -&gt;
b_height b1 = b_height b2 -&gt; <span class="kt">False</span></span></span></span><br><span><var>H_false</var><span class="hyp-type"><b>: </b><span>b1 = b2</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kt">False</span></div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="commit-v-chkb" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>tr</var><span class="hyp-type"><b>: </b><span>GTrace</span></span></span><br><span><var>H_prot</var><span class="hyp-type"><b>: </b><span>protocol_trace tr</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>n, m</var><span class="hyp-type"><b>: </b><span>node</span></span></span><br><span><var>H_part_n</var><span class="hyp-type"><b>: </b><span>In n participants</span></span></span><br><span><var>H_part_m</var><span class="hyp-type"><b>: </b><span>In m participants</span></span></span><br><span><var>b1, b2</var><span class="hyp-type"><b>: </b><span>block</span></span></span><br><span><var>H_neq</var><span class="hyp-type"><b>: </b><span>b1 &lt;&gt; b2</span></span></span><br><span><var>b_child1</var><span class="hyp-type"><b>: </b><span>block</span></span></span><br><span><var>H_parent1</var><span class="hyp-type"><b>: </b><span>parent_of b_child1 = b1</span></span></span><br><span><var>H_precommit1</var><span class="hyp-type"><b>: </b><span>precommit_stage tr i n b1</span></span></span><br><span><var>b_child2</var><span class="hyp-type"><b>: </b><span>block</span></span></span><br><span><var>H_parent2</var><span class="hyp-type"><b>: </b><span>parent_of b_child2 = b2</span></span></span><br><span><var>H_precommit2</var><span class="hyp-type"><b>: </b><span>precommit_stage tr i m b2</span></span></span><br><span><var>H_height</var><span class="hyp-type"><b>: </b><span>b_height b1 = b_height b2</span></span></span><br><span><var>H_precommit</var><span class="hyp-type"><b>: </b><span>precommit_stage tr i n b1 -&gt;
precommit_stage tr i m b2 -&gt;
b_height b1 = b_height b2 -&gt; <span class="kt">False</span></span></span></span><br></div><label class="goal-separator" for="commit-v-chkb"><hr></label><div class="goal-conclusion"><span class="kt">False</span></div></blockquote></div></div></div></small><span class="alectryon-wsp"> 
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="commit-v-chkc" style="display: none" type="checkbox"><label class="alectryon-input" for="commit-v-chkc"><span class="nb">subst</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>tr</var><span class="hyp-type"><b>: </b><span>GTrace</span></span></span><br><span><var>H_prot</var><span class="hyp-type"><b>: </b><span>protocol_trace tr</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>n, m</var><span class="hyp-type"><b>: </b><span>node</span></span></span><br><span><var>H_part_n</var><span class="hyp-type"><b>: </b><span>In n participants</span></span></span><br><span><var>H_part_m</var><span class="hyp-type"><b>: </b><span>In m participants</span></span></span><br><span><var>b_child1, b_child2</var><span class="hyp-type"><b>: </b><span>block</span></span></span><br><span><var>H_neq</var><span class="hyp-type"><b>: </b><span>parent_of b_child1 &lt;&gt; parent_of b_child2</span></span></span><br><span><var>H_precommit1</var><span class="hyp-type"><b>: </b><span>precommit_stage tr i n
  (parent_of b_child1)</span></span></span><br><span><var>H_height</var><span class="hyp-type"><b>: </b><span>b_height (parent_of b_child1) =
b_height (parent_of b_child2)</span></span></span><br><span><var>H_precommit</var><span class="hyp-type"><b>: </b><span>parent_of b_child1 &lt;&gt; parent_of b_child2 -&gt;
precommit_stage tr i n
  (parent_of b_child1) -&gt;
precommit_stage tr i m
  (parent_of b_child2) -&gt;
b_height (parent_of b_child1) =
b_height (parent_of b_child2) -&gt; <span class="kt">False</span></span></span></span><br><span><var>H_false</var><span class="hyp-type"><b>: </b><span>parent_of b_child1 = parent_of b_child2</span></span></span><br><span><var>H_precommit2</var><span class="hyp-type"><b>: </b><span>precommit_stage tr i m
  (parent_of b_child2)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kt">False</span></div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="commit-v-chkd" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>tr</var><span class="hyp-type"><b>: </b><span>GTrace</span></span></span><br><span><var>H_prot</var><span class="hyp-type"><b>: </b><span>protocol_trace tr</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>n, m</var><span class="hyp-type"><b>: </b><span>node</span></span></span><br><span><var>H_part_n</var><span class="hyp-type"><b>: </b><span>In n participants</span></span></span><br><span><var>H_part_m</var><span class="hyp-type"><b>: </b><span>In m participants</span></span></span><br><span><var>b1, b2</var><span class="hyp-type"><b>: </b><span>block</span></span></span><br><span><var>H_neq</var><span class="hyp-type"><b>: </b><span>b1 &lt;&gt; b2</span></span></span><br><span><var>b_child1</var><span class="hyp-type"><b>: </b><span>block</span></span></span><br><span><var>H_parent1</var><span class="hyp-type"><b>: </b><span>parent_of b_child1 = b1</span></span></span><br><span><var>H_precommit1</var><span class="hyp-type"><b>: </b><span>precommit_stage tr i n b1</span></span></span><br><span><var>b_child2</var><span class="hyp-type"><b>: </b><span>block</span></span></span><br><span><var>H_parent2</var><span class="hyp-type"><b>: </b><span>parent_of b_child2 = b2</span></span></span><br><span><var>H_precommit2</var><span class="hyp-type"><b>: </b><span>precommit_stage tr i m b2</span></span></span><br><span><var>H_height</var><span class="hyp-type"><b>: </b><span>b_height b1 = b_height b2</span></span></span><br><span><var>H_precommit</var><span class="hyp-type"><b>: </b><span>precommit_stage tr i n b1 -&gt;
precommit_stage tr i m b2 -&gt;
b_height b1 = b_height b2 -&gt; <span class="kt">False</span></span></span></span><br></div><label class="goal-separator" for="commit-v-chkd"><hr></label><div class="goal-conclusion"><span class="kt">False</span></div></blockquote></div></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="commit-v-chke" style="display: none" type="checkbox"><label class="alectryon-input" for="commit-v-chke"><span class="bp">contradiction</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>tr</var><span class="hyp-type"><b>: </b><span>GTrace</span></span></span><br><span><var>H_prot</var><span class="hyp-type"><b>: </b><span>protocol_trace tr</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>n, m</var><span class="hyp-type"><b>: </b><span>node</span></span></span><br><span><var>H_part_n</var><span class="hyp-type"><b>: </b><span>In n participants</span></span></span><br><span><var>H_part_m</var><span class="hyp-type"><b>: </b><span>In m participants</span></span></span><br><span><var>b1, b2</var><span class="hyp-type"><b>: </b><span>block</span></span></span><br><span><var>H_neq</var><span class="hyp-type"><b>: </b><span>b1 &lt;&gt; b2</span></span></span><br><span><var>b_child1</var><span class="hyp-type"><b>: </b><span>block</span></span></span><br><span><var>H_parent1</var><span class="hyp-type"><b>: </b><span>parent_of b_child1 = b1</span></span></span><br><span><var>H_precommit1</var><span class="hyp-type"><b>: </b><span>precommit_stage tr i n b1</span></span></span><br><span><var>b_child2</var><span class="hyp-type"><b>: </b><span>block</span></span></span><br><span><var>H_parent2</var><span class="hyp-type"><b>: </b><span>parent_of b_child2 = b2</span></span></span><br><span><var>H_precommit2</var><span class="hyp-type"><b>: </b><span>precommit_stage tr i m b2</span></span></span><br><span><var>H_height</var><span class="hyp-type"><b>: </b><span>b_height b1 = b_height b2</span></span></span><br><span><var>H_precommit</var><span class="hyp-type"><b>: </b><span>precommit_stage tr i n b1 -&gt;
precommit_stage tr i m b2 -&gt;
b_height b1 = b_height b2 -&gt; <span class="kt">False</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kt">False</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="commit-v-chkf" style="display: none" type="checkbox"><label class="alectryon-input" for="commit-v-chkf">spec H_precommit H_precommit1 H_precommit2 H_height.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>tr</var><span class="hyp-type"><b>: </b><span>GTrace</span></span></span><br><span><var>H_prot</var><span class="hyp-type"><b>: </b><span>protocol_trace tr</span></span></span><br><span><var>i</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>n, m</var><span class="hyp-type"><b>: </b><span>node</span></span></span><br><span><var>H_part_n</var><span class="hyp-type"><b>: </b><span>In n participants</span></span></span><br><span><var>H_part_m</var><span class="hyp-type"><b>: </b><span>In m participants</span></span></span><br><span><var>b1, b2</var><span class="hyp-type"><b>: </b><span>block</span></span></span><br><span><var>H_neq</var><span class="hyp-type"><b>: </b><span>b1 &lt;&gt; b2</span></span></span><br><span><var>b_child1</var><span class="hyp-type"><b>: </b><span>block</span></span></span><br><span><var>H_parent1</var><span class="hyp-type"><b>: </b><span>parent_of b_child1 = b1</span></span></span><br><span><var>H_precommit1</var><span class="hyp-type"><b>: </b><span>precommit_stage tr i n b1</span></span></span><br><span><var>b_child2</var><span class="hyp-type"><b>: </b><span>block</span></span></span><br><span><var>H_parent2</var><span class="hyp-type"><b>: </b><span>parent_of b_child2 = b2</span></span></span><br><span><var>H_precommit2</var><span class="hyp-type"><b>: </b><span>precommit_stage tr i m b2</span></span></span><br><span><var>H_height</var><span class="hyp-type"><b>: </b><span>b_height b1 = b_height b2</span></span></span><br><span><var>H_precommit</var><span class="hyp-type"><b>: </b><span><span class="kt">False</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kt">False</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">inversion</span> H_precommit.</span><span class="alectryon-wsp"> 
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span></span></pre></article></body></html>