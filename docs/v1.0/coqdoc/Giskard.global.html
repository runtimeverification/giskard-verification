<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<head>
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<link href="coqdoc.css" rel="stylesheet" type="text/css" />
<link href="coqdocjs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="config.js"></script>
<script type="text/javascript" src="coqdocjs.js"></script>
</head>

<body onload="document.getElementById('content').focus()">
  <div id="header">
    <span class="left">
      <span class="modulename"> <script> document.write(document.title) </script> </span>
    </span>

    <span class="button" id="toggle-proofs"></span>

    <span class="right">
      <a href="./../../..">Project Website</a>
      <a href="./indexpage.html">Index</a>
      <a href="./toc.html">Table of Contents</a>
    </span>
</div>
    <div id="content" tabindex="-1" onblur="document.getElementById('content').focus()">
    <div id="main">
<div class="code">
<span class="id" title="keyword">From</span> <span class="id" title="var">Coq</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Arith.Arith.html#"><span class="id" title="library">Arith</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Bool.Bool.html#"><span class="id" title="library">Bool</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Lists.List.html#"><span class="id" title="library">List</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.micromega.Lia.html#"><span class="id" title="library">Lia</span></a>.<br/>
<span class="id" title="keyword">From</span> <span class="id" title="var">Giskard</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="Giskard.lib.html#"><span class="id" title="library">lib</span></a> <a class="idref" href="Giskard.structures.html#"><span class="id" title="library">structures</span></a> <a class="idref" href="Giskard.local.html#"><span class="id" title="library">local</span></a>.<br/>

<br/>
<span class="id" title="keyword">Import</span> <span class="id" title="var">ListNotations</span>.<br/>

<br/>
<span class="id" title="keyword">Set Implicit Arguments</span>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab28"></a><h1 class="section">Global state operations, transitions and properties</h1>

<div class="paragraph"> </div>

 Global state transitions are responsible for modeling network responsibilities:
message broadcasting and timekeeping. Global states can be viewed as a snapshot of
all local states, paired with a global message buffer which records all messages sent
by all participating nodes up to that point in the protocol's execution. 
<div class="paragraph"> </div>

<a id="lab29"></a><h2 class="section">Global state definitions</h2>

<div class="paragraph"> </div>

 A global state is defined as a pair containing:
<ul class="doclist">
<li> a mapping from node identifier to its local state, and

</li>
<li> a list of messages containing all broadcasted messages thus far.

</li>
</ul>

<div class="paragraph"> </div>

It is equipped with a property that the mapping works as intended. 
</div>
<div class="code">
<span class="id" title="keyword">Definition</span> <a id="GState" class="idref" href="#GState"><span class="id" title="definition">GState</span></a> : <span class="id" title="keyword">Type</span> := <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">(</span></a><a class="idref" href="Giskard.structures.html#node"><span class="id" title="axiom">node</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="Giskard.structures.html#NState"><span class="id" title="record">NState</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">*</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="Giskard.structures.html#message"><span class="id" title="record">message</span></a>.<br/>

<br/>
</div>

<div class="doc">
The initial global state is defined as the collection of initial local
states, paired with an empty message buffer. 
</div>
<div class="code">
<span class="id" title="keyword">Definition</span> <a id="GState_init" class="idref" href="#GState_init"><span class="id" title="definition">GState_init</span></a> : <a class="idref" href="Giskard.global.html#GState"><span class="id" title="definition">GState</span></a> :=<br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="keyword">fun</span> (<a id="n:1" class="idref" href="#n:1"><span class="id" title="binder">n</span></a> : <a class="idref" href="Giskard.structures.html#node"><span class="id" title="axiom">node</span></a>) =&gt; <a class="idref" href="Giskard.structures.html#NState_init"><span class="id" title="definition">NState_init</span></a> <a class="idref" href="Giskard.global.html#n:1"><span class="id" title="variable">n</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab30"></a><h2 class="section">Global state transitions</h2>

<div class="paragraph"> </div>

 In order to define protocol-following global state transitions,
we first define an operation which does two things:
<ul class="doclist">
<li> broadcasts outgoing messages from the transitioning node to the remaining nodes, and

</li>
<li> records outgoing messages in the global message buffer.

</li>
</ul>

<div class="paragraph"> </div>

We adopt the convention that nodes do not send messages to themselves.
This design choice is orthogonal to safety proofs because we do not
reason about the number of participants required to reach a quorum. 
</div>
<div class="code">
<span class="id" title="keyword">Definition</span> <a id="broadcast_messages" class="idref" href="#broadcast_messages"><span class="id" title="definition">broadcast_messages</span></a> (<a id="g:2" class="idref" href="#g:2"><span class="id" title="binder">g</span></a> : <a class="idref" href="Giskard.global.html#GState"><span class="id" title="definition">GState</span></a>) (<a id="s1:3" class="idref" href="#s1:3"><span class="id" title="binder">s1</span></a> <a id="s2:4" class="idref" href="#s2:4"><span class="id" title="binder">s2</span></a> : <a class="idref" href="Giskard.structures.html#NState"><span class="id" title="record">NState</span></a>) (<a id="lm:5" class="idref" href="#lm:5"><span class="id" title="binder">lm</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="Giskard.structures.html#message"><span class="id" title="record">message</span></a>) : <a class="idref" href="Giskard.global.html#GState"><span class="id" title="definition">GState</span></a> :=<br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="keyword">fun</span> (<a id="n:6" class="idref" href="#n:6"><span class="id" title="binder">n</span></a> : <a class="idref" href="Giskard.structures.html#node"><span class="id" title="axiom">node</span></a>) =&gt; <span class="id" title="keyword">if</span> <a class="idref" href="Giskard.structures.html#node_eqb"><span class="id" title="axiom">node_eqb</span></a> <a class="idref" href="Giskard.global.html#n:6"><span class="id" title="variable">n</span></a> (<a class="idref" href="Giskard.structures.html#node_id"><span class="id" title="projection">node_id</span></a> <a class="idref" href="Giskard.global.html#s1:3"><span class="id" title="variable">s1</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">then</span> <a class="idref" href="Giskard.global.html#s2:4"><span class="id" title="variable">s2</span></a> <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">else</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="keyword">if</span> <a class="idref" href="Giskard.structures.html#is_member"><span class="id" title="definition">is_member</span></a> <a class="idref" href="Giskard.global.html#n:6"><span class="id" title="variable">n</span></a> <a class="idref" href="Giskard.structures.html#participants"><span class="id" title="axiom">participants</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">then</span> <a class="idref" href="Giskard.local.html#add_plural"><span class="id" title="definition">add_plural</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Datatypes.html#fst"><span class="id" title="definition">fst</span></a> <a class="idref" href="Giskard.global.html#g:2"><span class="id" title="variable">g</span></a> <a class="idref" href="Giskard.global.html#n:6"><span class="id" title="variable">n</span></a>) <a class="idref" href="Giskard.global.html#lm:5"><span class="id" title="variable">lm</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">else</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Datatypes.html#fst"><span class="id" title="definition">fst</span></a> <a class="idref" href="Giskard.global.html#g:2"><span class="id" title="variable">g</span></a> <a class="idref" href="Giskard.global.html#n:6"><span class="id" title="variable">n</span></a>))<a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Giskard.global.html#lm:5"><span class="id" title="variable">lm</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Datatypes.html#snd"><span class="id" title="definition">snd</span></a> <a class="idref" href="Giskard.global.html#g:2"><span class="id" title="variable">g</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">)</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>.<br/>

<br/>
</div>

<div class="doc">
Protocol-following global state transitions are defined as a binary relation
on pre-state and post-state, in which one participating node makes a protocol-following
local state transition, and the network broadcasts and records its outgoing messages
to the other participating nodes. 
</div>
<div class="code">
<span class="id" title="keyword">Inductive</span> <a id="GState_step" class="idref" href="#GState_step"><span class="id" title="inductive">GState_step</span></a> : <a class="idref" href="Giskard.global.html#GState"><span class="id" title="definition">GState</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="Giskard.global.html#GState"><span class="id" title="definition">GState</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <span class="id" title="keyword">Prop</span> :=<br/>
| <a id="GState_step_process" class="idref" href="#GState_step_process"><span class="id" title="constructor">GState_step_process</span></a> :<br/>
&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">forall</span> (<a id="n:9" class="idref" href="#n:9"><span class="id" title="binder">n</span></a> : <a class="idref" href="Giskard.structures.html#node"><span class="id" title="axiom">node</span></a>) (<a id="process:10" class="idref" href="#process:10"><span class="id" title="binder">process</span></a> : <a class="idref" href="Giskard.local.html#NState_transition_type"><span class="id" title="inductive">NState_transition_type</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="msg:11" class="idref" href="#msg:11"><span class="id" title="binder">msg</span></a> : <a class="idref" href="Giskard.structures.html#message"><span class="id" title="record">message</span></a>) (<a id="lm:12" class="idref" href="#lm:12"><span class="id" title="binder">lm</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="Giskard.structures.html#message"><span class="id" title="record">message</span></a>) (<a id="g:13" class="idref" href="#g:13"><span class="id" title="binder">g</span></a> <a id="g':14" class="idref" href="#g':14"><span class="id" title="binder">g'</span></a> : <a class="idref" href="Giskard.global.html#GState"><span class="id" title="definition">GState</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Lists.List.html#In"><span class="id" title="definition">In</span></a> <a class="idref" href="Giskard.global.html#n:9"><span class="id" title="variable">n</span></a> <a class="idref" href="Giskard.structures.html#participants"><span class="id" title="axiom">participants</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Giskard.local.html#get_transition"><span class="id" title="definition">get_transition</span></a> <a class="idref" href="Giskard.global.html#process:10"><span class="id" title="variable">process</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Datatypes.html#fst"><span class="id" title="definition">fst</span></a> <a class="idref" href="Giskard.global.html#g:13"><span class="id" title="variable">g</span></a> <a class="idref" href="Giskard.global.html#n:9"><span class="id" title="variable">n</span></a>) <a class="idref" href="Giskard.global.html#msg:11"><span class="id" title="variable">msg</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Datatypes.html#fst"><span class="id" title="definition">fst</span></a> <a class="idref" href="Giskard.global.html#g':14"><span class="id" title="variable">g'</span></a> <a class="idref" href="Giskard.global.html#n:9"><span class="id" title="variable">n</span></a>) <a class="idref" href="Giskard.global.html#lm:12"><span class="id" title="variable">lm</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Giskard.global.html#g':14"><span class="id" title="variable">g'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="Giskard.global.html#broadcast_messages"><span class="id" title="definition">broadcast_messages</span></a> <a class="idref" href="Giskard.global.html#g:13"><span class="id" title="variable">g</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Datatypes.html#fst"><span class="id" title="definition">fst</span></a> <a class="idref" href="Giskard.global.html#g:13"><span class="id" title="variable">g</span></a> <a class="idref" href="Giskard.global.html#n:9"><span class="id" title="variable">n</span></a>) (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Datatypes.html#fst"><span class="id" title="definition">fst</span></a> <a class="idref" href="Giskard.global.html#g':14"><span class="id" title="variable">g'</span></a> <a class="idref" href="Giskard.global.html#n:9"><span class="id" title="variable">n</span></a>) <a class="idref" href="Giskard.global.html#lm:12"><span class="id" title="variable">lm</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Giskard.global.html#GState_step:7"><span class="id" title="inductive">GState_step</span></a> <a class="idref" href="Giskard.global.html#g:13"><span class="id" title="variable">g</span></a> <a class="idref" href="Giskard.global.html#g':14"><span class="id" title="variable">g'</span></a><br/>
| <a id="GState_step_timeout" class="idref" href="#GState_step_timeout"><span class="id" title="constructor">GState_step_timeout</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">forall</span> (<a id="g:15" class="idref" href="#g:15"><span class="id" title="binder">g</span></a> <a id="g':16" class="idref" href="#g':16"><span class="id" title="binder">g'</span></a> : <a class="idref" href="Giskard.global.html#GState"><span class="id" title="definition">GState</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Giskard.global.html#g':16"><span class="id" title="variable">g'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">((</span></a><span class="id" title="keyword">fun</span> <a id="n:17" class="idref" href="#n:17"><span class="id" title="binder">n</span></a> =&gt; <span class="id" title="keyword">if</span> <a class="idref" href="Giskard.structures.html#is_member"><span class="id" title="definition">is_member</span></a> <a class="idref" href="Giskard.global.html#n:17"><span class="id" title="variable">n</span></a> <a class="idref" href="Giskard.structures.html#participants"><span class="id" title="axiom">participants</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">then</span> <a class="idref" href="Giskard.local.html#flip_timeout"><span class="id" title="definition">flip_timeout</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Datatypes.html#fst"><span class="id" title="definition">fst</span></a> <a class="idref" href="Giskard.global.html#g:15"><span class="id" title="variable">g</span></a> <a class="idref" href="Giskard.global.html#n:17"><span class="id" title="variable">n</span></a>) <span class="id" title="keyword">else</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Datatypes.html#fst"><span class="id" title="definition">fst</span></a> <a class="idref" href="Giskard.global.html#g:15"><span class="id" title="variable">g</span></a> <a class="idref" href="Giskard.global.html#n:17"><span class="id" title="variable">n</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">),</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Datatypes.html#snd"><span class="id" title="definition">snd</span></a> <a class="idref" href="Giskard.global.html#g:15"><span class="id" title="variable">g</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Giskard.global.html#GState_step:7"><span class="id" title="inductive">GState_step</span></a> <a class="idref" href="Giskard.global.html#g:15"><span class="id" title="variable">g</span></a> <a class="idref" href="Giskard.global.html#g':16"><span class="id" title="variable">g'</span></a>.<br/>

<br/>
</div>

<div class="doc">
More convenient representation of the global transition relation for reasoning. 
</div>
<div class="code">
<span class="id" title="keyword">Definition</span> <a id="GState_transition" class="idref" href="#GState_transition"><span class="id" title="definition">GState_transition</span></a> (<a id="g:18" class="idref" href="#g:18"><span class="id" title="binder">g</span></a> <a id="g':19" class="idref" href="#g':19"><span class="id" title="binder">g'</span></a> : <a class="idref" href="Giskard.global.html#GState"><span class="id" title="definition">GState</span></a>) : <span class="id" title="keyword">Prop</span> :=<br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Logic.html#f031fe1957c4a4a8e217aa46af2b4e25"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">exists</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">(</span></a><a id="n:20" class="idref" href="#n:20"><span class="id" title="binder">n</span></a> : <a class="idref" href="Giskard.structures.html#node"><span class="id" title="axiom">node</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">),</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Lists.List.html#In"><span class="id" title="definition">In</span></a> <a class="idref" href="Giskard.global.html#n:20"><span class="id" title="variable">n</span></a> <a class="idref" href="Giskard.structures.html#participants"><span class="id" title="axiom">participants</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a> <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">exists</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">(</span></a><a id="process:21" class="idref" href="#process:21"><span class="id" title="binder">process</span></a> : <a class="idref" href="Giskard.local.html#NState_transition_type"><span class="id" title="inductive">NState_transition_type</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="msg:22" class="idref" href="#msg:22"><span class="id" title="binder">msg</span></a> : <a class="idref" href="Giskard.structures.html#message"><span class="id" title="record">message</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="lm:23" class="idref" href="#lm:23"><span class="id" title="binder">lm</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="Giskard.structures.html#message"><span class="id" title="record">message</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">),</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="Giskard.local.html#get_transition"><span class="id" title="definition">get_transition</span></a> <a class="idref" href="Giskard.global.html#process:21"><span class="id" title="variable">process</span></a>) (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Datatypes.html#fst"><span class="id" title="definition">fst</span></a> <a class="idref" href="Giskard.global.html#g:18"><span class="id" title="variable">g</span></a> <a class="idref" href="Giskard.global.html#n:20"><span class="id" title="variable">n</span></a>) <a class="idref" href="Giskard.global.html#msg:22"><span class="id" title="variable">msg</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Datatypes.html#fst"><span class="id" title="definition">fst</span></a> <a class="idref" href="Giskard.global.html#g':19"><span class="id" title="variable">g'</span></a> <a class="idref" href="Giskard.global.html#n:20"><span class="id" title="variable">n</span></a>) <a class="idref" href="Giskard.global.html#lm:23"><span class="id" title="variable">lm</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Giskard.global.html#g':19"><span class="id" title="variable">g'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="Giskard.global.html#broadcast_messages"><span class="id" title="definition">broadcast_messages</span></a> <a class="idref" href="Giskard.global.html#g:18"><span class="id" title="variable">g</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Datatypes.html#fst"><span class="id" title="definition">fst</span></a> <a class="idref" href="Giskard.global.html#g:18"><span class="id" title="variable">g</span></a> <a class="idref" href="Giskard.global.html#n:20"><span class="id" title="variable">n</span></a>) (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Datatypes.html#fst"><span class="id" title="definition">fst</span></a> <a class="idref" href="Giskard.global.html#g':19"><span class="id" title="variable">g'</span></a> <a class="idref" href="Giskard.global.html#n:20"><span class="id" title="variable">n</span></a>) <a class="idref" href="Giskard.global.html#lm:23"><span class="id" title="variable">lm</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Logic.html#f031fe1957c4a4a8e217aa46af2b4e25"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Logic.html#f031fe1957c4a4a8e217aa46af2b4e25"><span class="id" title="notation">\/</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="Giskard.global.html#g':19"><span class="id" title="variable">g'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">((</span></a><span class="id" title="keyword">fun</span> <a id="n:24" class="idref" href="#n:24"><span class="id" title="binder">n</span></a> =&gt; <span class="id" title="keyword">if</span> <a class="idref" href="Giskard.structures.html#is_member"><span class="id" title="definition">is_member</span></a> <a class="idref" href="Giskard.global.html#n:24"><span class="id" title="variable">n</span></a> <a class="idref" href="Giskard.structures.html#participants"><span class="id" title="axiom">participants</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">then</span> <a class="idref" href="Giskard.local.html#flip_timeout"><span class="id" title="definition">flip_timeout</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Datatypes.html#fst"><span class="id" title="definition">fst</span></a> <a class="idref" href="Giskard.global.html#g:18"><span class="id" title="variable">g</span></a> <a class="idref" href="Giskard.global.html#n:24"><span class="id" title="variable">n</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">else</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Datatypes.html#fst"><span class="id" title="definition">fst</span></a> <a class="idref" href="Giskard.global.html#g:18"><span class="id" title="variable">g</span></a> <a class="idref" href="Giskard.global.html#n:24"><span class="id" title="variable">n</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">),</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Datatypes.html#snd"><span class="id" title="definition">snd</span></a> <a class="idref" href="Giskard.global.html#g:18"><span class="id" title="variable">g</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>.<br/>

<br/>
</div>

<div class="doc">
The two global transition relation definitions are equivalent. 
</div>
<div class="code">
<span class="id" title="keyword">Lemma</span> <a id="GState_step_transition" class="idref" href="#GState_step_transition"><span class="id" title="lemma">GState_step_transition</span></a> :<br/>
&nbsp;<span class="id" title="keyword">forall</span> <a id="g:25" class="idref" href="#g:25"><span class="id" title="binder">g</span></a> <a id="g':26" class="idref" href="#g':26"><span class="id" title="binder">g'</span></a>, <a class="idref" href="Giskard.global.html#GState_step"><span class="id" title="inductive">GState_step</span></a> <a class="idref" href="Giskard.global.html#g:25"><span class="id" title="variable">g</span></a> <a class="idref" href="Giskard.global.html#g':26"><span class="id" title="variable">g'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'&lt;-&gt;'_x"><span class="id" title="notation">&lt;-&gt;</span></a> <a class="idref" href="Giskard.global.html#GState_transition"><span class="id" title="definition">GState_transition</span></a> <a class="idref" href="Giskard.global.html#g:25"><span class="id" title="variable">g</span></a> <a class="idref" href="Giskard.global.html#g':26"><span class="id" title="variable">g'</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
<span class="id" title="tactic">intros</span>; <span class="id" title="tactic">split</span>.<br/>
- <span class="id" title="tactic">intro</span> <span class="id" title="var">Htr</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">Htr</span>; <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;* <span class="id" title="tactic">left</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exists</span> <span class="id" title="var">n</span>; <span class="id" title="tactic">split</span>; [<span class="id" title="tactic">assumption</span>|].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exists</span> <span class="id" title="var">process</span>, <span class="id" title="var">msg</span>, <span class="id" title="var">lm</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span>; <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;* <span class="id" title="tactic">right</span>; <span class="id" title="tactic">reflexivity</span>.<br/>
- <span class="id" title="tactic">intro</span> <span class="id" title="var">Htr</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">Htr</span>.<br/>
&nbsp;&nbsp;* <span class="id" title="tactic">destruct</span> <span class="id" title="var">H</span>; <span class="id" title="tactic">destruct</span> <span class="id" title="var">H</span>; <span class="id" title="tactic">destruct</span> <span class="id" title="var">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H0</span>; <span class="id" title="tactic">destruct</span> <span class="id" title="var">H0</span>; <span class="id" title="tactic">destruct</span> <span class="id" title="var">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="Giskard.global.html#GState_step_process"><span class="id" title="constructor">GState_step_process</span></a>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;* <span class="id" title="tactic">apply</span> <a class="idref" href="Giskard.global.html#GState_step_timeout"><span class="id" title="constructor">GState_step_timeout</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assumption</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="GState_sane" class="idref" href="#GState_sane"><span class="id" title="definition">GState_sane</span></a> (<a id="g:27" class="idref" href="#g:27"><span class="id" title="binder">g</span></a> : <a class="idref" href="Giskard.global.html#GState"><span class="id" title="definition">GState</span></a>) : <span class="id" title="keyword">Prop</span> := <span class="id" title="keyword">forall</span> <a id="n:28" class="idref" href="#n:28"><span class="id" title="binder">n</span></a>, <a class="idref" href="Giskard.structures.html#node_id"><span class="id" title="projection">node_id</span></a> ((<a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Datatypes.html#fst"><span class="id" title="definition">fst</span></a> <a class="idref" href="Giskard.global.html#g:27"><span class="id" title="variable">g</span></a>) <a class="idref" href="Giskard.global.html#n:28"><span class="id" title="variable">n</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="Giskard.global.html#n:28"><span class="id" title="variable">n</span></a>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="GState_init_sane" class="idref" href="#GState_init_sane"><span class="id" title="lemma">GState_init_sane</span></a> : <a class="idref" href="Giskard.global.html#GState_sane"><span class="id" title="definition">GState_sane</span></a> <a class="idref" href="Giskard.global.html#GState_init"><span class="id" title="definition">GState_init</span></a>.<br/>
<span class="id" title="keyword">Proof</span>. <span class="id" title="tactic">intro</span>. <span class="id" title="tactic">reflexivity</span>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="GState_sane_transition" class="idref" href="#GState_sane_transition"><span class="id" title="lemma">GState_sane_transition</span></a> : <span class="id" title="keyword">forall</span> <a id="g:29" class="idref" href="#g:29"><span class="id" title="binder">g</span></a>, <a class="idref" href="Giskard.global.html#GState_sane"><span class="id" title="definition">GState_sane</span></a> <a class="idref" href="Giskard.global.html#g:29"><span class="id" title="variable">g</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <span class="id" title="keyword">forall</span> <a id="g':30" class="idref" href="#g':30"><span class="id" title="binder">g'</span></a>, <a class="idref" href="Giskard.global.html#GState_transition"><span class="id" title="definition">GState_transition</span></a> <a class="idref" href="Giskard.global.html#g:29"><span class="id" title="variable">g</span></a> <a class="idref" href="Giskard.global.html#g':30"><span class="id" title="variable">g'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="Giskard.global.html#GState_sane"><span class="id" title="definition">GState_sane</span></a> <a class="idref" href="Giskard.global.html#g':30"><span class="id" title="variable">g'</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
<span class="id" title="tactic">intros</span>.<br/>
<span class="id" title="tactic">inversion</span> <span class="id" title="var">H0</span>; <span class="id" title="tactic">clear</span> <span class="id" title="var">H0</span>.<br/>
- <span class="id" title="tactic">intro</span> <span class="id" title="var">n</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H1</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">n'</span> [<span class="id" title="var">Hin</span> [<span class="id" title="var">process</span> [<span class="id" title="var">msg</span> [<span class="id" title="var">lm</span> [<span class="id" title="var">Hpr</span> <span class="id" title="var">Hg'</span>]]]]]].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">Hg'</span>; <span class="id" title="tactic">clear</span> <span class="id" title="var">Hg'</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">case_eq</span> (<a class="idref" href="Giskard.structures.html#node_eqb"><span class="id" title="axiom">node_eqb</span></a> <span class="id" title="var">n</span> (<a class="idref" href="Giskard.structures.html#node_id"><span class="id" title="projection">node_id</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Datatypes.html#fst"><span class="id" title="definition">fst</span></a> <span class="id" title="var">g</span> <span class="id" title="var">n'</span>))).<br/>
&nbsp;&nbsp;* <span class="id" title="tactic">rewrite</span> <a class="idref" href="Giskard.structures.html#node_eqb_correct"><span class="id" title="axiom">node_eqb_correct</span></a>; <span class="id" title="tactic">intro</span> <span class="id" title="var">Heq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">Heq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="Giskard.local.html#get_transition"><span class="id" title="definition">get_transition</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hpr</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Giskard.local.html#propose_block_init"><span class="id" title="definition">propose_block_init</span></a>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Giskard.local.html#discard_view_invalid"><span class="id" title="definition">discard_view_invalid</span></a>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Giskard.local.html#process_PrepareBlock_duplicate"><span class="id" title="definition">process_PrepareBlock_duplicate</span></a>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Giskard.local.html#process_PrepareVote_vote"><span class="id" title="definition">process_PrepareVote_vote</span></a>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Giskard.local.html#process_PrepareVote_wait"><span class="id" title="definition">process_PrepareVote_wait</span></a>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Giskard.local.html#process_PrepareQC_last_block_new_proposer"><span class="id" title="definition">process_PrepareQC_last_block_new_proposer</span></a>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Giskard.local.html#process_PrepareQC_last_block"><span class="id" title="definition">process_PrepareQC_last_block</span></a>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Giskard.local.html#process_PrepareQC_non_last_block"><span class="id" title="definition">process_PrepareQC_non_last_block</span></a>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Giskard.local.html#process_ViewChange_quorum_new_proposer"><span class="id" title="definition">process_ViewChange_quorum_new_proposer</span></a>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Giskard.local.html#process_ViewChange_pre_quorum"><span class="id" title="definition">process_ViewChange_pre_quorum</span></a>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Giskard.local.html#process_ViewChangeQC_single"><span class="id" title="definition">process_ViewChangeQC_single</span></a>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Giskard.local.html#process_PrepareBlock_malicious_vote"><span class="id" title="definition">process_PrepareBlock_malicious_vote</span></a>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Giskard.local.html#process_PrepareBlock_pending_vote"><span class="id" title="definition">process_PrepareBlock_pending_vote</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hpr</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">process</span>; <span class="id" title="var">decompose</span> <span class="id" title="var">record</span> <span class="id" title="var">Hpr</span>; <span class="id" title="tactic">rewrite</span> <span class="id" title="var">H0</span>; <span class="id" title="tactic">simpl</span>; <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;* <span class="id" title="tactic">case</span> (<a class="idref" href="Giskard.structures.html#node_eq_dec"><span class="id" title="definition">node_eq_dec</span></a> <span class="id" title="var">n</span> (<a class="idref" href="Giskard.structures.html#node_id"><span class="id" title="projection">node_id</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Datatypes.html#fst"><span class="id" title="definition">fst</span></a> <span class="id" title="var">g</span> <span class="id" title="var">n'</span>))); [<span class="id" title="tactic">intro</span> <span class="id" title="var">Heq</span>;<span class="id" title="tactic">apply</span> <a class="idref" href="Giskard.structures.html#node_eqb_correct"><span class="id" title="axiom">node_eqb_correct</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Heq</span>; <span class="id" title="tactic">congruence</span>|].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intro</span> <span class="id" title="var">Hneq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">case</span> (<a class="idref" href="Giskard.structures.html#node_eq_dec"><span class="id" title="definition">node_eq_dec</span></a> <span class="id" title="var">n</span> <span class="id" title="var">n'</span>); [<span class="id" title="tactic">intro</span> <span class="id" title="var">Heq</span>; <span class="id" title="tactic">rewrite</span> <span class="id" title="var">Heq</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hneq</span>; <span class="id" title="tactic">rewrite</span> <span class="id" title="var">H</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hneq</span>; <span class="id" title="tactic">congruence</span>|].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">Hneq'</span> <span class="id" title="var">Hnq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">case_eq</span> (<a class="idref" href="Giskard.structures.html#is_member"><span class="id" title="definition">is_member</span></a> <span class="id" title="var">n</span> <a class="idref" href="Giskard.structures.html#participants"><span class="id" title="axiom">participants</span></a>); <span class="id" title="tactic">intro</span>; <span class="id" title="tactic">simpl</span>; <span class="id" title="tactic">rewrite</span> <span class="id" title="var">H</span>; <span class="id" title="tactic">reflexivity</span>.<br/>
- <span class="id" title="tactic">rewrite</span> <span class="id" title="var">H1</span>; <span class="id" title="tactic">clear</span> <span class="id" title="var">H1</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intro</span> <span class="id" title="var">n</span>; <span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">case_eq</span> (<a class="idref" href="Giskard.structures.html#is_member"><span class="id" title="definition">is_member</span></a> <span class="id" title="var">n</span> <a class="idref" href="Giskard.structures.html#participants"><span class="id" title="axiom">participants</span></a>); <span class="id" title="tactic">intro</span>; <span class="id" title="tactic">simpl</span>; <span class="id" title="tactic">rewrite</span> <span class="id" title="var">H</span>; <span class="id" title="tactic">reflexivity</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
A trace is a mapping from the natural numbers to global states. 
</div>
<div class="code">
<span class="id" title="keyword">Definition</span> <a id="GTrace" class="idref" href="#GTrace"><span class="id" title="definition">GTrace</span></a> : <span class="id" title="keyword">Type</span> := <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="Giskard.global.html#GState"><span class="id" title="definition">GState</span></a>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab31"></a><h2 class="section">Protocol state definitions</h2>

<div class="paragraph"> </div>

 A protocol-following trace is one that starts at the initial state and makes
only protocol-following global state transitions from step i to step (i+1), for all i. 
</div>
<div class="code">
<span class="id" title="keyword">Definition</span> <a id="protocol_trace" class="idref" href="#protocol_trace"><span class="id" title="definition">protocol_trace</span></a> (<a id="t:31" class="idref" href="#t:31"><span class="id" title="binder">t</span></a> : <a class="idref" href="Giskard.global.html#GTrace"><span class="id" title="definition">GTrace</span></a>) : <span class="id" title="keyword">Prop</span> :=<br/>
&nbsp;&nbsp;<a class="idref" href="Giskard.global.html#t:31"><span class="id" title="variable">t</span></a> 0 <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="Giskard.global.html#GState_init"><span class="id" title="definition">GState_init</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a> <span class="id" title="keyword">forall</span> <a id="n:32" class="idref" href="#n:32"><span class="id" title="binder">n</span></a>, <a class="idref" href="Giskard.global.html#GState_transition"><span class="id" title="definition">GState_transition</span></a> (<a class="idref" href="Giskard.global.html#t:31"><span class="id" title="variable">t</span></a> <a class="idref" href="Giskard.global.html#n:32"><span class="id" title="variable">n</span></a>) (<a class="idref" href="Giskard.global.html#t:31"><span class="id" title="variable">t</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <a class="idref" href="Giskard.global.html#n:32"><span class="id" title="variable">n</span></a>)).<br/>

<br/>
</div>

<div class="doc">
In turn, a valid Giskard protocol state is one that exists at the index of a protocol-following trace. 
</div>
<div class="code">
<span class="id" title="keyword">Definition</span> <a id="protocol_state" class="idref" href="#protocol_state"><span class="id" title="definition">protocol_state</span></a> (<a id="g:33" class="idref" href="#g:33"><span class="id" title="binder">g</span></a> : <a class="idref" href="Giskard.global.html#GState"><span class="id" title="definition">GState</span></a>) (<a id="t:34" class="idref" href="#t:34"><span class="id" title="binder">t</span></a> : <a class="idref" href="Giskard.global.html#GTrace"><span class="id" title="definition">GTrace</span></a>) : <span class="id" title="keyword">Prop</span> :=<br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">exists</span></a> <a id="n:35" class="idref" href="#n:35"><span class="id" title="binder">n</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">,</span></a> <a class="idref" href="Giskard.global.html#protocol_trace"><span class="id" title="definition">protocol_trace</span></a> <a class="idref" href="Giskard.global.html#t:34"><span class="id" title="variable">t</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">(</span></a><a class="idref" href="Giskard.global.html#t:34"><span class="id" title="variable">t</span></a> <a class="idref" href="Giskard.global.html#n:35"><span class="id" title="variable">n</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="Giskard.global.html#g:33"><span class="id" title="variable">g</span></a>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab32"></a><h2 class="section">Facts about protocol states and traces</h2>

</div>
<div class="code">

<br/>
<span class="id" title="keyword">Lemma</span> <a id="protocol_trace_zero" class="idref" href="#protocol_trace_zero"><span class="id" title="lemma">protocol_trace_zero</span></a> :<br/>
&nbsp;&nbsp;<span class="id" title="keyword">forall</span> <a id="tr:36" class="idref" href="#tr:36"><span class="id" title="binder">tr</span></a>, <a class="idref" href="Giskard.global.html#protocol_trace"><span class="id" title="definition">protocol_trace</span></a> <a class="idref" href="Giskard.global.html#tr:36"><span class="id" title="variable">tr</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="Giskard.global.html#tr:36"><span class="id" title="variable">tr</span></a> 0 <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="Giskard.global.html#GState_init"><span class="id" title="definition">GState_init</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">tr</span> <span class="id" title="var">H_prot</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H_prot</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">H_init</span> <span class="id" title="var">H_prot</span>].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">assumption</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="GState_init_protocol_state" class="idref" href="#GState_init_protocol_state"><span class="id" title="lemma">GState_init_protocol_state</span></a> :<br/>
&nbsp;&nbsp;<span class="id" title="keyword">forall</span> (<a id="tr:37" class="idref" href="#tr:37"><span class="id" title="binder">tr</span></a> : <a class="idref" href="Giskard.global.html#GTrace"><span class="id" title="definition">GTrace</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Giskard.global.html#protocol_trace"><span class="id" title="definition">protocol_trace</span></a> <a class="idref" href="Giskard.global.html#tr:37"><span class="id" title="variable">tr</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Giskard.global.html#protocol_state"><span class="id" title="definition">protocol_state</span></a> <a class="idref" href="Giskard.global.html#GState_init"><span class="id" title="definition">GState_init</span></a> <a class="idref" href="Giskard.global.html#tr:37"><span class="id" title="variable">tr</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">exists</span> 0. <span class="id" title="tactic">split</span>. <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H</span>; <span class="id" title="var">easy</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="protocol_trace_state_sane" class="idref" href="#protocol_trace_state_sane"><span class="id" title="lemma">protocol_trace_state_sane</span></a> :<br/>
&nbsp;&nbsp;<span class="id" title="keyword">forall</span> <a id="tr:38" class="idref" href="#tr:38"><span class="id" title="binder">tr</span></a>, <a class="idref" href="Giskard.global.html#protocol_trace"><span class="id" title="definition">protocol_trace</span></a> <a class="idref" href="Giskard.global.html#tr:38"><span class="id" title="variable">tr</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<span class="id" title="keyword">forall</span> <a id="n:39" class="idref" href="#n:39"><span class="id" title="binder">n</span></a>, <a class="idref" href="Giskard.global.html#GState_sane"><span class="id" title="definition">GState_sane</span></a> (<a class="idref" href="Giskard.global.html#tr:38"><span class="id" title="variable">tr</span></a> <a class="idref" href="Giskard.global.html#n:39"><span class="id" title="variable">n</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
<span class="id" title="tactic">intros</span> <span class="id" title="var">tr</span> <span class="id" title="var">Htr</span> <span class="id" title="var">n</span>.<br/>
<span class="id" title="tactic">destruct</span> <span class="id" title="var">Htr</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">Hinit</span> <span class="id" title="var">Htr</span>].<br/>
<span class="id" title="var">revert</span> <span class="id" title="var">n</span> <span class="id" title="var">Htr</span>.<br/>
<span class="id" title="tactic">induction</span> <span class="id" title="var">n</span>.<br/>
- <span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">Hinit</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="Giskard.global.html#GState_init_sane"><span class="id" title="lemma">GState_init_sane</span></a>.<br/>
- <span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<span class="id" title="var">IHn</span> <span class="id" title="var">Htr</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<span class="id" title="var">Htr</span> <span class="id" title="var">n</span>).<br/>
&nbsp;&nbsp;<span class="id" title="var">revert</span> <span class="id" title="var">Htr</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="Giskard.global.html#GState_sane_transition"><span class="id" title="lemma">GState_sane_transition</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">assumption</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="view_state_morphism_inductive_step" class="idref" href="#view_state_morphism_inductive_step"><span class="id" title="lemma">view_state_morphism_inductive_step</span></a> :<br/>
&nbsp;&nbsp;<span class="id" title="keyword">forall</span> (<a id="tr:40" class="idref" href="#tr:40"><span class="id" title="binder">tr</span></a> : <a class="idref" href="Giskard.global.html#GTrace"><span class="id" title="definition">GTrace</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Giskard.global.html#protocol_trace"><span class="id" title="definition">protocol_trace</span></a> <a class="idref" href="Giskard.global.html#tr:40"><span class="id" title="variable">tr</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">forall</span> (<a id="i:41" class="idref" href="#i:41"><span class="id" title="binder">i</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>) (<a id="n:42" class="idref" href="#n:42"><span class="id" title="binder">n</span></a> : <a class="idref" href="Giskard.structures.html#node"><span class="id" title="axiom">node</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Lists.List.html#In"><span class="id" title="definition">In</span></a> <a class="idref" href="Giskard.global.html#n:42"><span class="id" title="variable">n</span></a> <a class="idref" href="Giskard.structures.html#participants"><span class="id" title="axiom">participants</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Giskard.structures.html#node_view"><span class="id" title="projection">node_view</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Datatypes.html#fst"><span class="id" title="definition">fst</span></a> (<a class="idref" href="Giskard.global.html#tr:40"><span class="id" title="variable">tr</span></a> <a class="idref" href="Giskard.global.html#i:41"><span class="id" title="variable">i</span></a>) <a class="idref" href="Giskard.global.html#n:42"><span class="id" title="variable">n</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="Giskard.structures.html#node_view"><span class="id" title="projection">node_view</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Datatypes.html#fst"><span class="id" title="definition">fst</span></a> (<a class="idref" href="Giskard.global.html#tr:40"><span class="id" title="variable">tr</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <a class="idref" href="Giskard.global.html#i:41"><span class="id" title="variable">i</span></a>)) <a class="idref" href="Giskard.global.html#n:42"><span class="id" title="variable">n</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Logic.html#f031fe1957c4a4a8e217aa46af2b4e25"><span class="id" title="notation">\/</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> (<a class="idref" href="Giskard.structures.html#node_view"><span class="id" title="projection">node_view</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Datatypes.html#fst"><span class="id" title="definition">fst</span></a> (<a class="idref" href="Giskard.global.html#tr:40"><span class="id" title="variable">tr</span></a> <a class="idref" href="Giskard.global.html#i:41"><span class="id" title="variable">i</span></a>) <a class="idref" href="Giskard.global.html#n:42"><span class="id" title="variable">n</span></a>)) <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="Giskard.structures.html#node_view"><span class="id" title="projection">node_view</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Datatypes.html#fst"><span class="id" title="definition">fst</span></a> (<a class="idref" href="Giskard.global.html#tr:40"><span class="id" title="variable">tr</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <a class="idref" href="Giskard.global.html#i:41"><span class="id" title="variable">i</span></a>)) <a class="idref" href="Giskard.global.html#n:42"><span class="id" title="variable">n</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">tr</span> <span class="id" title="var">Htr</span> <span class="id" title="var">i</span> <span class="id" title="var">n</span> <span class="id" title="var">H_part</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> <span class="id" title="var">Htr</span> <span class="id" title="keyword">as</span> <span class="id" title="var">Htr'</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Htr</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">H_init</span> <span class="id" title="var">H_prot</span>].<br/>
&nbsp;&nbsp;<span class="id" title="var">spec</span> <span class="id" title="var">H_prot</span> <span class="id" title="var">i</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H_prot</span> <span class="id" title="keyword">as</span> [[<span class="id" title="var">n0</span> [<span class="id" title="var">H_in0</span> [<span class="id" title="var">p0</span> [<span class="id" title="var">msg0</span> [<span class="id" title="var">lm0</span> [<span class="id" title="var">H_step</span> <span class="id" title="var">H_deliver</span>]]]]]] | <span class="id" title="var">H_timeout</span>].<br/>
&nbsp;&nbsp;- <span class="comment">(*&nbsp;In&nbsp;the&nbsp;normal&nbsp;transition&nbsp;case&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="Giskard.structures.html#node_eq_dec"><span class="id" title="definition">node_eq_dec</span></a> <span class="id" title="var">n0</span> <span class="id" title="var">n</span>) <span class="id" title="keyword">as</span> [<span class="id" title="var">H_old</span> | <span class="id" title="var">H_new</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">p0</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H_step</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">H_update</span> <span class="id" title="var">_</span>];<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">H_update</span>; <span class="id" title="tactic">simpl</span>; <span class="id" title="tactic">tauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">left</span>; <span class="id" title="tactic">rewrite</span> <span class="id" title="var">H_deliver</span>; <span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<a class="idref" href="Giskard.global.html#protocol_trace_state_sane"><span class="id" title="lemma">protocol_trace_state_sane</span></a> <span class="id" title="var">Htr'</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="Giskard.structures.html#node_eqb_comm"><span class="id" title="lemma">node_eqb_comm</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="Giskard.structures.html#node_eqb_no"><span class="id" title="lemma">node_eqb_no</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H_new</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">H_new</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="Giskard.structures.html#is_member_correct"><span class="id" title="lemma">is_member_correct</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H_part</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">H_part</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;- <span class="comment">(*&nbsp;In&nbsp;the&nbsp;timeout&nbsp;case&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">left</span>; <span class="id" title="tactic">rewrite</span> <span class="id" title="var">H_timeout</span>; <span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="Giskard.structures.html#is_member_correct"><span class="id" title="lemma">is_member_correct</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H_part</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">H_part</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">reflexivity</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="view_state_morphism" class="idref" href="#view_state_morphism"><span class="id" title="lemma">view_state_morphism</span></a> :<br/>
&nbsp;&nbsp;<span class="id" title="keyword">forall</span> (<a id="tr:43" class="idref" href="#tr:43"><span class="id" title="binder">tr</span></a> : <a class="idref" href="Giskard.global.html#GTrace"><span class="id" title="definition">GTrace</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Giskard.global.html#protocol_trace"><span class="id" title="definition">protocol_trace</span></a> <a class="idref" href="Giskard.global.html#tr:43"><span class="id" title="variable">tr</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">forall</span> (<a id="i1:44" class="idref" href="#i1:44"><span class="id" title="binder">i1</span></a> <a id="i2:45" class="idref" href="#i2:45"><span class="id" title="binder">i2</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>) (<a id="n:46" class="idref" href="#n:46"><span class="id" title="binder">n</span></a> : <a class="idref" href="Giskard.structures.html#node"><span class="id" title="axiom">node</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Lists.List.html#In"><span class="id" title="definition">In</span></a> <a class="idref" href="Giskard.global.html#n:46"><span class="id" title="variable">n</span></a> <a class="idref" href="Giskard.structures.html#participants"><span class="id" title="axiom">participants</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Giskard.global.html#i1:44"><span class="id" title="variable">i1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Peano.html#cb53cf0ee22c036a03b4a9281c68b5a3"><span class="id" title="notation">&lt;=</span></a> <a class="idref" href="Giskard.global.html#i2:45"><span class="id" title="variable">i2</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Giskard.structures.html#node_view"><span class="id" title="projection">node_view</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Datatypes.html#fst"><span class="id" title="definition">fst</span></a> (<a class="idref" href="Giskard.global.html#tr:43"><span class="id" title="variable">tr</span></a> <a class="idref" href="Giskard.global.html#i1:44"><span class="id" title="variable">i1</span></a>) <a class="idref" href="Giskard.global.html#n:46"><span class="id" title="variable">n</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Peano.html#cb53cf0ee22c036a03b4a9281c68b5a3"><span class="id" title="notation">&lt;=</span></a> <a class="idref" href="Giskard.structures.html#node_view"><span class="id" title="projection">node_view</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Datatypes.html#fst"><span class="id" title="definition">fst</span></a> (<a class="idref" href="Giskard.global.html#tr:43"><span class="id" title="variable">tr</span></a> <a class="idref" href="Giskard.global.html#i2:45"><span class="id" title="variable">i2</span></a>) <a class="idref" href="Giskard.global.html#n:46"><span class="id" title="variable">n</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">tr</span> <span class="id" title="var">H_prot</span> <span class="id" title="var">i1</span> <span class="id" title="var">i2</span> <span class="id" title="var">n</span> <span class="id" title="var">H_part</span> <span class="id" title="var">H_le</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">i2</span> <span class="id" title="keyword">as</span> [|<span class="id" title="var">i2</span> <span class="id" title="var">IH_prot</span>].<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">destruct</span> <span class="id" title="var">H_prot</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">H_init</span> <span class="id" title="var">_</span>];<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">H_le</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">H_init</span>. <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Arith.Lt.html#le_lt_or_eq"><span class="id" title="lemma">le_lt_or_eq</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H_le</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H_le</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">H_lt</span> | <span class="id" title="var">H_eq</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="var">spec</span> <span class="id" title="var">IH_prot</span>. <span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="Giskard.global.html#view_state_morphism_inductive_step"><span class="id" title="lemma">view_state_morphism_inductive_step</span></a> <span class="id" title="var">H_prot</span> <span class="id" title="var">i2</span> <span class="id" title="var">n</span> <span class="id" title="var">H_part</span>) <span class="id" title="keyword">as</span> [<span class="id" title="var">H_eq</span> | <span class="id" title="var">H_eq_S</span>];<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">clear</span> <span class="id" title="var">IH_prot</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">H_eq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">reflexivity</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="counting_messages_change_tells_receiver" class="idref" href="#counting_messages_change_tells_receiver"><span class="id" title="lemma">counting_messages_change_tells_receiver</span></a> :<br/>
&nbsp;&nbsp;<span class="id" title="keyword">forall</span> <a id="tr:47" class="idref" href="#tr:47"><span class="id" title="binder">tr</span></a> <a id="i:48" class="idref" href="#i:48"><span class="id" title="binder">i</span></a> <a id="p0:49" class="idref" href="#p0:49"><span class="id" title="binder">p0</span></a> <a id="m:50" class="idref" href="#m:50"><span class="id" title="binder">m</span></a> <a id="msg0:51" class="idref" href="#msg0:51"><span class="id" title="binder">msg0</span></a> <a id="lm0:52" class="idref" href="#lm0:52"><span class="id" title="binder">lm0</span></a> <a id="n:53" class="idref" href="#n:53"><span class="id" title="binder">n</span></a> <a id="msg:54" class="idref" href="#msg:54"><span class="id" title="binder">msg</span></a>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Giskard.global.html#protocol_trace"><span class="id" title="definition">protocol_trace</span></a> <a class="idref" href="Giskard.global.html#tr:47"><span class="id" title="variable">tr</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Giskard.local.html#get_transition"><span class="id" title="definition">get_transition</span></a> <a class="idref" href="Giskard.global.html#p0:49"><span class="id" title="variable">p0</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Datatypes.html#fst"><span class="id" title="definition">fst</span></a> (<a class="idref" href="Giskard.global.html#tr:47"><span class="id" title="variable">tr</span></a> <a class="idref" href="Giskard.global.html#i:48"><span class="id" title="variable">i</span></a>) <a class="idref" href="Giskard.global.html#m:50"><span class="id" title="variable">m</span></a>) <a class="idref" href="Giskard.global.html#msg0:51"><span class="id" title="variable">msg0</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Datatypes.html#fst"><span class="id" title="definition">fst</span></a> (<a class="idref" href="Giskard.global.html#tr:47"><span class="id" title="variable">tr</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <a class="idref" href="Giskard.global.html#i:48"><span class="id" title="variable">i</span></a>)) <a class="idref" href="Giskard.global.html#m:50"><span class="id" title="variable">m</span></a>) <a class="idref" href="Giskard.global.html#lm0:52"><span class="id" title="variable">lm0</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Giskard.global.html#tr:47"><span class="id" title="variable">tr</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <a class="idref" href="Giskard.global.html#i:48"><span class="id" title="variable">i</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="Giskard.global.html#broadcast_messages"><span class="id" title="definition">broadcast_messages</span></a> (<a class="idref" href="Giskard.global.html#tr:47"><span class="id" title="variable">tr</span></a> <a class="idref" href="Giskard.global.html#i:48"><span class="id" title="variable">i</span></a>) (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Datatypes.html#fst"><span class="id" title="definition">fst</span></a> (<a class="idref" href="Giskard.global.html#tr:47"><span class="id" title="variable">tr</span></a> <a class="idref" href="Giskard.global.html#i:48"><span class="id" title="variable">i</span></a>) <a class="idref" href="Giskard.global.html#m:50"><span class="id" title="variable">m</span></a>) (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Datatypes.html#fst"><span class="id" title="definition">fst</span></a> (<a class="idref" href="Giskard.global.html#tr:47"><span class="id" title="variable">tr</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <a class="idref" href="Giskard.global.html#i:48"><span class="id" title="variable">i</span></a>)) <a class="idref" href="Giskard.global.html#m:50"><span class="id" title="variable">m</span></a>) <a class="idref" href="Giskard.global.html#lm0:52"><span class="id" title="variable">lm0</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Lists.List.html#In"><span class="id" title="definition">In</span></a> <a class="idref" href="Giskard.global.html#n:53"><span class="id" title="variable">n</span></a> <a class="idref" href="Giskard.structures.html#participants"><span class="id" title="axiom">participants</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Logic.html#63a68285c81db8f9bc456233bb9ed181"><span class="id" title="notation">~</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Lists.List.html#In"><span class="id" title="definition">In</span></a> <a class="idref" href="Giskard.global.html#msg:54"><span class="id" title="variable">msg</span></a> (<a class="idref" href="Giskard.structures.html#counting_messages"><span class="id" title="projection">counting_messages</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Datatypes.html#fst"><span class="id" title="definition">fst</span></a> (<a class="idref" href="Giskard.global.html#tr:47"><span class="id" title="variable">tr</span></a> <a class="idref" href="Giskard.global.html#i:48"><span class="id" title="variable">i</span></a>) <a class="idref" href="Giskard.global.html#n:53"><span class="id" title="variable">n</span></a>)) <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Lists.List.html#In"><span class="id" title="definition">In</span></a> <a class="idref" href="Giskard.global.html#msg:54"><span class="id" title="variable">msg</span></a> (<a class="idref" href="Giskard.structures.html#counting_messages"><span class="id" title="projection">counting_messages</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Datatypes.html#fst"><span class="id" title="definition">fst</span></a> (<a class="idref" href="Giskard.global.html#tr:47"><span class="id" title="variable">tr</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <a class="idref" href="Giskard.global.html#i:48"><span class="id" title="variable">i</span></a>)) <a class="idref" href="Giskard.global.html#n:53"><span class="id" title="variable">n</span></a>)) <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Giskard.global.html#m:50"><span class="id" title="variable">m</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="Giskard.global.html#n:53"><span class="id" title="variable">n</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">tr</span> <span class="id" title="var">i</span> <span class="id" title="var">p0</span> <span class="id" title="var">m</span> <span class="id" title="var">msg0</span> <span class="id" title="var">lm0</span> <span class="id" title="var">n</span> <span class="id" title="var">msg</span> <span class="id" title="var">Htr</span> <span class="id" title="var">H_step</span> <span class="id" title="var">H_deliver</span> <span class="id" title="var">H_part</span> <span class="id" title="var">H_not_in</span> <span class="id" title="var">H_in</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> <span class="id" title="var">Htr</span> <span class="id" title="keyword">as</span> <span class="id" title="var">Htr'</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Htr</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">H_init</span> <span class="id" title="var">H_prot</span>].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="Giskard.structures.html#node_eq_dec"><span class="id" title="definition">node_eq_dec</span></a> <span class="id" title="var">m</span> <span class="id" title="var">n</span>) <span class="id" title="keyword">as</span> [<span class="id" title="var">H_true</span> | <span class="id" title="var">H_false</span>].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="Giskard.structures.html#node_eqb_no"><span class="id" title="lemma">node_eqb_no</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H_false</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">H_same_counting</span> : <a class="idref" href="Giskard.structures.html#counting_messages"><span class="id" title="projection">counting_messages</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Datatypes.html#fst"><span class="id" title="definition">fst</span></a> (<span class="id" title="var">tr</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <span class="id" title="var">i</span>)) <span class="id" title="var">n</span>) <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="Giskard.structures.html#counting_messages"><span class="id" title="projection">counting_messages</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Datatypes.html#fst"><span class="id" title="definition">fst</span></a> (<span class="id" title="var">tr</span> <span class="id" title="var">i</span>) <span class="id" title="var">n</span>)).<br/>
&nbsp;&nbsp;{ <span class="id" title="tactic">rewrite</span> <span class="id" title="var">H_deliver</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="Giskard.global.html#broadcast_messages"><span class="id" title="definition">broadcast_messages</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<a class="idref" href="Giskard.structures.html#is_member"><span class="id" title="definition">is_member</span></a> <span class="id" title="var">n</span> <a class="idref" href="Giskard.structures.html#participants"><span class="id" title="axiom">participants</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a>) <span class="id" title="tactic">by</span> <span class="id" title="var">now</span> <span class="id" title="tactic">apply</span> <a class="idref" href="Giskard.structures.html#is_member_correct"><span class="id" title="lemma">is_member_correct</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<a class="idref" href="Giskard.global.html#protocol_trace_state_sane"><span class="id" title="lemma">protocol_trace_state_sane</span></a> <span class="id" title="var">Htr'</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="Giskard.structures.html#node_eqb_comm"><span class="id" title="lemma">node_eqb_comm</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H_false</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">H_false</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">reflexivity</span>. }<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">H_same_counting</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H_in</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">contradiction</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="out_messages_global_monotonic_step" class="idref" href="#out_messages_global_monotonic_step"><span class="id" title="lemma">out_messages_global_monotonic_step</span></a> :<br/>
&nbsp;&nbsp;<span class="id" title="keyword">forall</span> (<a id="tr:55" class="idref" href="#tr:55"><span class="id" title="binder">tr</span></a> : <a class="idref" href="Giskard.global.html#GTrace"><span class="id" title="definition">GTrace</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Giskard.global.html#protocol_trace"><span class="id" title="definition">protocol_trace</span></a> <a class="idref" href="Giskard.global.html#tr:55"><span class="id" title="variable">tr</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">forall</span> (<a id="i:56" class="idref" href="#i:56"><span class="id" title="binder">i</span></a>: <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">forall</span> (<a id="n:57" class="idref" href="#n:57"><span class="id" title="binder">n</span></a> : <a class="idref" href="Giskard.structures.html#node"><span class="id" title="axiom">node</span></a>) (<a id="msg:58" class="idref" href="#msg:58"><span class="id" title="binder">msg</span></a> : <a class="idref" href="Giskard.structures.html#message"><span class="id" title="record">message</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Lists.List.html#In"><span class="id" title="definition">In</span></a> <a class="idref" href="Giskard.global.html#n:57"><span class="id" title="variable">n</span></a> <a class="idref" href="Giskard.structures.html#participants"><span class="id" title="axiom">participants</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Lists.List.html#In"><span class="id" title="definition">In</span></a> <a class="idref" href="Giskard.global.html#msg:58"><span class="id" title="variable">msg</span></a> (<a class="idref" href="Giskard.structures.html#out_messages"><span class="id" title="projection">out_messages</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Datatypes.html#fst"><span class="id" title="definition">fst</span></a> (<a class="idref" href="Giskard.global.html#tr:55"><span class="id" title="variable">tr</span></a> <a class="idref" href="Giskard.global.html#i:56"><span class="id" title="variable">i</span></a>) <a class="idref" href="Giskard.global.html#n:57"><span class="id" title="variable">n</span></a>)) <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Lists.List.html#In"><span class="id" title="definition">In</span></a> <a class="idref" href="Giskard.global.html#msg:58"><span class="id" title="variable">msg</span></a> (<a class="idref" href="Giskard.structures.html#out_messages"><span class="id" title="projection">out_messages</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Datatypes.html#fst"><span class="id" title="definition">fst</span></a> (<a class="idref" href="Giskard.global.html#tr:55"><span class="id" title="variable">tr</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <a class="idref" href="Giskard.global.html#i:56"><span class="id" title="variable">i</span></a>)) <a class="idref" href="Giskard.global.html#n:57"><span class="id" title="variable">n</span></a>)).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">tr</span> <span class="id" title="var">Htr</span> <span class="id" title="var">i</span> <span class="id" title="var">n</span> <span class="id" title="var">msg</span> <span class="id" title="var">H_part</span> <span class="id" title="var">H_in1</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> <span class="id" title="var">Htr</span> <span class="id" title="keyword">as</span> <span class="id" title="var">Htr'</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Htr</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">H_init</span> <span class="id" title="var">H_prot</span>].<br/>
&nbsp;&nbsp;<span class="id" title="var">spec</span> <span class="id" title="var">H_prot</span> <span class="id" title="var">i</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H_prot</span> <span class="id" title="keyword">as</span> [[<span class="id" title="var">n0</span> [<span class="id" title="var">H_in</span> [<span class="id" title="var">p</span> [<span class="id" title="var">msg0</span> [<span class="id" title="var">lm0</span> [<span class="id" title="var">H_process</span> <span class="id" title="var">H_deliver</span>]]]]]] | <span class="id" title="var">H_timeout</span>].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="Giskard.structures.html#node_eq_dec"><span class="id" title="definition">node_eq_dec</span></a> <span class="id" title="var">n0</span> <span class="id" title="var">n</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">e</span> <span class="id" title="tactic">in</span> *.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">p</span>; <span class="id" title="tactic">destruct</span> <span class="id" title="var">H_process</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">H_update</span> <span class="id" title="var">_</span>];<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">H_update</span>; <span class="id" title="tactic">simpl</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">try</span> <span class="id" title="tactic">assumption</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">try</span> (<span class="id" title="tactic">try</span> <span class="id" title="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Lists.List.html#in_app_iff"><span class="id" title="lemma">in_app_iff</span></a>; <span class="id" title="tactic">repeat</span> <span class="id" title="tactic">right</span>; <span class="id" title="tactic">assumption</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">H_deliver</span>. <span class="id" title="tactic">unfold</span> <a class="idref" href="Giskard.global.html#broadcast_messages"><span class="id" title="definition">broadcast_messages</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<a class="idref" href="Giskard.structures.html#is_member"><span class="id" title="definition">is_member</span></a> <span class="id" title="var">n</span> <a class="idref" href="Giskard.structures.html#participants"><span class="id" title="axiom">participants</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a>) <span class="id" title="tactic">by</span> <span class="id" title="var">now</span> <span class="id" title="tactic">apply</span> <a class="idref" href="Giskard.structures.html#is_member_correct"><span class="id" title="lemma">is_member_correct</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<a class="idref" href="Giskard.global.html#protocol_trace_state_sane"><span class="id" title="lemma">protocol_trace_state_sane</span></a> <span class="id" title="var">Htr'</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="Giskard.structures.html#node_eqb_no"><span class="id" title="lemma">node_eqb_no</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">n1</span>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="Giskard.structures.html#node_eqb_comm"><span class="id" title="lemma">node_eqb_comm</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">n1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">n1</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">H_timeout</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<a class="idref" href="Giskard.structures.html#is_member"><span class="id" title="definition">is_member</span></a> <span class="id" title="var">n</span> <a class="idref" href="Giskard.structures.html#participants"><span class="id" title="axiom">participants</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a>) <span class="id" title="tactic">by</span> <span class="id" title="var">now</span> <span class="id" title="tactic">apply</span> <a class="idref" href="Giskard.structures.html#is_member_correct"><span class="id" title="lemma">is_member_correct</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span>; <span class="id" title="tactic">rewrite</span> <span class="id" title="var">H</span>. <span class="id" title="var">easy</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="out_messages_global_monotonic" class="idref" href="#out_messages_global_monotonic"><span class="id" title="lemma">out_messages_global_monotonic</span></a> :<br/>
&nbsp;&nbsp;<span class="id" title="keyword">forall</span> (<a id="tr:59" class="idref" href="#tr:59"><span class="id" title="binder">tr</span></a> : <a class="idref" href="Giskard.global.html#GTrace"><span class="id" title="definition">GTrace</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Giskard.global.html#protocol_trace"><span class="id" title="definition">protocol_trace</span></a> <a class="idref" href="Giskard.global.html#tr:59"><span class="id" title="variable">tr</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">forall</span> (<a id="n1:60" class="idref" href="#n1:60"><span class="id" title="binder">n1</span></a> <a id="n2:61" class="idref" href="#n2:61"><span class="id" title="binder">n2</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Giskard.global.html#n1:60"><span class="id" title="variable">n1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Peano.html#::nat_scope:x_'&lt;'_x"><span class="id" title="notation">&lt;</span></a> <a class="idref" href="Giskard.global.html#n2:61"><span class="id" title="variable">n2</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">forall</span> (<a id="n:62" class="idref" href="#n:62"><span class="id" title="binder">n</span></a> : <a class="idref" href="Giskard.structures.html#node"><span class="id" title="axiom">node</span></a>) (<a id="msg:63" class="idref" href="#msg:63"><span class="id" title="binder">msg</span></a> : <a class="idref" href="Giskard.structures.html#message"><span class="id" title="record">message</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Lists.List.html#In"><span class="id" title="definition">In</span></a> <a class="idref" href="Giskard.global.html#n:62"><span class="id" title="variable">n</span></a> <a class="idref" href="Giskard.structures.html#participants"><span class="id" title="axiom">participants</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Lists.List.html#In"><span class="id" title="definition">In</span></a> <a class="idref" href="Giskard.global.html#msg:63"><span class="id" title="variable">msg</span></a> (<a class="idref" href="Giskard.structures.html#out_messages"><span class="id" title="projection">out_messages</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Datatypes.html#fst"><span class="id" title="definition">fst</span></a> (<a class="idref" href="Giskard.global.html#tr:59"><span class="id" title="variable">tr</span></a> <a class="idref" href="Giskard.global.html#n1:60"><span class="id" title="variable">n1</span></a>) <a class="idref" href="Giskard.global.html#n:62"><span class="id" title="variable">n</span></a>)) <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Lists.List.html#In"><span class="id" title="definition">In</span></a> <a class="idref" href="Giskard.global.html#msg:63"><span class="id" title="variable">msg</span></a> (<a class="idref" href="Giskard.structures.html#out_messages"><span class="id" title="projection">out_messages</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Datatypes.html#fst"><span class="id" title="definition">fst</span></a> (<a class="idref" href="Giskard.global.html#tr:59"><span class="id" title="variable">tr</span></a> <a class="idref" href="Giskard.global.html#n2:61"><span class="id" title="variable">n2</span></a>) <a class="idref" href="Giskard.global.html#n:62"><span class="id" title="variable">n</span></a>)).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">tr</span> [<span class="id" title="var">H_init</span> <span class="id" title="var">H_prot</span>] <span class="id" title="var">n1</span> <span class="id" title="var">n2</span> <span class="id" title="var">H_lt</span> <span class="id" title="var">n</span> <span class="id" title="var">msg</span> <span class="id" title="var">H_part</span> <span class="id" title="var">H_in1</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">generalize</span> <span class="id" title="tactic">dependent</span> <span class="id" title="var">n2</span>. <span class="id" title="tactic">induction</span> <span class="id" title="var">n2</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>. <span class="id" title="tactic">inversion</span> <span class="id" title="var">H_lt</span>. <span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">n1</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Peano.html#::nat_scope:x_'&lt;'_x"><span class="id" title="notation">&lt;</span></a> <span class="id" title="var">n2</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Logic.html#f031fe1957c4a4a8e217aa46af2b4e25"><span class="id" title="notation">\/</span></a> <span class="id" title="var">n1</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <span class="id" title="var">n2</span>) <span class="id" title="tactic">by</span> <span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H</span>. <span class="id" title="var">spec</span> <span class="id" title="var">IHn2</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">apply</span> <a class="idref" href="Giskard.global.html#out_messages_global_monotonic_step"><span class="id" title="lemma">out_messages_global_monotonic_step</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">apply</span> <a class="idref" href="Giskard.global.html#out_messages_global_monotonic_step"><span class="id" title="lemma">out_messages_global_monotonic_step</span></a>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="out_messages_change_means_sent" class="idref" href="#out_messages_change_means_sent"><span class="id" title="lemma">out_messages_change_means_sent</span></a> :<br/>
&nbsp;&nbsp;<span class="id" title="keyword">forall</span> (<a id="tr:64" class="idref" href="#tr:64"><span class="id" title="binder">tr</span></a> : <a class="idref" href="Giskard.global.html#GTrace"><span class="id" title="definition">GTrace</span></a>),<br/>
&nbsp;&nbsp;&nbsp;<a class="idref" href="Giskard.global.html#protocol_trace"><span class="id" title="definition">protocol_trace</span></a> <a class="idref" href="Giskard.global.html#tr:64"><span class="id" title="variable">tr</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">forall</span> (<a id="i:65" class="idref" href="#i:65"><span class="id" title="binder">i</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>) (<a id="n0:66" class="idref" href="#n0:66"><span class="id" title="binder">n0</span></a> : <a class="idref" href="Giskard.structures.html#node"><span class="id" title="axiom">node</span></a>) (<a id="p0:67" class="idref" href="#p0:67"><span class="id" title="binder">p0</span></a> : <a class="idref" href="Giskard.local.html#NState_transition_type"><span class="id" title="inductive">NState_transition_type</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a id="msg0:68" class="idref" href="#msg0:68"><span class="id" title="binder">msg0</span></a> : <a class="idref" href="Giskard.structures.html#message"><span class="id" title="record">message</span></a>) (<a id="lm0:69" class="idref" href="#lm0:69"><span class="id" title="binder">lm0</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="Giskard.structures.html#message"><span class="id" title="record">message</span></a>),<br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Lists.List.html#In"><span class="id" title="definition">In</span></a> <a class="idref" href="Giskard.global.html#n0:66"><span class="id" title="variable">n0</span></a> <a class="idref" href="Giskard.structures.html#participants"><span class="id" title="axiom">participants</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="Giskard.global.html#tr:64"><span class="id" title="variable">tr</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <a class="idref" href="Giskard.global.html#i:65"><span class="id" title="variable">i</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="Giskard.global.html#broadcast_messages"><span class="id" title="definition">broadcast_messages</span></a> (<a class="idref" href="Giskard.global.html#tr:64"><span class="id" title="variable">tr</span></a> <a class="idref" href="Giskard.global.html#i:65"><span class="id" title="variable">i</span></a>) (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Datatypes.html#fst"><span class="id" title="definition">fst</span></a> (<a class="idref" href="Giskard.global.html#tr:64"><span class="id" title="variable">tr</span></a> <a class="idref" href="Giskard.global.html#i:65"><span class="id" title="variable">i</span></a>) <a class="idref" href="Giskard.global.html#n0:66"><span class="id" title="variable">n0</span></a>) (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Datatypes.html#fst"><span class="id" title="definition">fst</span></a> (<a class="idref" href="Giskard.global.html#tr:64"><span class="id" title="variable">tr</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <a class="idref" href="Giskard.global.html#i:65"><span class="id" title="variable">i</span></a>)) <a class="idref" href="Giskard.global.html#n0:66"><span class="id" title="variable">n0</span></a>) <a class="idref" href="Giskard.global.html#lm0:69"><span class="id" title="variable">lm0</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="Giskard.local.html#get_transition"><span class="id" title="definition">get_transition</span></a> <a class="idref" href="Giskard.global.html#p0:67"><span class="id" title="variable">p0</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Datatypes.html#fst"><span class="id" title="definition">fst</span></a> (<a class="idref" href="Giskard.global.html#tr:64"><span class="id" title="variable">tr</span></a> <a class="idref" href="Giskard.global.html#i:65"><span class="id" title="variable">i</span></a>) <a class="idref" href="Giskard.global.html#n0:66"><span class="id" title="variable">n0</span></a>) <a class="idref" href="Giskard.global.html#msg0:68"><span class="id" title="variable">msg0</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Datatypes.html#fst"><span class="id" title="definition">fst</span></a> (<a class="idref" href="Giskard.global.html#tr:64"><span class="id" title="variable">tr</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <a class="idref" href="Giskard.global.html#i:65"><span class="id" title="variable">i</span></a>)) <a class="idref" href="Giskard.global.html#n0:66"><span class="id" title="variable">n0</span></a>) <a class="idref" href="Giskard.global.html#lm0:69"><span class="id" title="variable">lm0</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<span class="id" title="keyword">forall</span> <a id="n:70" class="idref" href="#n:70"><span class="id" title="binder">n</span></a> : <a class="idref" href="Giskard.structures.html#node"><span class="id" title="axiom">node</span></a>,<br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Lists.List.html#In"><span class="id" title="definition">In</span></a> <a class="idref" href="Giskard.global.html#n:70"><span class="id" title="variable">n</span></a> <a class="idref" href="Giskard.structures.html#participants"><span class="id" title="axiom">participants</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<span class="id" title="keyword">forall</span> <a id="msg:71" class="idref" href="#msg:71"><span class="id" title="binder">msg</span></a> : <a class="idref" href="Giskard.structures.html#message"><span class="id" title="record">message</span></a>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Lists.List.html#In"><span class="id" title="definition">In</span></a> <a class="idref" href="Giskard.global.html#msg:71"><span class="id" title="variable">msg</span></a> (<a class="idref" href="Giskard.structures.html#out_messages"><span class="id" title="projection">out_messages</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Datatypes.html#fst"><span class="id" title="definition">fst</span></a> (<a class="idref" href="Giskard.global.html#tr:64"><span class="id" title="variable">tr</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <a class="idref" href="Giskard.global.html#i:65"><span class="id" title="variable">i</span></a>)) <a class="idref" href="Giskard.global.html#n:70"><span class="id" title="variable">n</span></a>)) <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Logic.html#63a68285c81db8f9bc456233bb9ed181"><span class="id" title="notation">~</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Lists.List.html#In"><span class="id" title="definition">In</span></a> <a class="idref" href="Giskard.global.html#msg:71"><span class="id" title="variable">msg</span></a> (<a class="idref" href="Giskard.structures.html#out_messages"><span class="id" title="projection">out_messages</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Datatypes.html#fst"><span class="id" title="definition">fst</span></a> (<a class="idref" href="Giskard.global.html#tr:64"><span class="id" title="variable">tr</span></a> <a class="idref" href="Giskard.global.html#i:65"><span class="id" title="variable">i</span></a>) <a class="idref" href="Giskard.global.html#n:70"><span class="id" title="variable">n</span></a>)) <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Lists.List.html#In"><span class="id" title="definition">In</span></a> <a class="idref" href="Giskard.global.html#msg:71"><span class="id" title="variable">msg</span></a> <a class="idref" href="Giskard.global.html#lm0:69"><span class="id" title="variable">lm0</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">tr</span> <span class="id" title="var">Htr</span> <span class="id" title="var">i</span> <span class="id" title="var">n0</span> <span class="id" title="var">p0</span> <span class="id" title="var">msg0</span> <span class="id" title="var">lm0</span> <span class="id" title="var">H_part0</span> <span class="id" title="var">H_deliver</span> <span class="id" title="var">H_step</span> <span class="id" title="var">n</span> <span class="id" title="var">H_part</span> <span class="id" title="var">msg</span> <span class="id" title="var">H_in</span> <span class="id" title="var">H_out</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="Giskard.structures.html#node_eq_dec"><span class="id" title="definition">node_eq_dec</span></a> <span class="id" title="var">n0</span> <span class="id" title="var">n</span>) <span class="id" title="keyword">as</span> [<span class="id" title="var">H_eq</span> | <span class="id" title="var">H_neq</span>].<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">rewrite</span> <span class="id" title="var">H_eq</span> <span class="id" title="tactic">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">p0</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">H_step_copy</span> := <span class="id" title="var">H_step</span>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H_step</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">H_update</span> [<span class="id" title="var">H_broadcast</span> <span class="id" title="var">H_rest</span>]];<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">H_update</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H_in</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">H_broadcast</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H_in</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">try</span> <span class="id" title="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Lists.List.html#in_app_iff"><span class="id" title="lemma">in_app_iff</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H_in</span>; <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">repeat</span> <span class="id" title="tactic">destruct</span> <span class="id" title="var">H_in</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">H_in</span> | <span class="id" title="var">H_in</span>];<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">try</span> <span class="id" title="var">contradiction</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">try</span> <span class="id" title="tactic">assumption</span>; <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">try</span> (<span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">H_in</span>; <span class="id" title="tactic">simpl</span>; <span class="id" title="tactic">tauto</span>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">try</span> (<span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">H_in</span>; <span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Lists.List.html#in_eq"><span class="id" title="lemma">in_eq</span></a>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">try</span> (<span class="id" title="tactic">right</span>; <span class="id" title="tactic">assumption</span>).<br/>
&nbsp;&nbsp;- <span class="id" title="var">exfalso</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">H_deliver</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H_in</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H_in</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<a class="idref" href="Giskard.global.html#protocol_trace_state_sane"><span class="id" title="lemma">protocol_trace_state_sane</span></a> <span class="id" title="var">Htr</span>) <span class="id" title="tactic">in</span> <span class="id" title="var">H_in</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="Giskard.structures.html#node_eqb_comm"><span class="id" title="lemma">node_eqb_comm</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H_in</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="Giskard.structures.html#node_eqb_no"><span class="id" title="lemma">node_eqb_no</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H_neq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">H_neq</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H_in</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="Giskard.structures.html#is_member_correct"><span class="id" title="lemma">is_member_correct</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H_part</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">H_part</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H_in</span>. <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H_in</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">contradiction</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="global_messages_monotonic_step" class="idref" href="#global_messages_monotonic_step"><span class="id" title="lemma">global_messages_monotonic_step</span></a> :<br/>
&nbsp;&nbsp;<span class="id" title="keyword">forall</span> <a id="tr:72" class="idref" href="#tr:72"><span class="id" title="binder">tr</span></a> : <a class="idref" href="Giskard.global.html#GTrace"><span class="id" title="definition">GTrace</span></a>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Giskard.global.html#protocol_trace"><span class="id" title="definition">protocol_trace</span></a> <a class="idref" href="Giskard.global.html#tr:72"><span class="id" title="variable">tr</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">forall</span> (<a id="n:73" class="idref" href="#n:73"><span class="id" title="binder">n</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>) (<a id="msg:74" class="idref" href="#msg:74"><span class="id" title="binder">msg</span></a> : <a class="idref" href="Giskard.structures.html#message"><span class="id" title="record">message</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Lists.List.html#In"><span class="id" title="definition">In</span></a> <a class="idref" href="Giskard.global.html#msg:74"><span class="id" title="variable">msg</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Datatypes.html#snd"><span class="id" title="definition">snd</span></a> (<a class="idref" href="Giskard.global.html#tr:72"><span class="id" title="variable">tr</span></a> <a class="idref" href="Giskard.global.html#n:73"><span class="id" title="variable">n</span></a>)) <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Lists.List.html#In"><span class="id" title="definition">In</span></a> <a class="idref" href="Giskard.global.html#msg:74"><span class="id" title="variable">msg</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Datatypes.html#snd"><span class="id" title="definition">snd</span></a> (<a class="idref" href="Giskard.global.html#tr:72"><span class="id" title="variable">tr</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <a class="idref" href="Giskard.global.html#n:73"><span class="id" title="variable">n</span></a>))).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">tr</span> <span class="id" title="var">H_prot</span> <span class="id" title="var">n</span> <span class="id" title="var">msg</span> <span class="id" title="var">H_in</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H_prot</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">H_init</span> <span class="id" title="var">H_prot</span>];<br/>
&nbsp;&nbsp;<span class="id" title="var">spec</span> <span class="id" title="var">H_prot</span> <span class="id" title="var">n</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H_prot</span> <span class="id" title="keyword">as</span> [[<span class="id" title="var">n0</span> [<span class="id" title="var">H_in0</span> [<span class="id" title="var">p0</span> [<span class="id" title="var">msg0</span> [<span class="id" title="var">lm0</span> [<span class="id" title="var">H_step</span> <span class="id" title="var">H_deliver</span>]]]]]] | <span class="id" title="var">H_timeout</span>].<br/>
&nbsp;&nbsp;- <span class="comment">(*&nbsp;In&nbsp;the&nbsp;transition&nbsp;case&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">H_deliver</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Lists.List.html#in_app_iff"><span class="id" title="lemma">in_app_iff</span></a>. <span class="id" title="var">now</span> <span class="id" title="tactic">right</span>.<br/>
&nbsp;&nbsp;- <span class="comment">(*&nbsp;In&nbsp;the&nbsp;timeout&nbsp;case&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">H_timeout</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">assumption</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="global_messages_monotonic" class="idref" href="#global_messages_monotonic"><span class="id" title="lemma">global_messages_monotonic</span></a> :<br/>
&nbsp;&nbsp;<span class="id" title="keyword">forall</span> <a id="tr:75" class="idref" href="#tr:75"><span class="id" title="binder">tr</span></a> : <a class="idref" href="Giskard.global.html#GTrace"><span class="id" title="definition">GTrace</span></a>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Giskard.global.html#protocol_trace"><span class="id" title="definition">protocol_trace</span></a> <a class="idref" href="Giskard.global.html#tr:75"><span class="id" title="variable">tr</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">forall</span> <a id="n1:76" class="idref" href="#n1:76"><span class="id" title="binder">n1</span></a> <a id="n2:77" class="idref" href="#n2:77"><span class="id" title="binder">n2</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Giskard.global.html#n1:76"><span class="id" title="variable">n1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Peano.html#::nat_scope:x_'&lt;'_x"><span class="id" title="notation">&lt;</span></a> <a class="idref" href="Giskard.global.html#n2:77"><span class="id" title="variable">n2</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">forall</span> (<a id="msg:78" class="idref" href="#msg:78"><span class="id" title="binder">msg</span></a> : <a class="idref" href="Giskard.structures.html#message"><span class="id" title="record">message</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Lists.List.html#In"><span class="id" title="definition">In</span></a> <a class="idref" href="Giskard.global.html#msg:78"><span class="id" title="variable">msg</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Datatypes.html#snd"><span class="id" title="definition">snd</span></a> (<a class="idref" href="Giskard.global.html#tr:75"><span class="id" title="variable">tr</span></a> <a class="idref" href="Giskard.global.html#n1:76"><span class="id" title="variable">n1</span></a>)) <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Lists.List.html#In"><span class="id" title="definition">In</span></a> <a class="idref" href="Giskard.global.html#msg:78"><span class="id" title="variable">msg</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Datatypes.html#snd"><span class="id" title="definition">snd</span></a> (<a class="idref" href="Giskard.global.html#tr:75"><span class="id" title="variable">tr</span></a> <a class="idref" href="Giskard.global.html#n2:77"><span class="id" title="variable">n2</span></a>)).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">tr</span> <span class="id" title="var">H_prot</span> <span class="id" title="var">n1</span> <span class="id" title="var">n2</span> <span class="id" title="var">H_lt</span> <span class="id" title="var">msg</span> <span class="id" title="var">H_in</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">n2</span> <span class="id" title="keyword">as</span> [|<span class="id" title="var">n2</span> <span class="id" title="var">IH_prot</span>].<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">inversion</span> <span class="id" title="var">H_lt</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">assert</span> (<span class="id" title="var">H</span> : <span class="id" title="var">n1</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Peano.html#::nat_scope:x_'&lt;'_x"><span class="id" title="notation">&lt;</span></a> <span class="id" title="var">n2</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Logic.html#f031fe1957c4a4a8e217aa46af2b4e25"><span class="id" title="notation">\/</span></a> <span class="id" title="var">n1</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <span class="id" title="var">n2</span>) <span class="id" title="tactic">by</span> <span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">H_still_lt</span> | <span class="id" title="var">H_eq</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="var">spec</span> <span class="id" title="var">IH_prot</span> <span class="id" title="var">H_still_lt</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">apply</span> <a class="idref" href="Giskard.global.html#global_messages_monotonic_step"><span class="id" title="lemma">global_messages_monotonic_step</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">apply</span> <a class="idref" href="Giskard.global.html#global_messages_monotonic_step"><span class="id" title="lemma">global_messages_monotonic_step</span></a>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="not_my_problem" class="idref" href="#not_my_problem"><span class="id" title="lemma">not_my_problem</span></a> :<br/>
&nbsp;&nbsp;<span class="id" title="keyword">forall</span> <a id="tr:79" class="idref" href="#tr:79"><span class="id" title="binder">tr</span></a>, <a class="idref" href="Giskard.global.html#protocol_trace"><span class="id" title="definition">protocol_trace</span></a> <a class="idref" href="Giskard.global.html#tr:79"><span class="id" title="variable">tr</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">forall</span> <a id="i:80" class="idref" href="#i:80"><span class="id" title="binder">i</span></a> <a id="n:81" class="idref" href="#n:81"><span class="id" title="binder">n</span></a> <a id="n0:82" class="idref" href="#n0:82"><span class="id" title="binder">n0</span></a> <a id="lm0:83" class="idref" href="#lm0:83"><span class="id" title="binder">lm0</span></a>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Lists.List.html#In"><span class="id" title="definition">In</span></a> <a class="idref" href="Giskard.global.html#n:81"><span class="id" title="variable">n</span></a> <a class="idref" href="Giskard.structures.html#participants"><span class="id" title="axiom">participants</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Giskard.global.html#n0:82"><span class="id" title="variable">n0</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'&lt;&gt;'_x"><span class="id" title="notation">&lt;&gt;</span></a> <a class="idref" href="Giskard.global.html#n:81"><span class="id" title="variable">n</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Giskard.global.html#tr:79"><span class="id" title="variable">tr</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <a class="idref" href="Giskard.global.html#i:80"><span class="id" title="variable">i</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="Giskard.global.html#broadcast_messages"><span class="id" title="definition">broadcast_messages</span></a> (<a class="idref" href="Giskard.global.html#tr:79"><span class="id" title="variable">tr</span></a> <a class="idref" href="Giskard.global.html#i:80"><span class="id" title="variable">i</span></a>) (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Datatypes.html#fst"><span class="id" title="definition">fst</span></a> (<a class="idref" href="Giskard.global.html#tr:79"><span class="id" title="variable">tr</span></a> <a class="idref" href="Giskard.global.html#i:80"><span class="id" title="variable">i</span></a>) <a class="idref" href="Giskard.global.html#n0:82"><span class="id" title="variable">n0</span></a>) (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Datatypes.html#fst"><span class="id" title="definition">fst</span></a> (<a class="idref" href="Giskard.global.html#tr:79"><span class="id" title="variable">tr</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <a class="idref" href="Giskard.global.html#i:80"><span class="id" title="variable">i</span></a>)) <a class="idref" href="Giskard.global.html#n0:82"><span class="id" title="variable">n0</span></a>) <a class="idref" href="Giskard.global.html#lm0:83"><span class="id" title="variable">lm0</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Giskard.structures.html#counting_messages"><span class="id" title="projection">counting_messages</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Datatypes.html#fst"><span class="id" title="definition">fst</span></a> (<a class="idref" href="Giskard.global.html#tr:79"><span class="id" title="variable">tr</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <a class="idref" href="Giskard.global.html#i:80"><span class="id" title="variable">i</span></a>)) <a class="idref" href="Giskard.global.html#n:81"><span class="id" title="variable">n</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="Giskard.structures.html#counting_messages"><span class="id" title="projection">counting_messages</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Datatypes.html#fst"><span class="id" title="definition">fst</span></a> (<a class="idref" href="Giskard.global.html#tr:79"><span class="id" title="variable">tr</span></a> <a class="idref" href="Giskard.global.html#i:80"><span class="id" title="variable">i</span></a>) <a class="idref" href="Giskard.global.html#n:81"><span class="id" title="variable">n</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">tr</span> <span class="id" title="var">Htr</span>; <span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">H1</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="Giskard.global.html#broadcast_messages"><span class="id" title="definition">broadcast_messages</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<a class="idref" href="Giskard.global.html#protocol_trace_state_sane"><span class="id" title="lemma">protocol_trace_state_sane</span></a> <span class="id" title="var">Htr</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="Giskard.structures.html#node_eqb_no"><span class="id" title="lemma">node_eqb_no</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H0</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="Giskard.structures.html#node_eqb_comm"><span class="id" title="lemma">node_eqb_comm</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H0</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">H0</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<a class="idref" href="Giskard.structures.html#is_member"><span class="id" title="definition">is_member</span></a> <span class="id" title="var">n</span> <a class="idref" href="Giskard.structures.html#participants"><span class="id" title="axiom">participants</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a>) <span class="id" title="tactic">by</span> <span class="id" title="var">now</span> <span class="id" title="tactic">apply</span> <a class="idref" href="Giskard.structures.html#is_member_correct"><span class="id" title="lemma">is_member_correct</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">H2</span>. <span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">reflexivity</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="counting_messages_monotonic" class="idref" href="#counting_messages_monotonic"><span class="id" title="lemma">counting_messages_monotonic</span></a> :<br/>
&nbsp;&nbsp;<span class="id" title="keyword">forall</span> <a id="tr:84" class="idref" href="#tr:84"><span class="id" title="binder">tr</span></a> <a id="i:85" class="idref" href="#i:85"><span class="id" title="binder">i</span></a> <a id="n:86" class="idref" href="#n:86"><span class="id" title="binder">n</span></a> <a id="msg:87" class="idref" href="#msg:87"><span class="id" title="binder">msg</span></a>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Giskard.global.html#protocol_trace"><span class="id" title="definition">protocol_trace</span></a> <a class="idref" href="Giskard.global.html#tr:84"><span class="id" title="variable">tr</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Lists.List.html#In"><span class="id" title="definition">In</span></a> <a class="idref" href="Giskard.global.html#n:86"><span class="id" title="variable">n</span></a> <a class="idref" href="Giskard.structures.html#participants"><span class="id" title="axiom">participants</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Lists.List.html#In"><span class="id" title="definition">In</span></a> <a class="idref" href="Giskard.global.html#msg:87"><span class="id" title="variable">msg</span></a> (<a class="idref" href="Giskard.structures.html#counting_messages"><span class="id" title="projection">counting_messages</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Datatypes.html#fst"><span class="id" title="definition">fst</span></a> (<a class="idref" href="Giskard.global.html#tr:84"><span class="id" title="variable">tr</span></a> <a class="idref" href="Giskard.global.html#i:85"><span class="id" title="variable">i</span></a>) <a class="idref" href="Giskard.global.html#n:86"><span class="id" title="variable">n</span></a>)) <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Lists.List.html#In"><span class="id" title="definition">In</span></a> <a class="idref" href="Giskard.global.html#msg:87"><span class="id" title="variable">msg</span></a> (<a class="idref" href="Giskard.structures.html#counting_messages"><span class="id" title="projection">counting_messages</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Datatypes.html#fst"><span class="id" title="definition">fst</span></a> (<a class="idref" href="Giskard.global.html#tr:84"><span class="id" title="variable">tr</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <a class="idref" href="Giskard.global.html#i:85"><span class="id" title="variable">i</span></a>)) <a class="idref" href="Giskard.global.html#n:86"><span class="id" title="variable">n</span></a>)).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">tr</span> <span class="id" title="var">i</span> <span class="id" title="var">n</span> <span class="id" title="var">msg</span> <span class="id" title="var">Htr</span> <span class="id" title="var">H_part</span> <span class="id" title="var">H_in</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> <span class="id" title="var">Htr</span> <span class="id" title="keyword">as</span> <span class="id" title="var">Htr'</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Htr</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">H_init</span> <span class="id" title="var">H_prot</span>].<br/>
&nbsp;&nbsp;<span class="id" title="var">spec</span> <span class="id" title="var">H_prot</span> <span class="id" title="var">i</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H_prot</span> <span class="id" title="keyword">as</span> [[<span class="id" title="var">n0</span> [<span class="id" title="var">H_in0</span> [<span class="id" title="var">p0</span> [<span class="id" title="var">msg0</span> [<span class="id" title="var">lm0</span> [<span class="id" title="var">H_step</span> <span class="id" title="var">H_deliver</span>]]]]]] | <span class="id" title="var">H_timeout</span>].<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">destruct</span> (<a class="idref" href="Giskard.structures.html#node_eq_dec"><span class="id" title="definition">node_eq_dec</span></a> <span class="id" title="var">n0</span> <span class="id" title="var">n</span>) <span class="id" title="keyword">as</span> [<span class="id" title="var">H_n</span> | <span class="id" title="var">H_not_n</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">rewrite</span> <span class="id" title="var">H_n</span> <span class="id" title="tactic">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">p0</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H_step</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">H_update</span> <span class="id" title="var">H_rest</span>];<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">H_update</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span>; <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">try</span> <span class="id" title="tactic">assumption</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">try</span> (<span class="id" title="tactic">right</span>; <span class="id" title="tactic">assumption</span>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">try</span> (<span class="id" title="tactic">right</span>; <span class="id" title="tactic">right</span>; <span class="id" title="tactic">assumption</span>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">try</span> (<span class="id" title="tactic">rewrite</span> <span class="id" title="var">H_update</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H_view</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H_view</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">lia</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">assert</span> (<span class="id" title="var">H_same_counting</span> : <a class="idref" href="Giskard.structures.html#counting_messages"><span class="id" title="projection">counting_messages</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Datatypes.html#fst"><span class="id" title="definition">fst</span></a> (<span class="id" title="var">tr</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <span class="id" title="var">i</span>)) <span class="id" title="var">n</span>) <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Giskard.structures.html#counting_messages"><span class="id" title="projection">counting_messages</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Datatypes.html#fst"><span class="id" title="definition">fst</span></a> (<span class="id" title="var">tr</span> <span class="id" title="var">i</span>) <span class="id" title="var">n</span>)) <span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> (<a class="idref" href="Giskard.global.html#not_my_problem"><span class="id" title="lemma">not_my_problem</span></a> <span class="id" title="var">Htr'</span> <span class="id" title="var">i</span> <span class="id" title="var">H_part</span> <span class="id" title="var">H_not_n</span> <span class="id" title="var">H_deliver</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">rewrite</span> <span class="id" title="var">H_same_counting</span>.<br/>
&nbsp;&nbsp;- <span class="comment">(*&nbsp;In&nbsp;the&nbsp;timeout&nbsp;case&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">H_same_counting</span> : <a class="idref" href="Giskard.structures.html#counting_messages"><span class="id" title="projection">counting_messages</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Datatypes.html#fst"><span class="id" title="definition">fst</span></a> (<span class="id" title="var">tr</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <span class="id" title="var">i</span>)) <span class="id" title="var">n</span>) <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="Giskard.structures.html#counting_messages"><span class="id" title="projection">counting_messages</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Datatypes.html#fst"><span class="id" title="definition">fst</span></a> (<span class="id" title="var">tr</span> <span class="id" title="var">i</span>) <span class="id" title="var">n</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">rewrite</span> <span class="id" title="var">H_timeout</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<a class="idref" href="Giskard.structures.html#is_member"><span class="id" title="definition">is_member</span></a> <span class="id" title="var">n</span> <a class="idref" href="Giskard.structures.html#participants"><span class="id" title="axiom">participants</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a>) <span class="id" title="tactic">by</span> <span class="id" title="var">now</span> <span class="id" title="tactic">apply</span> <a class="idref" href="Giskard.structures.html#is_member_correct"><span class="id" title="lemma">is_member_correct</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">reflexivity</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">rewrite</span> <span class="id" title="var">H_same_counting</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="counting_message_different_tells_receiver" class="idref" href="#counting_message_different_tells_receiver"><span class="id" title="lemma">counting_message_different_tells_receiver</span></a> :<br/>
&nbsp;&nbsp;<span class="id" title="keyword">forall</span> <a id="tr:88" class="idref" href="#tr:88"><span class="id" title="binder">tr</span></a> <a id="i:89" class="idref" href="#i:89"><span class="id" title="binder">i</span></a> <a id="n:90" class="idref" href="#n:90"><span class="id" title="binder">n</span></a> <a id="p0:91" class="idref" href="#p0:91"><span class="id" title="binder">p0</span></a> <a id="m:92" class="idref" href="#m:92"><span class="id" title="binder">m</span></a> <a id="msg0:93" class="idref" href="#msg0:93"><span class="id" title="binder">msg0</span></a> <a id="lm0:94" class="idref" href="#lm0:94"><span class="id" title="binder">lm0</span></a>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Giskard.global.html#protocol_trace"><span class="id" title="definition">protocol_trace</span></a> <a class="idref" href="Giskard.global.html#tr:88"><span class="id" title="variable">tr</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Lists.List.html#In"><span class="id" title="definition">In</span></a> <a class="idref" href="Giskard.global.html#n:90"><span class="id" title="variable">n</span></a> <a class="idref" href="Giskard.structures.html#participants"><span class="id" title="axiom">participants</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Giskard.structures.html#counting_messages"><span class="id" title="projection">counting_messages</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Datatypes.html#fst"><span class="id" title="definition">fst</span></a> (<a class="idref" href="Giskard.global.html#tr:88"><span class="id" title="variable">tr</span></a> <a class="idref" href="Giskard.global.html#i:89"><span class="id" title="variable">i</span></a>) <a class="idref" href="Giskard.global.html#n:90"><span class="id" title="variable">n</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'&lt;&gt;'_x"><span class="id" title="notation">&lt;&gt;</span></a> <a class="idref" href="Giskard.structures.html#counting_messages"><span class="id" title="projection">counting_messages</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Datatypes.html#fst"><span class="id" title="definition">fst</span></a> (<a class="idref" href="Giskard.global.html#tr:88"><span class="id" title="variable">tr</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <a class="idref" href="Giskard.global.html#i:89"><span class="id" title="variable">i</span></a>)) <a class="idref" href="Giskard.global.html#n:90"><span class="id" title="variable">n</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Giskard.local.html#get_transition"><span class="id" title="definition">get_transition</span></a> <a class="idref" href="Giskard.global.html#p0:91"><span class="id" title="variable">p0</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Datatypes.html#fst"><span class="id" title="definition">fst</span></a> (<a class="idref" href="Giskard.global.html#tr:88"><span class="id" title="variable">tr</span></a> <a class="idref" href="Giskard.global.html#i:89"><span class="id" title="variable">i</span></a>) <a class="idref" href="Giskard.global.html#m:92"><span class="id" title="variable">m</span></a>) <a class="idref" href="Giskard.global.html#msg0:93"><span class="id" title="variable">msg0</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Datatypes.html#fst"><span class="id" title="definition">fst</span></a> (<a class="idref" href="Giskard.global.html#tr:88"><span class="id" title="variable">tr</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <a class="idref" href="Giskard.global.html#i:89"><span class="id" title="variable">i</span></a>)) <a class="idref" href="Giskard.global.html#m:92"><span class="id" title="variable">m</span></a>) <a class="idref" href="Giskard.global.html#lm0:94"><span class="id" title="variable">lm0</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Giskard.global.html#tr:88"><span class="id" title="variable">tr</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <a class="idref" href="Giskard.global.html#i:89"><span class="id" title="variable">i</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="Giskard.global.html#broadcast_messages"><span class="id" title="definition">broadcast_messages</span></a> (<a class="idref" href="Giskard.global.html#tr:88"><span class="id" title="variable">tr</span></a> <a class="idref" href="Giskard.global.html#i:89"><span class="id" title="variable">i</span></a>) (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Datatypes.html#fst"><span class="id" title="definition">fst</span></a> (<a class="idref" href="Giskard.global.html#tr:88"><span class="id" title="variable">tr</span></a> <a class="idref" href="Giskard.global.html#i:89"><span class="id" title="variable">i</span></a>) <a class="idref" href="Giskard.global.html#m:92"><span class="id" title="variable">m</span></a>) (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Datatypes.html#fst"><span class="id" title="definition">fst</span></a> (<a class="idref" href="Giskard.global.html#tr:88"><span class="id" title="variable">tr</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <a class="idref" href="Giskard.global.html#i:89"><span class="id" title="variable">i</span></a>)) <a class="idref" href="Giskard.global.html#m:92"><span class="id" title="variable">m</span></a>) <a class="idref" href="Giskard.global.html#lm0:94"><span class="id" title="variable">lm0</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Giskard.global.html#m:92"><span class="id" title="variable">m</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="Giskard.global.html#n:90"><span class="id" title="variable">n</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">tr</span> <span class="id" title="var">i</span> <span class="id" title="var">n</span> <span class="id" title="var">p0</span> <span class="id" title="var">m</span> <span class="id" title="var">msg0</span> <span class="id" title="var">lm0</span> <span class="id" title="var">Htr</span> <span class="id" title="var">H_part</span> <span class="id" title="var">H_diff</span> <span class="id" title="var">H_step</span> <span class="id" title="var">H_deliver</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> <span class="id" title="var">Htr</span> <span class="id" title="keyword">as</span> <span class="id" title="var">Htr'</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Htr</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">H_init</span> <span class="id" title="var">H_prot</span>].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="Giskard.structures.html#node_eq_dec"><span class="id" title="definition">node_eq_dec</span></a> <span class="id" title="var">m</span> <span class="id" title="var">n</span>) <span class="id" title="keyword">as</span> [<span class="id" title="var">H_true</span> | <span class="id" title="var">H_false</span>].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="Giskard.structures.html#node_eqb_no"><span class="id" title="lemma">node_eqb_no</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H_false</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">H_same_counting</span> : <a class="idref" href="Giskard.structures.html#counting_messages"><span class="id" title="projection">counting_messages</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Datatypes.html#fst"><span class="id" title="definition">fst</span></a> (<span class="id" title="var">tr</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <span class="id" title="var">i</span>)) <span class="id" title="var">n</span>) <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="Giskard.structures.html#counting_messages"><span class="id" title="projection">counting_messages</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Datatypes.html#fst"><span class="id" title="definition">fst</span></a> (<span class="id" title="var">tr</span> <span class="id" title="var">i</span>) <span class="id" title="var">n</span>)).<br/>
&nbsp;&nbsp;{ <span class="id" title="tactic">rewrite</span> <span class="id" title="var">H_deliver</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="Giskard.global.html#broadcast_messages"><span class="id" title="definition">broadcast_messages</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<a class="idref" href="Giskard.structures.html#is_member"><span class="id" title="definition">is_member</span></a> <span class="id" title="var">n</span> <a class="idref" href="Giskard.structures.html#participants"><span class="id" title="axiom">participants</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a>) <span class="id" title="tactic">by</span> <span class="id" title="var">now</span> <span class="id" title="tactic">apply</span> <a class="idref" href="Giskard.structures.html#is_member_correct"><span class="id" title="lemma">is_member_correct</span></a>. <span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<a class="idref" href="Giskard.global.html#protocol_trace_state_sane"><span class="id" title="lemma">protocol_trace_state_sane</span></a> <span class="id" title="var">Htr'</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="Giskard.structures.html#node_eqb_comm"><span class="id" title="lemma">node_eqb_comm</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H_false</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">H_false</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">reflexivity</span>. }<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">H_same_counting</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H_diff</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">contradiction</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="view_different_tells_receiver" class="idref" href="#view_different_tells_receiver"><span class="id" title="lemma">view_different_tells_receiver</span></a> :<br/>
&nbsp;&nbsp;<span class="id" title="keyword">forall</span> <a id="tr:95" class="idref" href="#tr:95"><span class="id" title="binder">tr</span></a> <a id="i:96" class="idref" href="#i:96"><span class="id" title="binder">i</span></a> <a id="n:97" class="idref" href="#n:97"><span class="id" title="binder">n</span></a> <a id="p0:98" class="idref" href="#p0:98"><span class="id" title="binder">p0</span></a> <a id="m:99" class="idref" href="#m:99"><span class="id" title="binder">m</span></a> <a id="msg0:100" class="idref" href="#msg0:100"><span class="id" title="binder">msg0</span></a> <a id="lm0:101" class="idref" href="#lm0:101"><span class="id" title="binder">lm0</span></a>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Giskard.global.html#protocol_trace"><span class="id" title="definition">protocol_trace</span></a> <a class="idref" href="Giskard.global.html#tr:95"><span class="id" title="variable">tr</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Lists.List.html#In"><span class="id" title="definition">In</span></a> <a class="idref" href="Giskard.global.html#n:97"><span class="id" title="variable">n</span></a> <a class="idref" href="Giskard.structures.html#participants"><span class="id" title="axiom">participants</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Giskard.structures.html#node_view"><span class="id" title="projection">node_view</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Datatypes.html#fst"><span class="id" title="definition">fst</span></a> (<a class="idref" href="Giskard.global.html#tr:95"><span class="id" title="variable">tr</span></a> <a class="idref" href="Giskard.global.html#i:96"><span class="id" title="variable">i</span></a>) <a class="idref" href="Giskard.global.html#n:97"><span class="id" title="variable">n</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'&lt;&gt;'_x"><span class="id" title="notation">&lt;&gt;</span></a> <a class="idref" href="Giskard.structures.html#node_view"><span class="id" title="projection">node_view</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Datatypes.html#fst"><span class="id" title="definition">fst</span></a> (<a class="idref" href="Giskard.global.html#tr:95"><span class="id" title="variable">tr</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <a class="idref" href="Giskard.global.html#i:96"><span class="id" title="variable">i</span></a>)) <a class="idref" href="Giskard.global.html#n:97"><span class="id" title="variable">n</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Giskard.local.html#get_transition"><span class="id" title="definition">get_transition</span></a> <a class="idref" href="Giskard.global.html#p0:98"><span class="id" title="variable">p0</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Datatypes.html#fst"><span class="id" title="definition">fst</span></a> (<a class="idref" href="Giskard.global.html#tr:95"><span class="id" title="variable">tr</span></a> <a class="idref" href="Giskard.global.html#i:96"><span class="id" title="variable">i</span></a>) <a class="idref" href="Giskard.global.html#m:99"><span class="id" title="variable">m</span></a>) <a class="idref" href="Giskard.global.html#msg0:100"><span class="id" title="variable">msg0</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Datatypes.html#fst"><span class="id" title="definition">fst</span></a> (<a class="idref" href="Giskard.global.html#tr:95"><span class="id" title="variable">tr</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <a class="idref" href="Giskard.global.html#i:96"><span class="id" title="variable">i</span></a>)) <a class="idref" href="Giskard.global.html#m:99"><span class="id" title="variable">m</span></a>) <a class="idref" href="Giskard.global.html#lm0:101"><span class="id" title="variable">lm0</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Giskard.global.html#tr:95"><span class="id" title="variable">tr</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <a class="idref" href="Giskard.global.html#i:96"><span class="id" title="variable">i</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="Giskard.global.html#broadcast_messages"><span class="id" title="definition">broadcast_messages</span></a> (<a class="idref" href="Giskard.global.html#tr:95"><span class="id" title="variable">tr</span></a> <a class="idref" href="Giskard.global.html#i:96"><span class="id" title="variable">i</span></a>) (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Datatypes.html#fst"><span class="id" title="definition">fst</span></a> (<a class="idref" href="Giskard.global.html#tr:95"><span class="id" title="variable">tr</span></a> <a class="idref" href="Giskard.global.html#i:96"><span class="id" title="variable">i</span></a>) <a class="idref" href="Giskard.global.html#m:99"><span class="id" title="variable">m</span></a>) (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Datatypes.html#fst"><span class="id" title="definition">fst</span></a> (<a class="idref" href="Giskard.global.html#tr:95"><span class="id" title="variable">tr</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <a class="idref" href="Giskard.global.html#i:96"><span class="id" title="variable">i</span></a>)) <a class="idref" href="Giskard.global.html#m:99"><span class="id" title="variable">m</span></a>) <a class="idref" href="Giskard.global.html#lm0:101"><span class="id" title="variable">lm0</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Giskard.global.html#m:99"><span class="id" title="variable">m</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="Giskard.global.html#n:97"><span class="id" title="variable">n</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">tr</span> <span class="id" title="var">i</span> <span class="id" title="var">n</span> <span class="id" title="var">p0</span> <span class="id" title="var">m</span> <span class="id" title="var">msg0</span> <span class="id" title="var">lm0</span> <span class="id" title="var">Htr</span> <span class="id" title="var">H_part</span> <span class="id" title="var">H_diff</span> <span class="id" title="var">H_step</span> <span class="id" title="var">H_deliver</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> <span class="id" title="var">Htr</span> <span class="id" title="keyword">as</span> <span class="id" title="var">Htr'</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Htr</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">H_init</span> <span class="id" title="var">H_prot</span>].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="Giskard.structures.html#node_eq_dec"><span class="id" title="definition">node_eq_dec</span></a> <span class="id" title="var">m</span> <span class="id" title="var">n</span>) <span class="id" title="keyword">as</span> [<span class="id" title="var">H_true</span> | <span class="id" title="var">H_false</span>].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="Giskard.structures.html#node_eqb_no"><span class="id" title="lemma">node_eqb_no</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H_false</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">H_same_view</span> : <a class="idref" href="Giskard.structures.html#node_view"><span class="id" title="projection">node_view</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Datatypes.html#fst"><span class="id" title="definition">fst</span></a> (<span class="id" title="var">tr</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <span class="id" title="var">i</span>)) <span class="id" title="var">n</span>) <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="Giskard.structures.html#node_view"><span class="id" title="projection">node_view</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Datatypes.html#fst"><span class="id" title="definition">fst</span></a> (<span class="id" title="var">tr</span> <span class="id" title="var">i</span>) <span class="id" title="var">n</span>)).<br/>
&nbsp;&nbsp;{ <span class="id" title="tactic">rewrite</span> <span class="id" title="var">H_deliver</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="Giskard.global.html#broadcast_messages"><span class="id" title="definition">broadcast_messages</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<a class="idref" href="Giskard.structures.html#is_member"><span class="id" title="definition">is_member</span></a> <span class="id" title="var">n</span> <a class="idref" href="Giskard.structures.html#participants"><span class="id" title="axiom">participants</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a>) <span class="id" title="tactic">by</span> <span class="id" title="var">now</span> <span class="id" title="tactic">apply</span> <a class="idref" href="Giskard.structures.html#is_member_correct"><span class="id" title="lemma">is_member_correct</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<a class="idref" href="Giskard.global.html#protocol_trace_state_sane"><span class="id" title="lemma">protocol_trace_state_sane</span></a> <span class="id" title="var">Htr'</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="Giskard.structures.html#node_eqb_comm"><span class="id" title="lemma">node_eqb_comm</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H_false</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">H_false</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">reflexivity</span>. }<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">H_same_view</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H_diff</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">contradiction</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="counting_message_change_view_change" class="idref" href="#counting_message_change_view_change"><span class="id" title="lemma">counting_message_change_view_change</span></a> :<br/>
&nbsp;&nbsp;<span class="id" title="keyword">forall</span> <a id="tr:102" class="idref" href="#tr:102"><span class="id" title="binder">tr</span></a> <a id="i:103" class="idref" href="#i:103"><span class="id" title="binder">i</span></a> <a id="n:104" class="idref" href="#n:104"><span class="id" title="binder">n</span></a> <a id="msg:105" class="idref" href="#msg:105"><span class="id" title="binder">msg</span></a>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Giskard.global.html#protocol_trace"><span class="id" title="definition">protocol_trace</span></a> <a class="idref" href="Giskard.global.html#tr:102"><span class="id" title="variable">tr</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Lists.List.html#In"><span class="id" title="definition">In</span></a> <a class="idref" href="Giskard.global.html#n:104"><span class="id" title="variable">n</span></a> <a class="idref" href="Giskard.structures.html#participants"><span class="id" title="axiom">participants</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Lists.List.html#In"><span class="id" title="definition">In</span></a> <a class="idref" href="Giskard.global.html#msg:105"><span class="id" title="variable">msg</span></a> (<a class="idref" href="Giskard.structures.html#counting_messages"><span class="id" title="projection">counting_messages</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Datatypes.html#fst"><span class="id" title="definition">fst</span></a> (<a class="idref" href="Giskard.global.html#tr:102"><span class="id" title="variable">tr</span></a> <a class="idref" href="Giskard.global.html#i:103"><span class="id" title="variable">i</span></a>) <a class="idref" href="Giskard.global.html#n:104"><span class="id" title="variable">n</span></a>)) <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Logic.html#63a68285c81db8f9bc456233bb9ed181"><span class="id" title="notation">~</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Lists.List.html#In"><span class="id" title="definition">In</span></a> <a class="idref" href="Giskard.global.html#msg:105"><span class="id" title="variable">msg</span></a> (<a class="idref" href="Giskard.structures.html#counting_messages"><span class="id" title="projection">counting_messages</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Datatypes.html#fst"><span class="id" title="definition">fst</span></a> (<a class="idref" href="Giskard.global.html#tr:102"><span class="id" title="variable">tr</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <a class="idref" href="Giskard.global.html#i:103"><span class="id" title="variable">i</span></a>)) <a class="idref" href="Giskard.global.html#n:104"><span class="id" title="variable">n</span></a>)) <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Giskard.structures.html#node_view"><span class="id" title="projection">node_view</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Datatypes.html#fst"><span class="id" title="definition">fst</span></a> (<a class="idref" href="Giskard.global.html#tr:102"><span class="id" title="variable">tr</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <a class="idref" href="Giskard.global.html#i:103"><span class="id" title="variable">i</span></a>)) <a class="idref" href="Giskard.global.html#n:104"><span class="id" title="variable">n</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> (<a class="idref" href="Giskard.structures.html#node_view"><span class="id" title="projection">node_view</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Datatypes.html#fst"><span class="id" title="definition">fst</span></a> (<a class="idref" href="Giskard.global.html#tr:102"><span class="id" title="variable">tr</span></a> <a class="idref" href="Giskard.global.html#i:103"><span class="id" title="variable">i</span></a>) <a class="idref" href="Giskard.global.html#n:104"><span class="id" title="variable">n</span></a>)).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">tr</span> <span class="id" title="var">i</span> <span class="id" title="var">n</span> <span class="id" title="var">msg</span> [<span class="id" title="var">H_init</span> <span class="id" title="var">H_prot</span>] <span class="id" title="var">H_part</span> <span class="id" title="var">H_in</span> <span class="id" title="var">H_not_in</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">H_prot_copy</span> := <span class="id" title="var">H_prot</span>).<br/>
&nbsp;&nbsp;<span class="id" title="var">spec</span> <span class="id" title="var">H_prot</span> <span class="id" title="var">i</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H_prot</span> <span class="id" title="keyword">as</span> [[<span class="id" title="var">n0</span> [<span class="id" title="var">H_in0</span> [<span class="id" title="var">p0</span> [<span class="id" title="var">msg0</span> [<span class="id" title="var">lm0</span> [<span class="id" title="var">H_step</span> <span class="id" title="var">H_deliver</span>]]]]]] | <span class="id" title="var">H_timeout</span>].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">H_useful</span> := <a class="idref" href="Giskard.global.html#counting_message_different_tells_receiver"><span class="id" title="lemma">counting_message_different_tells_receiver</span></a>).<br/>
&nbsp;&nbsp;<span class="id" title="var">spec</span> <span class="id" title="var">H_useful</span> <span class="id" title="var">tr</span> <span class="id" title="var">i</span> <span class="id" title="var">n</span> <span class="id" title="var">p0</span> <span class="id" title="var">n0</span> <span class="id" title="var">msg0</span> <span class="id" title="var">lm0</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">spec</span> <span class="id" title="var">H_useful</span>. <span class="id" title="tactic">split</span>; <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">spec</span> <span class="id" title="var">H_useful</span> <span class="id" title="var">H_part</span>. <span class="id" title="var">spec</span> <span class="id" title="var">H_useful</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Lists.List.html#list_eq_dec"><span class="id" title="lemma">list_eq_dec</span></a> <a class="idref" href="Giskard.structures.html#message_eq_dec"><span class="id" title="definition">message_eq_dec</span></a> (<a class="idref" href="Giskard.structures.html#counting_messages"><span class="id" title="projection">counting_messages</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Datatypes.html#fst"><span class="id" title="definition">fst</span></a> (<span class="id" title="var">tr</span> <span class="id" title="var">i</span>) <span class="id" title="var">n</span>)) (<a class="idref" href="Giskard.structures.html#counting_messages"><span class="id" title="projection">counting_messages</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Datatypes.html#fst"><span class="id" title="definition">fst</span></a> (<span class="id" title="var">tr</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <span class="id" title="var">i</span>)) <span class="id" title="var">n</span>))).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">e</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H_in</span>. <span class="id" title="var">contradiction</span>. <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">spec</span> <span class="id" title="var">H_useful</span> <span class="id" title="var">H_step</span> <span class="id" title="var">H_deliver</span>. <span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">H_useful</span> <span class="id" title="tactic">in</span> *.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">p0</span>; <span class="id" title="tactic">destruct</span> <span class="id" title="var">H_step</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">H_update</span> <span class="id" title="var">_</span>];<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">H_update</span>; <span class="id" title="tactic">simpl</span>; <span class="id" title="tactic">try</span> <span class="id" title="tactic">reflexivity</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">try</span> (<span class="id" title="tactic">rewrite</span> <span class="id" title="var">H_update</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H_not_in</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H_not_in</span>; <span class="id" title="tactic">try</span> <span class="id" title="tactic">tauto</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">H_timeout</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H_not_in</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">H_member</span> : <a class="idref" href="Giskard.structures.html#is_member"><span class="id" title="definition">is_member</span></a> <span class="id" title="var">n</span> <a class="idref" href="Giskard.structures.html#participants"><span class="id" title="axiom">participants</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a>) <span class="id" title="tactic">by</span> <span class="id" title="var">now</span> <span class="id" title="tactic">apply</span> <a class="idref" href="Giskard.structures.html#is_member_correct"><span class="id" title="lemma">is_member_correct</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H_not_in</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">H_member</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H_not_in</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H_not_in</span>. <span class="id" title="tactic">tauto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="processed_means_past_received" class="idref" href="#processed_means_past_received"><span class="id" title="lemma">processed_means_past_received</span></a> :<br/>
&nbsp;&nbsp;<span class="id" title="keyword">forall</span> (<a id="tr:106" class="idref" href="#tr:106"><span class="id" title="binder">tr</span></a> : <a class="idref" href="Giskard.global.html#GTrace"><span class="id" title="definition">GTrace</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Giskard.global.html#protocol_trace"><span class="id" title="definition">protocol_trace</span></a> <a class="idref" href="Giskard.global.html#tr:106"><span class="id" title="variable">tr</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">forall</span> (<a id="i:107" class="idref" href="#i:107"><span class="id" title="binder">i</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>) (<a id="n:108" class="idref" href="#n:108"><span class="id" title="binder">n</span></a> : <a class="idref" href="Giskard.structures.html#node"><span class="id" title="axiom">node</span></a>) (<a id="msg:109" class="idref" href="#msg:109"><span class="id" title="binder">msg</span></a> : <a class="idref" href="Giskard.structures.html#message"><span class="id" title="record">message</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Lists.List.html#In"><span class="id" title="definition">In</span></a> <a class="idref" href="Giskard.global.html#n:108"><span class="id" title="variable">n</span></a> <a class="idref" href="Giskard.structures.html#participants"><span class="id" title="axiom">participants</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Lists.List.html#In"><span class="id" title="definition">In</span></a> <a class="idref" href="Giskard.global.html#msg:109"><span class="id" title="variable">msg</span></a> (<a class="idref" href="Giskard.structures.html#counting_messages"><span class="id" title="projection">counting_messages</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Datatypes.html#fst"><span class="id" title="definition">fst</span></a> (<a class="idref" href="Giskard.global.html#tr:106"><span class="id" title="variable">tr</span></a> <a class="idref" href="Giskard.global.html#i:107"><span class="id" title="variable">i</span></a>) <a class="idref" href="Giskard.global.html#n:108"><span class="id" title="variable">n</span></a>)) <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">exists</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">(</span></a><a id="i_past:110" class="idref" href="#i_past:110"><span class="id" title="binder">i_past</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">),</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Giskard.global.html#i_past:110"><span class="id" title="variable">i_past</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Peano.html#::nat_scope:x_'&lt;'_x"><span class="id" title="notation">&lt;</span></a> <a class="idref" href="Giskard.global.html#i:107"><span class="id" title="variable">i</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a> <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Lists.List.html#In"><span class="id" title="definition">In</span></a> <a class="idref" href="Giskard.global.html#msg:109"><span class="id" title="variable">msg</span></a> (<a class="idref" href="Giskard.structures.html#in_messages"><span class="id" title="projection">in_messages</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Datatypes.html#fst"><span class="id" title="definition">fst</span></a> (<a class="idref" href="Giskard.global.html#tr:106"><span class="id" title="variable">tr</span></a> <a class="idref" href="Giskard.global.html#i_past:110"><span class="id" title="variable">i_past</span></a>) <a class="idref" href="Giskard.global.html#n:108"><span class="id" title="variable">n</span></a>)).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">tr</span> <span class="id" title="var">H_prot</span> <span class="id" title="var">i</span> <span class="id" title="var">n</span> <span class="id" title="var">msg</span> <span class="id" title="var">H_part</span> <span class="id" title="var">H_in</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">i</span> <span class="id" title="keyword">as</span> [|<span class="id" title="var">i</span> <span class="id" title="var">IH_prot</span>].<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">destruct</span> <span class="id" title="var">H_prot</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">H_init</span> <span class="id" title="var">_</span>];<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">H_init</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H_in</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">H_in</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">destruct</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Lists.List.html#In_dec"><span class="id" title="abbreviation">In_dec</span></a> <a class="idref" href="Giskard.structures.html#message_eq_dec"><span class="id" title="definition">message_eq_dec</span></a> <span class="id" title="var">msg</span> (<a class="idref" href="Giskard.structures.html#counting_messages"><span class="id" title="projection">counting_messages</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Datatypes.html#fst"><span class="id" title="definition">fst</span></a> (<span class="id" title="var">tr</span> <span class="id" title="var">i</span>) <span class="id" title="var">n</span>))) <span class="id" title="keyword">as</span> [<span class="id" title="var">H_old</span> | <span class="id" title="var">H_new</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="var">spec</span> <span class="id" title="var">IH_prot</span> <span class="id" title="var">H_old</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">IH_prot</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">i_past</span> [<span class="id" title="var">H_lt</span> <span class="id" title="var">H_goal</span>]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exists</span> <span class="id" title="var">i_past</span>; <span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">lia</span>. <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">clear</span> <span class="id" title="var">IH_prot</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">H_prot_copy</span> := <span class="id" title="var">H_prot</span>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H_prot</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">H_init</span> <span class="id" title="var">H_prot</span>];<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">spec</span> <span class="id" title="var">H_prot</span> <span class="id" title="var">i</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H_prot</span> <span class="id" title="keyword">as</span> [[<span class="id" title="var">n0</span> [<span class="id" title="var">H_in0</span> [<span class="id" title="var">p0</span> [<span class="id" title="var">msg0</span> [<span class="id" title="var">lm0</span> [<span class="id" title="var">H_step</span> <span class="id" title="var">H_deliver</span>]]]]]] | <span class="id" title="var">H_timeout</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">assert</span> (<span class="id" title="var">H_subst</span> := <a class="idref" href="Giskard.global.html#counting_messages_change_tells_receiver"><span class="id" title="lemma">counting_messages_change_tells_receiver</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">H_prot_copy</span> <span class="id" title="var">H_step</span> <span class="id" title="var">H_deliver</span> <span class="id" title="var">H_part</span> <span class="id" title="var">H_new</span> <span class="id" title="var">H_in</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">H_subst</span> <span class="id" title="tactic">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;Now&nbsp;that&nbsp;we've&nbsp;established&nbsp;n&nbsp;made&nbsp;the&nbsp;transition&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">H_step_copy</span> := <span class="id" title="var">H_step</span>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">p0</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H_step</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">H_update</span> [<span class="id" title="var">H_out</span> <span class="id" title="var">H_rest</span>]];<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">H_update</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H_in</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;For&nbsp;cases&nbsp;that&nbsp;don't&nbsp;process&nbsp;messages&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">try</span> <span class="id" title="var">contradiction</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;9&nbsp;goals&nbsp;left&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">try</span> (<span class="id" title="tactic">exists</span> <span class="id" title="var">i</span>; <span class="id" title="tactic">split</span>; <span class="id" title="tactic">try</span> <span class="id" title="var">lia</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H_in</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H_in</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">H_piggyback</span> | <span class="id" title="var">H_contra</span>];<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[<span class="id" title="tactic">subst</span>; <span class="id" title="tactic">tauto</span> | <span class="id" title="var">contradiction</span>]);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;2&nbsp;goals&nbsp;left!&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">try</span> (<span class="id" title="tactic">exists</span> <span class="id" title="var">i</span>; <span class="id" title="tactic">split</span>; <span class="id" title="tactic">try</span> <span class="id" title="var">lia</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H_in</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H_in</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">H_self</span> | [<span class="id" title="var">H_piggyback</span> | <span class="id" title="var">H_contra</span>]];<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[<span class="id" title="tactic">rewrite</span> <span class="id" title="var">H_self</span> <span class="id" title="tactic">in</span> *; <span class="id" title="tactic">tauto</span> | <span class="id" title="tactic">subst</span>; <span class="id" title="tactic">tauto</span> | <span class="id" title="var">contradiction</span>]).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">rewrite</span> <span class="id" title="var">H_timeout</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H_in</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H_in</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="Giskard.structures.html#is_member_correct"><span class="id" title="lemma">is_member_correct</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H_part</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">H_part</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H_in</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H_in</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">contradiction</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="delivered_means_sent_global" class="idref" href="#delivered_means_sent_global"><span class="id" title="lemma">delivered_means_sent_global</span></a> :<br/>
&nbsp;&nbsp;<span class="id" title="keyword">forall</span> (<a id="tr:111" class="idref" href="#tr:111"><span class="id" title="binder">tr</span></a> : <a class="idref" href="Giskard.global.html#GTrace"><span class="id" title="definition">GTrace</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Giskard.global.html#protocol_trace"><span class="id" title="definition">protocol_trace</span></a> <a class="idref" href="Giskard.global.html#tr:111"><span class="id" title="variable">tr</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">forall</span> (<a id="i:112" class="idref" href="#i:112"><span class="id" title="binder">i</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>) (<a id="n:113" class="idref" href="#n:113"><span class="id" title="binder">n</span></a> : <a class="idref" href="Giskard.structures.html#node"><span class="id" title="axiom">node</span></a>) (<a id="msg:114" class="idref" href="#msg:114"><span class="id" title="binder">msg</span></a> : <a class="idref" href="Giskard.structures.html#message"><span class="id" title="record">message</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Lists.List.html#In"><span class="id" title="definition">In</span></a> <a class="idref" href="Giskard.global.html#n:113"><span class="id" title="variable">n</span></a> <a class="idref" href="Giskard.structures.html#participants"><span class="id" title="axiom">participants</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Lists.List.html#In"><span class="id" title="definition">In</span></a> <a class="idref" href="Giskard.global.html#msg:114"><span class="id" title="variable">msg</span></a> (<a class="idref" href="Giskard.structures.html#in_messages"><span class="id" title="projection">in_messages</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Datatypes.html#fst"><span class="id" title="definition">fst</span></a> (<a class="idref" href="Giskard.global.html#tr:111"><span class="id" title="variable">tr</span></a> <a class="idref" href="Giskard.global.html#i:112"><span class="id" title="variable">i</span></a>) <a class="idref" href="Giskard.global.html#n:113"><span class="id" title="variable">n</span></a>)) <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Lists.List.html#In"><span class="id" title="definition">In</span></a> <a class="idref" href="Giskard.global.html#msg:114"><span class="id" title="variable">msg</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Datatypes.html#snd"><span class="id" title="definition">snd</span></a> (<a class="idref" href="Giskard.global.html#tr:111"><span class="id" title="variable">tr</span></a> <a class="idref" href="Giskard.global.html#i:112"><span class="id" title="variable">i</span></a>)).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">tr</span> <span class="id" title="var">H_prot</span> <span class="id" title="var">i</span> <span class="id" title="var">n</span> <span class="id" title="var">msg</span> <span class="id" title="var">H_part</span> <span class="id" title="var">H_in</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">i</span> <span class="id" title="keyword">as</span> [|<span class="id" title="var">i</span> <span class="id" title="var">IH_prot</span>].<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">destruct</span> <span class="id" title="var">H_prot</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">H_init</span> <span class="id" title="var">_</span>];<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">H_init</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H_in</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">H_in</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">destruct</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Lists.List.html#In_dec"><span class="id" title="abbreviation">In_dec</span></a> <a class="idref" href="Giskard.structures.html#message_eq_dec"><span class="id" title="definition">message_eq_dec</span></a> <span class="id" title="var">msg</span> (<a class="idref" href="Giskard.structures.html#in_messages"><span class="id" title="projection">in_messages</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Datatypes.html#fst"><span class="id" title="definition">fst</span></a> (<span class="id" title="var">tr</span> <span class="id" title="var">i</span>) <span class="id" title="var">n</span>))) <span class="id" title="keyword">as</span> [<span class="id" title="var">H_old</span> | <span class="id" title="var">H_new</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="var">spec</span> <span class="id" title="var">IH_prot</span> <span class="id" title="var">H_old</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">apply</span> <a class="idref" href="Giskard.global.html#global_messages_monotonic_step"><span class="id" title="lemma">global_messages_monotonic_step</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">clear</span> <span class="id" title="var">IH_prot</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">H_prot_copy</span> := <span class="id" title="var">H_prot</span>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H_prot</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">H_init</span> <span class="id" title="var">H_prot</span>];<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">spec</span> <span class="id" title="var">H_prot</span> <span class="id" title="var">i</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H_prot</span> <span class="id" title="keyword">as</span> [[<span class="id" title="var">n0</span> [<span class="id" title="var">H_in0</span> [<span class="id" title="var">p0</span> [<span class="id" title="var">msg0</span> [<span class="id" title="var">lm0</span> [<span class="id" title="var">H_step</span> <span class="id" title="var">H_deliver</span>]]]]]] | <span class="id" title="var">H_timeout</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="comment">(*&nbsp;In&nbsp;the&nbsp;normal&nbsp;transition&nbsp;case&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">H_deliver</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="Giskard.structures.html#node_eq_dec"><span class="id" title="definition">node_eq_dec</span></a> <span class="id" title="var">n</span> <span class="id" title="var">n0</span>) <span class="id" title="keyword">as</span> [<span class="id" title="var">H_eq</span> | <span class="id" title="var">H_neq</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;** <span class="comment">(*&nbsp;If&nbsp;n&nbsp;made&nbsp;the&nbsp;transition&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">H_eq</span> <span class="id" title="tactic">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;There&nbsp;cannot&nbsp;be&nbsp;a&nbsp;message&nbsp;that&nbsp;is&nbsp;added&nbsp;after&nbsp;n&nbsp;consumes&nbsp;a&nbsp;message&nbsp;by<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;making&nbsp;a&nbsp;transition,&nbsp;so&nbsp;we&nbsp;find&nbsp;a&nbsp;contradiction&nbsp;between&nbsp;H_in&nbsp;and&nbsp;H_new&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">p0</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H_step</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">H_update</span> <span class="id" title="var">_</span>];<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">H_update</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H_in</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> *;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">try</span> <span class="id" title="var">contradiction</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">try</span> (<span class="id" title="tactic">repeat</span> <span class="id" title="tactic">apply</span> <a class="idref" href="Giskard.lib.html#remove_subset"><span class="id" title="lemma">remove_subset</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H_in</span>; <span class="id" title="var">contradiction</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;** <span class="comment">(*&nbsp;If&nbsp;n&nbsp;didn't&nbsp;make&nbsp;the&nbsp;transition&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">H_deliver</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H_in</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H_in</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<a class="idref" href="Giskard.global.html#protocol_trace_state_sane"><span class="id" title="lemma">protocol_trace_state_sane</span></a> <span class="id" title="var">H_prot_copy</span>) <span class="id" title="tactic">in</span> <span class="id" title="var">H_in</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="Giskard.structures.html#is_member_correct"><span class="id" title="lemma">is_member_correct</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H_part</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">H_part</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H_in</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="Giskard.structures.html#node_eqb_no"><span class="id" title="lemma">node_eqb_no</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H_neq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">H_neq</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H_in</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H_in</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Lists.List.html#in_app_iff"><span class="id" title="lemma">in_app_iff</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H_in</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H_in</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">H_goal</span> | <span class="id" title="var">H_contra</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Lists.List.html#in_app_iff"><span class="id" title="lemma">in_app_iff</span></a>; <span class="id" title="tactic">tauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">contradiction</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">rewrite</span> <span class="id" title="var">H_timeout</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H_in</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H_in</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="Giskard.structures.html#is_member_correct"><span class="id" title="lemma">is_member_correct</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H_part</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">H_part</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H_in</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H_in</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">contradiction</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="processed_means_sent_global" class="idref" href="#processed_means_sent_global"><span class="id" title="lemma">processed_means_sent_global</span></a> :<br/>
&nbsp;&nbsp;<span class="id" title="keyword">forall</span> (<a id="tr:115" class="idref" href="#tr:115"><span class="id" title="binder">tr</span></a> : <a class="idref" href="Giskard.global.html#GTrace"><span class="id" title="definition">GTrace</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Giskard.global.html#protocol_trace"><span class="id" title="definition">protocol_trace</span></a> <a class="idref" href="Giskard.global.html#tr:115"><span class="id" title="variable">tr</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">forall</span> (<a id="i:116" class="idref" href="#i:116"><span class="id" title="binder">i</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>) (<a id="n:117" class="idref" href="#n:117"><span class="id" title="binder">n</span></a> : <a class="idref" href="Giskard.structures.html#node"><span class="id" title="axiom">node</span></a>) (<a id="msg:118" class="idref" href="#msg:118"><span class="id" title="binder">msg</span></a> : <a class="idref" href="Giskard.structures.html#message"><span class="id" title="record">message</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Lists.List.html#In"><span class="id" title="definition">In</span></a> <a class="idref" href="Giskard.global.html#n:117"><span class="id" title="variable">n</span></a> <a class="idref" href="Giskard.structures.html#participants"><span class="id" title="axiom">participants</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Lists.List.html#In"><span class="id" title="definition">In</span></a> <a class="idref" href="Giskard.global.html#msg:118"><span class="id" title="variable">msg</span></a> (<a class="idref" href="Giskard.structures.html#counting_messages"><span class="id" title="projection">counting_messages</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Datatypes.html#fst"><span class="id" title="definition">fst</span></a> (<a class="idref" href="Giskard.global.html#tr:115"><span class="id" title="variable">tr</span></a> <a class="idref" href="Giskard.global.html#i:116"><span class="id" title="variable">i</span></a>) <a class="idref" href="Giskard.global.html#n:117"><span class="id" title="variable">n</span></a>)) <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Lists.List.html#In"><span class="id" title="definition">In</span></a> <a class="idref" href="Giskard.global.html#msg:118"><span class="id" title="variable">msg</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Datatypes.html#snd"><span class="id" title="definition">snd</span></a> (<a class="idref" href="Giskard.global.html#tr:115"><span class="id" title="variable">tr</span></a> <a class="idref" href="Giskard.global.html#i:116"><span class="id" title="variable">i</span></a>)).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">tr</span> <span class="id" title="var">H_prot</span> <span class="id" title="var">i</span> <span class="id" title="var">n</span> <span class="id" title="var">msg</span> <span class="id" title="var">H_part</span> <span class="id" title="var">H_in</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">H_useful</span> := <a class="idref" href="Giskard.global.html#processed_means_past_received"><span class="id" title="lemma">processed_means_past_received</span></a> <span class="id" title="var">H_prot</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">H_part</span> <span class="id" title="var">H_in</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H_useful</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">i_past</span> [<span class="id" title="var">H_lt</span> <span class="id" title="var">H_goal</span>]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">H_useful2</span> := <a class="idref" href="Giskard.global.html#delivered_means_sent_global"><span class="id" title="lemma">delivered_means_sent_global</span></a> <span class="id" title="var">H_prot</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">H_part</span> <span class="id" title="var">H_goal</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">apply</span> (<a class="idref" href="Giskard.global.html#global_messages_monotonic"><span class="id" title="lemma">global_messages_monotonic</span></a> <span class="id" title="var">H_prot</span> <span class="id" title="var">H_lt</span> <span class="id" title="var">_</span> <span class="id" title="var">H_useful2</span>).<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="delivered_means_sent_local" class="idref" href="#delivered_means_sent_local"><span class="id" title="lemma">delivered_means_sent_local</span></a> :<br/>
&nbsp;&nbsp;<span class="id" title="keyword">forall</span> <a id="tr:119" class="idref" href="#tr:119"><span class="id" title="binder">tr</span></a>, <a class="idref" href="Giskard.global.html#protocol_trace"><span class="id" title="definition">protocol_trace</span></a> <a class="idref" href="Giskard.global.html#tr:119"><span class="id" title="variable">tr</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">forall</span> <a id="i:120" class="idref" href="#i:120"><span class="id" title="binder">i</span></a> <a id="msg:121" class="idref" href="#msg:121"><span class="id" title="binder">msg</span></a> (<a id="n0:122" class="idref" href="#n0:122"><span class="id" title="binder">n0</span></a> : <a class="idref" href="Giskard.structures.html#node"><span class="id" title="axiom">node</span></a>) (<a id="lm0:123" class="idref" href="#lm0:123"><span class="id" title="binder">lm0</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="Giskard.structures.html#message"><span class="id" title="record">message</span></a>),<br/>
&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Lists.List.html#In"><span class="id" title="definition">In</span></a> <a class="idref" href="Giskard.global.html#msg:121"><span class="id" title="variable">msg</span></a> <a class="idref" href="Giskard.global.html#lm0:123"><span class="id" title="variable">lm0</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Lists.List.html#In"><span class="id" title="definition">In</span></a> <a class="idref" href="Giskard.global.html#n0:122"><span class="id" title="variable">n0</span></a> <a class="idref" href="Giskard.structures.html#participants"><span class="id" title="axiom">participants</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">forall</span> (<a id="p0:124" class="idref" href="#p0:124"><span class="id" title="binder">p0</span></a> : <a class="idref" href="Giskard.local.html#NState_transition_type"><span class="id" title="inductive">NState_transition_type</span></a>) (<a id="msg0:125" class="idref" href="#msg0:125"><span class="id" title="binder">msg0</span></a> : <a class="idref" href="Giskard.structures.html#message"><span class="id" title="record">message</span></a>),<br/>
&nbsp;&nbsp;&nbsp;<a class="idref" href="Giskard.local.html#get_transition"><span class="id" title="definition">get_transition</span></a> <a class="idref" href="Giskard.global.html#p0:124"><span class="id" title="variable">p0</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Datatypes.html#fst"><span class="id" title="definition">fst</span></a> (<a class="idref" href="Giskard.global.html#tr:119"><span class="id" title="variable">tr</span></a> <a class="idref" href="Giskard.global.html#i:120"><span class="id" title="variable">i</span></a>) <a class="idref" href="Giskard.global.html#n0:122"><span class="id" title="variable">n0</span></a>) <a class="idref" href="Giskard.global.html#msg0:125"><span class="id" title="variable">msg0</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Datatypes.html#fst"><span class="id" title="definition">fst</span></a> (<a class="idref" href="Giskard.global.html#tr:119"><span class="id" title="variable">tr</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <a class="idref" href="Giskard.global.html#i:120"><span class="id" title="variable">i</span></a>)) <a class="idref" href="Giskard.global.html#n0:122"><span class="id" title="variable">n0</span></a>) <a class="idref" href="Giskard.global.html#lm0:123"><span class="id" title="variable">lm0</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;<a class="idref" href="Giskard.global.html#tr:119"><span class="id" title="variable">tr</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <a class="idref" href="Giskard.global.html#i:120"><span class="id" title="variable">i</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="Giskard.global.html#broadcast_messages"><span class="id" title="definition">broadcast_messages</span></a> (<a class="idref" href="Giskard.global.html#tr:119"><span class="id" title="variable">tr</span></a> <a class="idref" href="Giskard.global.html#i:120"><span class="id" title="variable">i</span></a>) (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Datatypes.html#fst"><span class="id" title="definition">fst</span></a> (<a class="idref" href="Giskard.global.html#tr:119"><span class="id" title="variable">tr</span></a> <a class="idref" href="Giskard.global.html#i:120"><span class="id" title="variable">i</span></a>) <a class="idref" href="Giskard.global.html#n0:122"><span class="id" title="variable">n0</span></a>) (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Datatypes.html#fst"><span class="id" title="definition">fst</span></a> (<a class="idref" href="Giskard.global.html#tr:119"><span class="id" title="variable">tr</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <a class="idref" href="Giskard.global.html#i:120"><span class="id" title="variable">i</span></a>)) <a class="idref" href="Giskard.global.html#n0:122"><span class="id" title="variable">n0</span></a>) <a class="idref" href="Giskard.global.html#lm0:123"><span class="id" title="variable">lm0</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Lists.List.html#In"><span class="id" title="definition">In</span></a> <a class="idref" href="Giskard.global.html#msg:121"><span class="id" title="variable">msg</span></a> (<a class="idref" href="Giskard.structures.html#out_messages"><span class="id" title="projection">out_messages</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Datatypes.html#fst"><span class="id" title="definition">fst</span></a> (<a class="idref" href="Giskard.global.html#tr:119"><span class="id" title="variable">tr</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <a class="idref" href="Giskard.global.html#i:120"><span class="id" title="variable">i</span></a>)) <a class="idref" href="Giskard.global.html#n0:122"><span class="id" title="variable">n0</span></a>)).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">tr</span> <span class="id" title="var">Htr</span> <span class="id" title="var">i</span> <span class="id" title="var">msg</span> <span class="id" title="var">n0</span> <span class="id" title="var">lm0</span> <span class="id" title="var">H_fresh</span> <span class="id" title="var">H_in0</span> <span class="id" title="var">p0</span> <span class="id" title="var">msg0</span> <span class="id" title="var">H_step</span> <span class="id" title="var">H_deliver</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">H_deliver</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<a class="idref" href="Giskard.global.html#protocol_trace_state_sane"><span class="id" title="lemma">protocol_trace_state_sane</span></a> <span class="id" title="var">Htr</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="Giskard.structures.html#node_eqb_refl"><span class="id" title="lemma">node_eqb_refl</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">p0</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">H_step_copy</span> := <span class="id" title="var">H_step</span>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H_step</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">H_update</span> [<span class="id" title="var">H_out</span> <span class="id" title="var">_</span>]];<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">H_update</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">H_out</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H_fresh</span>; <span class="id" title="tactic">simpl</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">try</span> <span class="id" title="var">easy</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="Giskard.local.html#make_PrepareBlocks"><span class="id" title="definition">make_PrepareBlocks</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H_fresh</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H_fresh</span>; <span class="id" title="tactic">tauto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H_fresh</span>; <span class="id" title="tactic">destruct</span> <span class="id" title="var">H_fresh</span>. <span class="id" title="tactic">tauto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">right</span>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Lists.List.html#in_app_iff"><span class="id" title="lemma">in_app_iff</span></a>. <span class="id" title="tactic">tauto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="Giskard.local.html#make_PrepareBlocks"><span class="id" title="definition">make_PrepareBlocks</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H_fresh</span>; <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H_fresh</span>; <span class="id" title="tactic">tauto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Lists.List.html#in_app_iff"><span class="id" title="lemma">in_app_iff</span></a>; <span class="id" title="tactic">left</span>; <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;Vanquished&nbsp;bug&nbsp;here&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="Giskard.local.html#make_PrepareBlocks"><span class="id" title="definition">make_PrepareBlocks</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H_fresh</span>; <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H_fresh</span>; <span class="id" title="tactic">tauto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Lists.List.html#in_app_iff"><span class="id" title="lemma">in_app_iff</span></a>; <span class="id" title="tactic">tauto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="out_message_change_tells_sender" class="idref" href="#out_message_change_tells_sender"><span class="id" title="lemma">out_message_change_tells_sender</span></a> :<br/>
&nbsp;&nbsp;<span class="id" title="keyword">forall</span> (<a id="tr:126" class="idref" href="#tr:126"><span class="id" title="binder">tr</span></a> : <a class="idref" href="Giskard.global.html#GTrace"><span class="id" title="definition">GTrace</span></a>), <a class="idref" href="Giskard.global.html#protocol_trace"><span class="id" title="definition">protocol_trace</span></a> <a class="idref" href="Giskard.global.html#tr:126"><span class="id" title="variable">tr</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">forall</span> (<a id="i:127" class="idref" href="#i:127"><span class="id" title="binder">i</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>) (<a id="n0:128" class="idref" href="#n0:128"><span class="id" title="binder">n0</span></a> : <a class="idref" href="Giskard.structures.html#node"><span class="id" title="axiom">node</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a id="p0:129" class="idref" href="#p0:129"><span class="id" title="binder">p0</span></a> : <a class="idref" href="Giskard.local.html#NState_transition_type"><span class="id" title="inductive">NState_transition_type</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a id="msg0:130" class="idref" href="#msg0:130"><span class="id" title="binder">msg0</span></a> : <a class="idref" href="Giskard.structures.html#message"><span class="id" title="record">message</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a id="lm0:131" class="idref" href="#lm0:131"><span class="id" title="binder">lm0</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="Giskard.structures.html#message"><span class="id" title="record">message</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Lists.List.html#In"><span class="id" title="definition">In</span></a> <a class="idref" href="Giskard.global.html#n0:128"><span class="id" title="variable">n0</span></a> <a class="idref" href="Giskard.structures.html#participants"><span class="id" title="axiom">participants</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;g&nbsp;~~&gt;&nbsp;g'&nbsp;with&nbsp;fixed&nbsp;node&nbsp;and&nbsp;in/out&nbsp;messages&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Giskard.global.html#tr:126"><span class="id" title="variable">tr</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <a class="idref" href="Giskard.global.html#i:127"><span class="id" title="variable">i</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="Giskard.global.html#broadcast_messages"><span class="id" title="definition">broadcast_messages</span></a> (<a class="idref" href="Giskard.global.html#tr:126"><span class="id" title="variable">tr</span></a> <a class="idref" href="Giskard.global.html#i:127"><span class="id" title="variable">i</span></a>) (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Datatypes.html#fst"><span class="id" title="definition">fst</span></a> (<a class="idref" href="Giskard.global.html#tr:126"><span class="id" title="variable">tr</span></a> <a class="idref" href="Giskard.global.html#i:127"><span class="id" title="variable">i</span></a>) <a class="idref" href="Giskard.global.html#n0:128"><span class="id" title="variable">n0</span></a>) (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Datatypes.html#fst"><span class="id" title="definition">fst</span></a> (<a class="idref" href="Giskard.global.html#tr:126"><span class="id" title="variable">tr</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <a class="idref" href="Giskard.global.html#i:127"><span class="id" title="variable">i</span></a>)) <a class="idref" href="Giskard.global.html#n0:128"><span class="id" title="variable">n0</span></a>) <a class="idref" href="Giskard.global.html#lm0:131"><span class="id" title="variable">lm0</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Giskard.local.html#get_transition"><span class="id" title="definition">get_transition</span></a> <a class="idref" href="Giskard.global.html#p0:129"><span class="id" title="variable">p0</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Datatypes.html#fst"><span class="id" title="definition">fst</span></a> (<a class="idref" href="Giskard.global.html#tr:126"><span class="id" title="variable">tr</span></a> <a class="idref" href="Giskard.global.html#i:127"><span class="id" title="variable">i</span></a>) <a class="idref" href="Giskard.global.html#n0:128"><span class="id" title="variable">n0</span></a>) <a class="idref" href="Giskard.global.html#msg0:130"><span class="id" title="variable">msg0</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Datatypes.html#fst"><span class="id" title="definition">fst</span></a> (<a class="idref" href="Giskard.global.html#tr:126"><span class="id" title="variable">tr</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <a class="idref" href="Giskard.global.html#i:127"><span class="id" title="variable">i</span></a>)) <a class="idref" href="Giskard.global.html#n0:128"><span class="id" title="variable">n0</span></a>) <a class="idref" href="Giskard.global.html#lm0:131"><span class="id" title="variable">lm0</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;We&nbsp;know&nbsp;the&nbsp;node&nbsp;that&nbsp;processed&nbsp;the&nbsp;message,&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;although&nbsp;we&nbsp;don't&nbsp;necessarily&nbsp;know&nbsp;the&nbsp;message&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">forall</span> (<a id="n:132" class="idref" href="#n:132"><span class="id" title="binder">n</span></a> : <a class="idref" href="Giskard.structures.html#node"><span class="id" title="axiom">node</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Lists.List.html#In"><span class="id" title="definition">In</span></a> <a class="idref" href="Giskard.global.html#n:132"><span class="id" title="variable">n</span></a> <a class="idref" href="Giskard.structures.html#participants"><span class="id" title="axiom">participants</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">exists</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">(</span></a><a id="msg:133" class="idref" href="#msg:133"><span class="id" title="binder">msg</span></a> : <a class="idref" href="Giskard.structures.html#message"><span class="id" title="record">message</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">),</span></a> <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Lists.List.html#In"><span class="id" title="definition">In</span></a> <a class="idref" href="Giskard.global.html#msg:133"><span class="id" title="variable">msg</span></a> (<a class="idref" href="Giskard.structures.html#out_messages"><span class="id" title="projection">out_messages</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Datatypes.html#fst"><span class="id" title="definition">fst</span></a> (<a class="idref" href="Giskard.global.html#tr:126"><span class="id" title="variable">tr</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <a class="idref" href="Giskard.global.html#i:127"><span class="id" title="variable">i</span></a>)) <a class="idref" href="Giskard.global.html#n:132"><span class="id" title="variable">n</span></a>)) <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Logic.html#63a68285c81db8f9bc456233bb9ed181"><span class="id" title="notation">~</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Lists.List.html#In"><span class="id" title="definition">In</span></a> <a class="idref" href="Giskard.global.html#msg:133"><span class="id" title="variable">msg</span></a> (<a class="idref" href="Giskard.structures.html#out_messages"><span class="id" title="projection">out_messages</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Datatypes.html#fst"><span class="id" title="definition">fst</span></a> (<a class="idref" href="Giskard.global.html#tr:126"><span class="id" title="variable">tr</span></a> <a class="idref" href="Giskard.global.html#i:127"><span class="id" title="variable">i</span></a>) <a class="idref" href="Giskard.global.html#n:132"><span class="id" title="variable">n</span></a>))<a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Giskard.global.html#n0:128"><span class="id" title="variable">n0</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="Giskard.global.html#n:132"><span class="id" title="variable">n</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">tr</span> <span class="id" title="var">Htr</span> <span class="id" title="var">i</span> <span class="id" title="var">n0</span> <span class="id" title="var">p0</span> <span class="id" title="var">msg0</span> <span class="id" title="var">lm0</span> <span class="id" title="var">H_in0</span> <span class="id" title="var">H_deliver</span> <span class="id" title="var">H_step</span> <span class="id" title="var">n</span> <span class="id" title="var">H_in</span> <span class="id" title="var">H_change</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="Giskard.structures.html#node_eq_dec"><span class="id" title="definition">node_eq_dec</span></a> <span class="id" title="var">n</span> <span class="id" title="var">n0</span>) <span class="id" title="keyword">as</span> [<span class="id" title="var">H_eq</span> | <span class="id" title="var">H_neq</span>].<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">symmetry</span>; <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="var">exfalso</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;Proving&nbsp;a&nbsp;contradiction&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H_change</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">msg</span> [<span class="id" title="var">H_new</span> <span class="id" title="var">H_old</span>]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;For&nbsp;all&nbsp;non-n0&nbsp;nodes,&nbsp;their&nbsp;out&nbsp;message&nbsp;nodes&nbsp;are&nbsp;exactly&nbsp;the&nbsp;same&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">H_eq_one</span> : <a class="idref" href="Giskard.structures.html#out_messages"><span class="id" title="projection">out_messages</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Datatypes.html#fst"><span class="id" title="definition">fst</span></a> (<span class="id" title="var">tr</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <span class="id" title="var">i</span>)) <span class="id" title="var">n</span>) <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="Giskard.structures.html#out_messages"><span class="id" title="projection">out_messages</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Datatypes.html#fst"><span class="id" title="definition">fst</span></a> (<span class="id" title="var">tr</span> <span class="id" title="var">i</span>) <span class="id" title="var">n</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">unfold</span> <a class="idref" href="Giskard.global.html#broadcast_messages"><span class="id" title="definition">broadcast_messages</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H_deliver</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<a class="idref" href="Giskard.global.html#protocol_trace_state_sane"><span class="id" title="lemma">protocol_trace_state_sane</span></a> <span class="id" title="var">Htr</span>) <span class="id" title="tactic">in</span> <span class="id" title="var">H_deliver</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="Giskard.structures.html#node_eqb_no"><span class="id" title="lemma">node_eqb_no</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H_neq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">H_deliver</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">H_neq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<a class="idref" href="Giskard.structures.html#is_member"><span class="id" title="definition">is_member</span></a> <span class="id" title="var">n</span> <a class="idref" href="Giskard.structures.html#participants"><span class="id" title="axiom">participants</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a>) <span class="id" title="tactic">by</span> <span class="id" title="var">now</span> <span class="id" title="tactic">apply</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Giskard.structures.html#is_member_correct"><span class="id" title="lemma">is_member_correct</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="Giskard.local.html#record_plural"><span class="id" title="definition">record_plural</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">reflexivity</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">H_eq_one</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H_new</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">contradiction</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="delivered_means_sender_made_transition" class="idref" href="#delivered_means_sender_made_transition"><span class="id" title="lemma">delivered_means_sender_made_transition</span></a> :<br/>
&nbsp;&nbsp;<span class="id" title="keyword">forall</span> <a id="tr:134" class="idref" href="#tr:134"><span class="id" title="binder">tr</span></a>, <a class="idref" href="Giskard.global.html#protocol_trace"><span class="id" title="definition">protocol_trace</span></a> <a class="idref" href="Giskard.global.html#tr:134"><span class="id" title="variable">tr</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">forall</span> <a id="i:135" class="idref" href="#i:135"><span class="id" title="binder">i</span></a> <a id="msg:136" class="idref" href="#msg:136"><span class="id" title="binder">msg</span></a> (<a id="n0:137" class="idref" href="#n0:137"><span class="id" title="binder">n0</span></a> : <a class="idref" href="Giskard.structures.html#node"><span class="id" title="axiom">node</span></a>) (<a id="lm0:138" class="idref" href="#lm0:138"><span class="id" title="binder">lm0</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="Giskard.structures.html#message"><span class="id" title="record">message</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Lists.List.html#In"><span class="id" title="definition">In</span></a> <a class="idref" href="Giskard.global.html#msg:136"><span class="id" title="variable">msg</span></a> <a class="idref" href="Giskard.global.html#lm0:138"><span class="id" title="variable">lm0</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Lists.List.html#In"><span class="id" title="definition">In</span></a> <a class="idref" href="Giskard.global.html#n0:137"><span class="id" title="variable">n0</span></a> <a class="idref" href="Giskard.structures.html#participants"><span class="id" title="axiom">participants</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">forall</span> (<a id="p0:139" class="idref" href="#p0:139"><span class="id" title="binder">p0</span></a> : <a class="idref" href="Giskard.local.html#NState_transition_type"><span class="id" title="inductive">NState_transition_type</span></a>) (<a id="msg0:140" class="idref" href="#msg0:140"><span class="id" title="binder">msg0</span></a> : <a class="idref" href="Giskard.structures.html#message"><span class="id" title="record">message</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Giskard.local.html#get_transition"><span class="id" title="definition">get_transition</span></a> <a class="idref" href="Giskard.global.html#p0:139"><span class="id" title="variable">p0</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Datatypes.html#fst"><span class="id" title="definition">fst</span></a> (<a class="idref" href="Giskard.global.html#tr:134"><span class="id" title="variable">tr</span></a> <a class="idref" href="Giskard.global.html#i:135"><span class="id" title="variable">i</span></a>) <a class="idref" href="Giskard.global.html#n0:137"><span class="id" title="variable">n0</span></a>) <a class="idref" href="Giskard.global.html#msg0:140"><span class="id" title="variable">msg0</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Datatypes.html#fst"><span class="id" title="definition">fst</span></a> (<a class="idref" href="Giskard.global.html#tr:134"><span class="id" title="variable">tr</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <a class="idref" href="Giskard.global.html#i:135"><span class="id" title="variable">i</span></a>)) <a class="idref" href="Giskard.global.html#n0:137"><span class="id" title="variable">n0</span></a>) <a class="idref" href="Giskard.global.html#lm0:138"><span class="id" title="variable">lm0</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Giskard.global.html#tr:134"><span class="id" title="variable">tr</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <a class="idref" href="Giskard.global.html#i:135"><span class="id" title="variable">i</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="Giskard.global.html#broadcast_messages"><span class="id" title="definition">broadcast_messages</span></a> (<a class="idref" href="Giskard.global.html#tr:134"><span class="id" title="variable">tr</span></a> <a class="idref" href="Giskard.global.html#i:135"><span class="id" title="variable">i</span></a>) (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Datatypes.html#fst"><span class="id" title="definition">fst</span></a> (<a class="idref" href="Giskard.global.html#tr:134"><span class="id" title="variable">tr</span></a> <a class="idref" href="Giskard.global.html#i:135"><span class="id" title="variable">i</span></a>) <a class="idref" href="Giskard.global.html#n0:137"><span class="id" title="variable">n0</span></a>) (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Datatypes.html#fst"><span class="id" title="definition">fst</span></a> (<a class="idref" href="Giskard.global.html#tr:134"><span class="id" title="variable">tr</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <a class="idref" href="Giskard.global.html#i:135"><span class="id" title="variable">i</span></a>)) <a class="idref" href="Giskard.global.html#n0:137"><span class="id" title="variable">n0</span></a>) <a class="idref" href="Giskard.global.html#lm0:138"><span class="id" title="variable">lm0</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Giskard.structures.html#get_sender"><span class="id" title="projection">get_sender</span></a> <a class="idref" href="Giskard.global.html#msg:136"><span class="id" title="variable">msg</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="Giskard.global.html#n0:137"><span class="id" title="variable">n0</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">tr</span> <span class="id" title="var">Htr</span> <span class="id" title="var">i</span> <span class="id" title="var">msg</span> <span class="id" title="var">n0</span> <span class="id" title="var">lm0</span> <span class="id" title="var">H_fresh</span> <span class="id" title="var">H_in0</span> <span class="id" title="var">p0</span> <span class="id" title="var">msg0</span> <span class="id" title="var">H_step</span> <span class="id" title="var">H_deliver</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">p0</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">H_step_copy</span> := <span class="id" title="var">H_step</span>); <br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H_step</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">H_update</span> [<span class="id" title="var">H_out</span> <span class="id" title="var">H_rest</span>]];<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">H_out</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H_fresh</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H_fresh</span>; <br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">try</span> (<span class="id" title="tactic">subst</span>; <span class="id" title="tactic">reflexivity</span>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">try</span> (<span class="id" title="tactic">destruct</span> <span class="id" title="var">H_fresh</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">subst</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="Giskard.structures.html#get_sender"><span class="id" title="projection">get_sender</span></a>; <span class="id" title="tactic">simpl</span>; <span class="id" title="tactic">reflexivity</span>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">repeat</span> <span class="id" title="tactic">destruct</span> <span class="id" title="var">H_fresh</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">H_fresh</span> | <span class="id" title="var">H_fresh</span>];<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">try</span> <span class="id" title="var">contradiction</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">try</span> <span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">H_fresh</span>; <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> *;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">try</span> <span class="id" title="tactic">rewrite</span> (<a class="idref" href="Giskard.global.html#protocol_trace_state_sane"><span class="id" title="lemma">protocol_trace_state_sane</span></a> <span class="id" title="var">Htr</span>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">try</span> <span class="id" title="tactic">reflexivity</span>; <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">try</span> <span class="id" title="tactic">tauto</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">try</span> (<span class="id" title="tactic">apply</span> <a class="idref" href="Giskard.local.html#pending_PrepareVote_correct"><span class="id" title="lemma">pending_PrepareVote_correct</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H_fresh</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H_fresh</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">_</span> [<span class="id" title="var">H_fresh</span> <span class="id" title="var">_</span>]];<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">H_fresh</span>; <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> *;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<a class="idref" href="Giskard.global.html#protocol_trace_state_sane"><span class="id" title="lemma">protocol_trace_state_sane</span></a> <span class="id" title="var">Htr</span>); <span class="id" title="tactic">reflexivity</span>).<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="global_local_out_if" class="idref" href="#global_local_out_if"><span class="id" title="lemma">global_local_out_if</span></a> :<br/>
&nbsp;&nbsp;<span class="id" title="keyword">forall</span> (<a id="tr:141" class="idref" href="#tr:141"><span class="id" title="binder">tr</span></a> : <a class="idref" href="Giskard.global.html#GTrace"><span class="id" title="definition">GTrace</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Giskard.global.html#protocol_trace"><span class="id" title="definition">protocol_trace</span></a> <a class="idref" href="Giskard.global.html#tr:141"><span class="id" title="variable">tr</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">forall</span> <a id="i:142" class="idref" href="#i:142"><span class="id" title="binder">i</span></a> <a id="msg:143" class="idref" href="#msg:143"><span class="id" title="binder">msg</span></a> <a id="n:144" class="idref" href="#n:144"><span class="id" title="binder">n</span></a>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Lists.List.html#In"><span class="id" title="definition">In</span></a> <a class="idref" href="Giskard.global.html#n:144"><span class="id" title="variable">n</span></a> <a class="idref" href="Giskard.structures.html#participants"><span class="id" title="axiom">participants</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Lists.List.html#In"><span class="id" title="definition">In</span></a> <a class="idref" href="Giskard.global.html#msg:143"><span class="id" title="variable">msg</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Lists.List.html#filter"><span class="id" title="definition">filter</span></a> (<span class="id" title="keyword">fun</span> <a id="msg:145" class="idref" href="#msg:145"><span class="id" title="binder">msg</span></a> =&gt; <a class="idref" href="Giskard.structures.html#node_eqb"><span class="id" title="axiom">node_eqb</span></a> (<a class="idref" href="Giskard.structures.html#get_sender"><span class="id" title="projection">get_sender</span></a> <a class="idref" href="Giskard.global.html#msg:145"><span class="id" title="variable">msg</span></a>) <a class="idref" href="Giskard.global.html#n:144"><span class="id" title="variable">n</span></a>) (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Datatypes.html#snd"><span class="id" title="definition">snd</span></a> (<a class="idref" href="Giskard.global.html#tr:141"><span class="id" title="variable">tr</span></a> <a class="idref" href="Giskard.global.html#i:142"><span class="id" title="variable">i</span></a>))) <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Lists.List.html#In"><span class="id" title="definition">In</span></a> <a class="idref" href="Giskard.global.html#msg:143"><span class="id" title="variable">msg</span></a> (<a class="idref" href="Giskard.structures.html#out_messages"><span class="id" title="projection">out_messages</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Datatypes.html#fst"><span class="id" title="definition">fst</span></a> (<a class="idref" href="Giskard.global.html#tr:141"><span class="id" title="variable">tr</span></a> <a class="idref" href="Giskard.global.html#i:142"><span class="id" title="variable">i</span></a>) <a class="idref" href="Giskard.global.html#n:144"><span class="id" title="variable">n</span></a>)).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">tr</span> <span class="id" title="var">Htr</span> <span class="id" title="var">i</span> <span class="id" title="var">msg</span> <span class="id" title="var">n</span> <span class="id" title="var">H_part</span> <span class="id" title="var">H_in</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> <span class="id" title="var">Htr</span> <span class="id" title="keyword">as</span> <span class="id" title="var">Htr'</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Htr</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">H_init</span> <span class="id" title="var">H_prot</span>].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">i</span>.<br/>
&nbsp;&nbsp;- <span class="comment">(*&nbsp;Base&nbsp;case&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">H_init</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H_in</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">H_in</span>.<br/>
&nbsp;&nbsp;- <span class="comment">(*&nbsp;IH&nbsp;says&nbsp;if&nbsp;it's&nbsp;in&nbsp;the&nbsp;global&nbsp;out&nbsp;messages&nbsp;in&nbsp;the&nbsp;previous&nbsp;state,&nbsp;then&nbsp;it's&nbsp;in&nbsp;the<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;local&nbsp;out&nbsp;messages&nbsp;in&nbsp;the&nbsp;previous&nbsp;state.&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;Either&nbsp;it's&nbsp;in&nbsp;the&nbsp;global&nbsp;out&nbsp;messages&nbsp;in&nbsp;the&nbsp;previous&nbsp;state,&nbsp;or&nbsp;it's&nbsp;not,&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;meaning&nbsp;it&nbsp;was&nbsp;newly&nbsp;sent&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;Then&nbsp;it&nbsp;must&nbsp;be&nbsp;in&nbsp;the&nbsp;out&nbsp;messages&nbsp;by&nbsp;case&nbsp;analysis&nbsp;on&nbsp;the&nbsp;transitions&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Lists.List.html#In_dec"><span class="id" title="abbreviation">In_dec</span></a> <a class="idref" href="Giskard.structures.html#message_eq_dec"><span class="id" title="definition">message_eq_dec</span></a> <span class="id" title="var">msg</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Lists.List.html#filter"><span class="id" title="definition">filter</span></a> (<span class="id" title="keyword">fun</span> <a id="msg:147" class="idref" href="#msg:147"><span class="id" title="binder">msg</span></a> : <a class="idref" href="Giskard.structures.html#message"><span class="id" title="record">message</span></a> =&gt; <a class="idref" href="Giskard.structures.html#node_eqb"><span class="id" title="axiom">node_eqb</span></a> (<a class="idref" href="Giskard.structures.html#get_sender"><span class="id" title="projection">get_sender</span></a> <a class="idref" href="Giskard.global.html#msg:146"><span class="id" title="variable">msg</span></a>) <span class="id" title="var">n</span>) (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Datatypes.html#snd"><span class="id" title="definition">snd</span></a> (<span class="id" title="var">tr</span> <span class="id" title="var">i</span>)))) <span class="id" title="keyword">as</span> [<span class="id" title="var">H_old</span> | <span class="id" title="var">H_new</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="var">spec</span> <span class="id" title="var">IHi</span> <span class="id" title="var">H_old</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">apply</span> <a class="idref" href="Giskard.global.html#out_messages_global_monotonic_step"><span class="id" title="lemma">out_messages_global_monotonic_step</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="comment">(*&nbsp;msg&nbsp;was&nbsp;not&nbsp;in&nbsp;n's&nbsp;part&nbsp;of&nbsp;the&nbsp;global&nbsp;out&nbsp;message&nbsp;buffer&nbsp;in&nbsp;state&nbsp;(tr&nbsp;i)&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;But&nbsp;it&nbsp;is&nbsp;in&nbsp;n's&nbsp;part&nbsp;of&nbsp;the&nbsp;global&nbsp;out&nbsp;message&nbsp;buffer&nbsp;in&nbsp;state&nbsp;(tr&nbsp;(S&nbsp;i))&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">clear</span> <span class="id" title="var">IHi</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Lists.List.html#filter_In"><span class="id" title="lemma">filter_In</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H_in</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H_in</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">H_in</span> <span class="id" title="var">H_sender</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;First&nbsp;we&nbsp;establish&nbsp;that&nbsp;n&nbsp;is&nbsp;the&nbsp;sender&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">H_useful</span> := <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Lists.List.html#filter_In"><span class="id" title="lemma">filter_In</span></a> (<span class="id" title="keyword">fun</span> <a id="msg:149" class="idref" href="#msg:149"><span class="id" title="binder">msg</span></a> : <a class="idref" href="Giskard.structures.html#message"><span class="id" title="record">message</span></a> =&gt; <a class="idref" href="Giskard.structures.html#node_eqb"><span class="id" title="axiom">node_eqb</span></a> (<a class="idref" href="Giskard.structures.html#get_sender"><span class="id" title="projection">get_sender</span></a> <a class="idref" href="Giskard.global.html#msg:148"><span class="id" title="variable">msg</span></a>) <span class="id" title="var">n</span>) <span class="id" title="var">msg</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Datatypes.html#snd"><span class="id" title="definition">snd</span></a> (<span class="id" title="var">tr</span> <span class="id" title="var">i</span>))).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Logic.html#63a68285c81db8f9bc456233bb9ed181"><span class="id" title="notation">~</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Lists.List.html#In"><span class="id" title="definition">In</span></a> <span class="id" title="var">msg</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Datatypes.html#snd"><span class="id" title="definition">snd</span></a> (<span class="id" title="var">tr</span> <span class="id" title="var">i</span>)) <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Logic.html#f031fe1957c4a4a8e217aa46af2b4e25"><span class="id" title="notation">\/</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Logic.html#63a68285c81db8f9bc456233bb9ed181"><span class="id" title="notation">~</span></a> (<span class="id" title="keyword">fun</span> <a id="msg:151" class="idref" href="#msg:151"><span class="id" title="binder">msg</span></a> : <a class="idref" href="Giskard.structures.html#message"><span class="id" title="record">message</span></a> =&gt; <a class="idref" href="Giskard.structures.html#node_eqb"><span class="id" title="axiom">node_eqb</span></a> (<a class="idref" href="Giskard.structures.html#get_sender"><span class="id" title="projection">get_sender</span></a> <a class="idref" href="Giskard.global.html#msg:150"><span class="id" title="variable">msg</span></a>) <span class="id" title="var">n</span>) <span class="id" title="var">msg</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a>) <span class="id" title="tactic">by</span> <span class="id" title="tactic">tauto</span>; <span class="id" title="tactic">clear</span> <span class="id" title="var">H_useful</span> <span class="id" title="var">H_new</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;2 : <span class="id" title="var">contradiction</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;Based&nbsp;on&nbsp;H&nbsp;and&nbsp;H_in,&nbsp;msg&nbsp;must&nbsp;have&nbsp;been&nbsp;newly&nbsp;added&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;Therefore,&nbsp;whatever&nbsp;transition&nbsp;happened,&nbsp;n&nbsp;must&nbsp;have&nbsp;made&nbsp;the&nbsp;transition&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">spec</span> <span class="id" title="var">H_prot</span> <span class="id" title="var">i</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H_prot</span> <span class="id" title="keyword">as</span> [[<span class="id" title="var">n0</span> [<span class="id" title="var">H_in0</span> [<span class="id" title="var">p0</span> [<span class="id" title="var">msg0</span> [<span class="id" title="var">lm0</span> [<span class="id" title="var">H_step</span> <span class="id" title="var">H_deliver</span>]]]]]] | <span class="id" title="var">H_timeout</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="comment">(*&nbsp;In&nbsp;the&nbsp;transition&nbsp;case&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="Giskard.structures.html#node_eq_dec"><span class="id" title="definition">node_eq_dec</span></a> <span class="id" title="var">n0</span> <span class="id" title="var">n</span>) <span class="id" title="keyword">as</span> [<span class="id" title="var">H_true</span> | <span class="id" title="var">H_false</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;** <span class="comment">(*&nbsp;In&nbsp;the&nbsp;case&nbsp;that&nbsp;n&nbsp;made&nbsp;the&nbsp;transition&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">H_true</span> <span class="id" title="tactic">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">H_deliver</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H_in</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H_in</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Lists.List.html#in_app_iff"><span class="id" title="lemma">in_app_iff</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H_in</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H_in</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">H_fresh</span> | <span class="id" title="var">H_old</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;2 : <span class="id" title="var">contradiction</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">apply</span> (<a class="idref" href="Giskard.global.html#delivered_means_sent_local"><span class="id" title="lemma">delivered_means_sent_local</span></a> <span class="id" title="var">Htr'</span> <span class="id" title="var">i</span> <span class="id" title="var">msg</span> <span class="id" title="var">n</span> <span class="id" title="var">H_fresh</span> <span class="id" title="var">H_part</span> <span class="id" title="var">p0</span> <span class="id" title="var">msg0</span> <span class="id" title="var">H_step</span> <span class="id" title="var">H_deliver</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;** <span class="comment">(*&nbsp;In&nbsp;the&nbsp;case&nbsp;that&nbsp;n&nbsp;didn't&nbsp;make&nbsp;the&nbsp;transition&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">exfalso</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">H_deliver</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H_in</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H_in</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Lists.List.html#in_app_iff"><span class="id" title="lemma">in_app_iff</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H_in</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H_in</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">H_fresh</span> | <span class="id" title="var">H_old</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;2 : <span class="id" title="var">contradiction</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<a class="idref" href="Giskard.structures.html#get_sender"><span class="id" title="projection">get_sender</span></a> <span class="id" title="var">msg</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <span class="id" title="var">n0</span>) <span class="id" title="tactic">by</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<a class="idref" href="Giskard.global.html#delivered_means_sender_made_transition"><span class="id" title="lemma">delivered_means_sender_made_transition</span></a> <span class="id" title="var">Htr'</span> <span class="id" title="var">i</span> <span class="id" title="var">msg</span> <span class="id" title="var">n0</span> <span class="id" title="var">H_fresh</span> <span class="id" title="var">H_in0</span> <span class="id" title="var">p0</span> <span class="id" title="var">msg0</span> <span class="id" title="var">H_step</span> <span class="id" title="var">H_deliver</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="Giskard.structures.html#node_eqb_correct"><span class="id" title="axiom">node_eqb_correct</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H_sender</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">subst</span>; <span class="id" title="tactic">tauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="comment">(*&nbsp;In&nbsp;the&nbsp;timeout&nbsp;case&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Datatypes.html#snd"><span class="id" title="definition">snd</span></a> (<span class="id" title="var">tr</span> <span class="id" title="var">i</span>) <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Datatypes.html#snd"><span class="id" title="definition">snd</span></a> (<span class="id" title="var">tr</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <span class="id" title="var">i</span>))).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">apply</span> <a class="idref" href="Giskard.structures.html#is_member_correct"><span class="id" title="lemma">is_member_correct</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H_part</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">H_timeout</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">reflexivity</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">H0</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>. <span class="id" title="var">contradiction</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="local_global_out_if" class="idref" href="#local_global_out_if"><span class="id" title="lemma">local_global_out_if</span></a> :<br/>
&nbsp;&nbsp;<span class="id" title="keyword">forall</span> (<a id="tr:152" class="idref" href="#tr:152"><span class="id" title="binder">tr</span></a> : <a class="idref" href="Giskard.global.html#GTrace"><span class="id" title="definition">GTrace</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Giskard.global.html#protocol_trace"><span class="id" title="definition">protocol_trace</span></a> <a class="idref" href="Giskard.global.html#tr:152"><span class="id" title="variable">tr</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">forall</span> <a id="i:153" class="idref" href="#i:153"><span class="id" title="binder">i</span></a> <a id="msg:154" class="idref" href="#msg:154"><span class="id" title="binder">msg</span></a> <a id="n:155" class="idref" href="#n:155"><span class="id" title="binder">n</span></a>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Lists.List.html#In"><span class="id" title="definition">In</span></a> <a class="idref" href="Giskard.global.html#n:155"><span class="id" title="variable">n</span></a> <a class="idref" href="Giskard.structures.html#participants"><span class="id" title="axiom">participants</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Lists.List.html#In"><span class="id" title="definition">In</span></a> <a class="idref" href="Giskard.global.html#msg:154"><span class="id" title="variable">msg</span></a> (<a class="idref" href="Giskard.structures.html#out_messages"><span class="id" title="projection">out_messages</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Datatypes.html#fst"><span class="id" title="definition">fst</span></a> (<a class="idref" href="Giskard.global.html#tr:152"><span class="id" title="variable">tr</span></a> <a class="idref" href="Giskard.global.html#i:153"><span class="id" title="variable">i</span></a>) <a class="idref" href="Giskard.global.html#n:155"><span class="id" title="variable">n</span></a>)) <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Lists.List.html#In"><span class="id" title="definition">In</span></a> <a class="idref" href="Giskard.global.html#msg:154"><span class="id" title="variable">msg</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Datatypes.html#snd"><span class="id" title="definition">snd</span></a> (<a class="idref" href="Giskard.global.html#tr:152"><span class="id" title="variable">tr</span></a> <a class="idref" href="Giskard.global.html#i:153"><span class="id" title="variable">i</span></a>)).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">tr</span> <span class="id" title="var">H_prot</span> <span class="id" title="var">i</span> <span class="id" title="var">msg</span> <span class="id" title="var">n</span> <span class="id" title="var">H_part</span> <span class="id" title="var">H_in</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">i</span> <span class="id" title="keyword">as</span> [|<span class="id" title="var">i</span> <span class="id" title="var">IH_prot</span>].<br/>
&nbsp;&nbsp;- <span class="comment">(*&nbsp;Base&nbsp;case&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H_prot</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">H_init</span> <span class="id" title="var">_</span>];<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">H_init</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H_in</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">H_in</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">destruct</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Lists.List.html#In_dec"><span class="id" title="abbreviation">In_dec</span></a> <a class="idref" href="Giskard.structures.html#message_eq_dec"><span class="id" title="definition">message_eq_dec</span></a> <span class="id" title="var">msg</span> (<a class="idref" href="Giskard.structures.html#out_messages"><span class="id" title="projection">out_messages</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Datatypes.html#fst"><span class="id" title="definition">fst</span></a> (<span class="id" title="var">tr</span> <span class="id" title="var">i</span>) <span class="id" title="var">n</span>))) <span class="id" title="keyword">as</span> [<span class="id" title="var">H_old</span> | <span class="id" title="var">H_new</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="var">spec</span> <span class="id" title="var">IH_prot</span> <span class="id" title="var">H_old</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">apply</span> <a class="idref" href="Giskard.global.html#global_messages_monotonic_step"><span class="id" title="lemma">global_messages_monotonic_step</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">clear</span> <span class="id" title="var">IH_prot</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">H_useful</span> := <a class="idref" href="Giskard.global.html#out_messages_change_means_sent"><span class="id" title="lemma">out_messages_change_means_sent</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> <span class="id" title="var">H_prot</span> <span class="id" title="keyword">as</span> <span class="id" title="var">H_prot'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H_prot</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">_</span> <span class="id" title="var">H_prot</span>];<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">spec</span> <span class="id" title="var">H_prot</span> <span class="id" title="var">i</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H_prot</span> <span class="id" title="keyword">as</span> [[<span class="id" title="var">n0</span> [<span class="id" title="var">H_in0</span> [<span class="id" title="var">p0</span> [<span class="id" title="var">msg0</span> [<span class="id" title="var">lm0</span> [<span class="id" title="var">H_step</span> <span class="id" title="var">H_deliver</span>]]]]]] | <span class="id" title="var">H_timeout</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">assert</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Lists.List.html#In"><span class="id" title="definition">In</span></a> <span class="id" title="var">msg</span> <span class="id" title="var">lm0</span>) <span class="id" title="tactic">by</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">apply</span> (<span class="id" title="var">H_useful</span> <span class="id" title="var">_</span> <span class="id" title="var">H_prot'</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">msg0</span> <span class="id" title="var">lm0</span> <span class="id" title="var">H_in0</span> <span class="id" title="var">H_deliver</span> <span class="id" title="var">H_step</span> <span class="id" title="var">n</span> <span class="id" title="var">H_part</span> <span class="id" title="var">msg</span> <span class="id" title="var">H_in</span> <span class="id" title="var">H_new</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">H_deliver</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="Giskard.global.html#broadcast_messages"><span class="id" title="definition">broadcast_messages</span></a>; <span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Lists.List.html#in_app_iff"><span class="id" title="lemma">in_app_iff</span></a>; <span class="id" title="tactic">tauto</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">rewrite</span> <span class="id" title="var">H_timeout</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H_in</span>; <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H_in</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="Giskard.structures.html#is_member_correct"><span class="id" title="lemma">is_member_correct</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H_part</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">H_part</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H_in</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">contradiction</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="message_type_PrepareVote" class="idref" href="#message_type_PrepareVote"><span class="id" title="lemma">message_type_PrepareVote</span></a> :<br/>
&nbsp;&nbsp;<span class="id" title="keyword">forall</span> <a id="tr:156" class="idref" href="#tr:156"><span class="id" title="binder">tr</span></a> <a id="i:157" class="idref" href="#i:157"><span class="id" title="binder">i</span></a> <a id="n:158" class="idref" href="#n:158"><span class="id" title="binder">n</span></a> <a id="msg1:159" class="idref" href="#msg1:159"><span class="id" title="binder">msg1</span></a> <a id="b1:160" class="idref" href="#b1:160"><span class="id" title="binder">b1</span></a>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Giskard.global.html#protocol_trace"><span class="id" title="definition">protocol_trace</span></a> <a class="idref" href="Giskard.global.html#tr:156"><span class="id" title="variable">tr</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Lists.List.html#In"><span class="id" title="definition">In</span></a> <a class="idref" href="Giskard.global.html#msg1:159"><span class="id" title="variable">msg1</span></a> (<a class="idref" href="Giskard.local.html#processed_PrepareVote_in_view_about_block"><span class="id" title="definition">processed_PrepareVote_in_view_about_block</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Datatypes.html#fst"><span class="id" title="definition">fst</span></a> (<a class="idref" href="Giskard.global.html#tr:156"><span class="id" title="variable">tr</span></a> <a class="idref" href="Giskard.global.html#i:157"><span class="id" title="variable">i</span></a>) <a class="idref" href="Giskard.global.html#n:158"><span class="id" title="variable">n</span></a>) (<a class="idref" href="Giskard.structures.html#node_view"><span class="id" title="projection">node_view</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Datatypes.html#fst"><span class="id" title="definition">fst</span></a> (<a class="idref" href="Giskard.global.html#tr:156"><span class="id" title="variable">tr</span></a> <a class="idref" href="Giskard.global.html#i:157"><span class="id" title="variable">i</span></a>) <a class="idref" href="Giskard.global.html#n:158"><span class="id" title="variable">n</span></a>)) <a class="idref" href="Giskard.global.html#b1:160"><span class="id" title="variable">b1</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Giskard.structures.html#get_message_type"><span class="id" title="projection">get_message_type</span></a> <a class="idref" href="Giskard.global.html#msg1:159"><span class="id" title="variable">msg1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="Giskard.structures.html#PrepareVote"><span class="id" title="constructor">PrepareVote</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Lists.List.html#filter_In"><span class="id" title="lemma">filter_In</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H0</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">H0</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">repeat</span> (<span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Datatypes.html#andb_prop"><span class="id" title="lemma">andb_prop</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H1</span>; <span class="id" title="tactic">destruct</span> <span class="id" title="var">H1</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="Giskard.structures.html#message_type_eqb_correct"><span class="id" title="lemma">message_type_eqb_correct</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H1</span>. <span class="id" title="tactic">assumption</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="view_same_or_plus_one" class="idref" href="#view_same_or_plus_one"><span class="id" title="lemma">view_same_or_plus_one</span></a> : <br/>
&nbsp;&nbsp;<span class="id" title="keyword">forall</span> (<a id="tr:161" class="idref" href="#tr:161"><span class="id" title="binder">tr</span></a> : <a class="idref" href="Giskard.global.html#GTrace"><span class="id" title="definition">GTrace</span></a>) (<a id="i:162" class="idref" href="#i:162"><span class="id" title="binder">i</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>) (<a id="n:163" class="idref" href="#n:163"><span class="id" title="binder">n</span></a> : <a class="idref" href="Giskard.structures.html#node"><span class="id" title="axiom">node</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Giskard.global.html#protocol_trace"><span class="id" title="definition">protocol_trace</span></a> <a class="idref" href="Giskard.global.html#tr:161"><span class="id" title="variable">tr</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Lists.List.html#In"><span class="id" title="definition">In</span></a> <a class="idref" href="Giskard.global.html#n:163"><span class="id" title="variable">n</span></a> <a class="idref" href="Giskard.structures.html#participants"><span class="id" title="axiom">participants</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Giskard.structures.html#node_view"><span class="id" title="projection">node_view</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Datatypes.html#fst"><span class="id" title="definition">fst</span></a> (<a class="idref" href="Giskard.global.html#tr:161"><span class="id" title="variable">tr</span></a> <a class="idref" href="Giskard.global.html#i:162"><span class="id" title="variable">i</span></a>) <a class="idref" href="Giskard.global.html#n:163"><span class="id" title="variable">n</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="Giskard.structures.html#node_view"><span class="id" title="projection">node_view</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Datatypes.html#fst"><span class="id" title="definition">fst</span></a> (<a class="idref" href="Giskard.global.html#tr:161"><span class="id" title="variable">tr</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <a class="idref" href="Giskard.global.html#i:162"><span class="id" title="variable">i</span></a>)) <a class="idref" href="Giskard.global.html#n:163"><span class="id" title="variable">n</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Logic.html#f031fe1957c4a4a8e217aa46af2b4e25"><span class="id" title="notation">\/</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> (<a class="idref" href="Giskard.structures.html#node_view"><span class="id" title="projection">node_view</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Datatypes.html#fst"><span class="id" title="definition">fst</span></a> (<a class="idref" href="Giskard.global.html#tr:161"><span class="id" title="variable">tr</span></a> <a class="idref" href="Giskard.global.html#i:162"><span class="id" title="variable">i</span></a>) <a class="idref" href="Giskard.global.html#n:163"><span class="id" title="variable">n</span></a>)) <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="Giskard.structures.html#node_view"><span class="id" title="projection">node_view</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Datatypes.html#fst"><span class="id" title="definition">fst</span></a> (<a class="idref" href="Giskard.global.html#tr:161"><span class="id" title="variable">tr</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <a class="idref" href="Giskard.global.html#i:162"><span class="id" title="variable">i</span></a>)) <a class="idref" href="Giskard.global.html#n:163"><span class="id" title="variable">n</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">tr</span> <span class="id" title="var">i</span> <span class="id" title="var">n</span> <span class="id" title="var">H_prot</span> <span class="id" title="var">H_part</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> <span class="id" title="var">H_prot</span> <span class="id" title="keyword">as</span> <span class="id" title="var">H_prot_copy</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H_prot</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">_</span> <span class="id" title="var">H_prot</span>].<br/>
&nbsp;&nbsp;<span class="id" title="var">spec</span> <span class="id" title="var">H_prot</span> <span class="id" title="var">i</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H_prot</span> <span class="id" title="keyword">as</span> [[<span class="id" title="var">n0</span> [<span class="id" title="var">H_in0</span> [<span class="id" title="var">p0</span> [<span class="id" title="var">msg0</span> [<span class="id" title="var">lm0</span> [<span class="id" title="var">H_step</span> <span class="id" title="var">H_deliver</span>]]]]]] | <span class="id" title="var">H_timeout</span>].<br/>
&nbsp;&nbsp;- <span class="comment">(*&nbsp;In&nbsp;the&nbsp;normal&nbsp;transition&nbsp;case&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="Giskard.structures.html#node_eq_dec"><span class="id" title="definition">node_eq_dec</span></a> <span class="id" title="var">n0</span> <span class="id" title="var">n</span>) <span class="id" title="keyword">as</span> [<span class="id" title="var">H_same</span> | <span class="id" title="var">H_diff</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">rewrite</span> <span class="id" title="var">H_same</span> <span class="id" title="tactic">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">p0</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H_step</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">H_update</span> <span class="id" title="var">_</span>];<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">H_update</span>; <span class="id" title="tactic">simpl</span>; <span class="id" title="tactic">tauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">left</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">H_deliver</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<a class="idref" href="Giskard.global.html#protocol_trace_state_sane"><span class="id" title="lemma">protocol_trace_state_sane</span></a> <span class="id" title="var">H_prot_copy</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="Giskard.structures.html#node_eqb_comm"><span class="id" title="lemma">node_eqb_comm</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="Giskard.structures.html#node_eqb_no"><span class="id" title="lemma">node_eqb_no</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H_diff</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">H_diff</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="Giskard.structures.html#is_member_correct"><span class="id" title="lemma">is_member_correct</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H_part</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">H_part</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;- <span class="comment">(*&nbsp;In&nbsp;the&nbsp;timeout&nbsp;case&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">left</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">H_timeout</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="Giskard.structures.html#is_member_correct"><span class="id" title="lemma">is_member_correct</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H_part</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">H_part</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">reflexivity</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="counting_messages_inclusion" class="idref" href="#counting_messages_inclusion"><span class="id" title="lemma">counting_messages_inclusion</span></a>:<br/>
&nbsp;&nbsp;<span class="id" title="keyword">forall</span> (<a id="tr:164" class="idref" href="#tr:164"><span class="id" title="binder">tr</span></a> : <a class="idref" href="Giskard.global.html#GTrace"><span class="id" title="definition">GTrace</span></a>) (<a id="i:165" class="idref" href="#i:165"><span class="id" title="binder">i</span></a> <a id="j:166" class="idref" href="#j:166"><span class="id" title="binder">j</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>) (<a id="n:167" class="idref" href="#n:167"><span class="id" title="binder">n</span></a> : <a class="idref" href="Giskard.structures.html#node"><span class="id" title="axiom">node</span></a>) (<a id="msg:168" class="idref" href="#msg:168"><span class="id" title="binder">msg</span></a> : <a class="idref" href="Giskard.structures.html#message"><span class="id" title="record">message</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Giskard.global.html#protocol_trace"><span class="id" title="definition">protocol_trace</span></a> <a class="idref" href="Giskard.global.html#tr:164"><span class="id" title="variable">tr</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Lists.List.html#In"><span class="id" title="definition">In</span></a> <a class="idref" href="Giskard.global.html#n:167"><span class="id" title="variable">n</span></a> <a class="idref" href="Giskard.structures.html#participants"><span class="id" title="axiom">participants</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Giskard.global.html#i:165"><span class="id" title="variable">i</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Peano.html#cb53cf0ee22c036a03b4a9281c68b5a3"><span class="id" title="notation">&lt;=</span></a> <a class="idref" href="Giskard.global.html#j:166"><span class="id" title="variable">j</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Lists.List.html#In"><span class="id" title="definition">In</span></a> <a class="idref" href="Giskard.global.html#msg:168"><span class="id" title="variable">msg</span></a> (<a class="idref" href="Giskard.structures.html#counting_messages"><span class="id" title="projection">counting_messages</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Datatypes.html#fst"><span class="id" title="definition">fst</span></a> (<a class="idref" href="Giskard.global.html#tr:164"><span class="id" title="variable">tr</span></a> <a class="idref" href="Giskard.global.html#i:165"><span class="id" title="variable">i</span></a>) <a class="idref" href="Giskard.global.html#n:167"><span class="id" title="variable">n</span></a>)) <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Lists.List.html#In"><span class="id" title="definition">In</span></a> <a class="idref" href="Giskard.global.html#msg:168"><span class="id" title="variable">msg</span></a> (<a class="idref" href="Giskard.structures.html#counting_messages"><span class="id" title="projection">counting_messages</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Datatypes.html#fst"><span class="id" title="definition">fst</span></a> (<a class="idref" href="Giskard.global.html#tr:164"><span class="id" title="variable">tr</span></a> <a class="idref" href="Giskard.global.html#j:166"><span class="id" title="variable">j</span></a>) <a class="idref" href="Giskard.global.html#n:167"><span class="id" title="variable">n</span></a>)).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">tr</span> <span class="id" title="var">i</span> <span class="id" title="var">j</span> <span class="id" title="var">n</span> <span class="id" title="var">msg</span> <span class="id" title="var">H_prot</span> <span class="id" title="var">H_part</span> <span class="id" title="var">H_view</span> <span class="id" title="var">H_in</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">j</span> <span class="id" title="keyword">as</span> [|<span class="id" title="var">j</span> <span class="id" title="var">IHj</span>].<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">inversion</span> <span class="id" title="var">H_view</span>. <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H_prot</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">H_init</span> <span class="id" title="var">_</span>];<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">H_init</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H_in</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">H_in</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">assert</span> (<span class="id" title="var">i</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Peano.html#cb53cf0ee22c036a03b4a9281c68b5a3"><span class="id" title="notation">&lt;=</span></a> <span class="id" title="var">j</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Logic.html#f031fe1957c4a4a8e217aa46af2b4e25"><span class="id" title="notation">\/</span></a> <span class="id" title="var">i</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <span class="id" title="var">j</span>) <span class="id" title="tactic">by</span> <span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">H_le</span> | <span class="id" title="var">H_eq</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="var">spec</span> <span class="id" title="var">IHj</span> <span class="id" title="var">H_le</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">apply</span> <a class="idref" href="Giskard.global.html#counting_messages_monotonic"><span class="id" title="lemma">counting_messages_monotonic</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">subst</span>. <span class="id" title="tactic">assumption</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
For any two states with views v and (S v), we can always find the exact two
intermediate states where that view change occurred. 
</div>
<div class="code">
<span class="id" title="keyword">Lemma</span> <a id="wedged_in_between" class="idref" href="#wedged_in_between"><span class="id" title="lemma">wedged_in_between</span></a> :<br/>
&nbsp;&nbsp;<span class="id" title="keyword">forall</span> (<a id="tr:169" class="idref" href="#tr:169"><span class="id" title="binder">tr</span></a> : <a class="idref" href="Giskard.global.html#GTrace"><span class="id" title="definition">GTrace</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Giskard.global.html#protocol_trace"><span class="id" title="definition">protocol_trace</span></a> <a class="idref" href="Giskard.global.html#tr:169"><span class="id" title="variable">tr</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">forall</span> (<a id="i:170" class="idref" href="#i:170"><span class="id" title="binder">i</span></a> <a id="j:171" class="idref" href="#j:171"><span class="id" title="binder">j</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>) (<a id="n:172" class="idref" href="#n:172"><span class="id" title="binder">n</span></a> : <a class="idref" href="Giskard.structures.html#node"><span class="id" title="axiom">node</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Lists.List.html#In"><span class="id" title="definition">In</span></a> <a class="idref" href="Giskard.global.html#n:172"><span class="id" title="variable">n</span></a> <a class="idref" href="Giskard.structures.html#participants"><span class="id" title="axiom">participants</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Giskard.global.html#i:170"><span class="id" title="variable">i</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Peano.html#::nat_scope:x_'&lt;'_x"><span class="id" title="notation">&lt;</span></a> <a class="idref" href="Giskard.global.html#j:171"><span class="id" title="variable">j</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> (<a class="idref" href="Giskard.structures.html#node_view"><span class="id" title="projection">node_view</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Datatypes.html#fst"><span class="id" title="definition">fst</span></a> (<a class="idref" href="Giskard.global.html#tr:169"><span class="id" title="variable">tr</span></a> <a class="idref" href="Giskard.global.html#i:170"><span class="id" title="variable">i</span></a>) <a class="idref" href="Giskard.global.html#n:172"><span class="id" title="variable">n</span></a>)) <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="Giskard.structures.html#node_view"><span class="id" title="projection">node_view</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Datatypes.html#fst"><span class="id" title="definition">fst</span></a> (<a class="idref" href="Giskard.global.html#tr:169"><span class="id" title="variable">tr</span></a> <a class="idref" href="Giskard.global.html#j:171"><span class="id" title="variable">j</span></a>) <a class="idref" href="Giskard.global.html#n:172"><span class="id" title="variable">n</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">exists</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">(</span></a><a id="x:173" class="idref" href="#x:173"><span class="id" title="binder">x</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">),</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Giskard.global.html#i:170"><span class="id" title="variable">i</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Peano.html#e25b6ed2455c445c4a805315e6c2e053"><span class="id" title="notation">&lt;=</span></a> <a class="idref" href="Giskard.global.html#x:173"><span class="id" title="variable">x</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Peano.html#e25b6ed2455c445c4a805315e6c2e053"><span class="id" title="notation">&lt;=</span></a> <a class="idref" href="Giskard.global.html#j:171"><span class="id" title="variable">j</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Giskard.structures.html#node_view"><span class="id" title="projection">node_view</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Datatypes.html#fst"><span class="id" title="definition">fst</span></a> (<a class="idref" href="Giskard.global.html#tr:169"><span class="id" title="variable">tr</span></a> <a class="idref" href="Giskard.global.html#x:173"><span class="id" title="variable">x</span></a>) <a class="idref" href="Giskard.global.html#n:172"><span class="id" title="variable">n</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="Giskard.structures.html#node_view"><span class="id" title="projection">node_view</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Datatypes.html#fst"><span class="id" title="definition">fst</span></a> (<a class="idref" href="Giskard.global.html#tr:169"><span class="id" title="variable">tr</span></a> <a class="idref" href="Giskard.global.html#i:170"><span class="id" title="variable">i</span></a>) <a class="idref" href="Giskard.global.html#n:172"><span class="id" title="variable">n</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Giskard.structures.html#node_view"><span class="id" title="projection">node_view</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Datatypes.html#fst"><span class="id" title="definition">fst</span></a> (<a class="idref" href="Giskard.global.html#tr:169"><span class="id" title="variable">tr</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <a class="idref" href="Giskard.global.html#x:173"><span class="id" title="variable">x</span></a>)) <a class="idref" href="Giskard.global.html#n:172"><span class="id" title="variable">n</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="Giskard.structures.html#node_view"><span class="id" title="projection">node_view</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Datatypes.html#fst"><span class="id" title="definition">fst</span></a> (<a class="idref" href="Giskard.global.html#tr:169"><span class="id" title="variable">tr</span></a> <a class="idref" href="Giskard.global.html#j:171"><span class="id" title="variable">j</span></a>) <a class="idref" href="Giskard.global.html#n:172"><span class="id" title="variable">n</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">tr</span> <span class="id" title="var">H_prot</span> <span class="id" title="var">i</span> <span class="id" title="var">j</span> <span class="id" title="var">n</span> <span class="id" title="var">H_part</span> <span class="id" title="var">H_past</span> <span class="id" title="var">H_view</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">j</span> <span class="id" title="keyword">as</span> [|<span class="id" title="var">j</span> <span class="id" title="var">IH_prot</span>].<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">inversion</span> <span class="id" title="var">H_past</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">destruct</span> (<a class="idref" href="Giskard.global.html#view_same_or_plus_one"><span class="id" title="lemma">view_same_or_plus_one</span></a> <span class="id" title="var">j</span> <span class="id" title="var">n</span> <span class="id" title="var">H_prot</span> <span class="id" title="var">H_part</span>) <span class="id" title="keyword">as</span> [<span class="id" title="var">H_j_same</span> | <span class="id" title="var">H_j_next</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">assert</span> (<span class="id" title="var">i</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Peano.html#::nat_scope:x_'&lt;'_x"><span class="id" title="notation">&lt;</span></a> <span class="id" title="var">j</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Logic.html#f031fe1957c4a4a8e217aa46af2b4e25"><span class="id" title="notation">\/</span></a> <span class="id" title="var">i</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <span class="id" title="var">j</span>) <span class="id" title="tactic">by</span> <span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">H_lt</span> | <span class="id" title="var">H_eq</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="var">spec</span> <span class="id" title="var">IH_prot</span> <span class="id" title="var">H_lt</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">spec</span> <span class="id" title="var">IH_prot</span>. <span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">IH_prot</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">x</span> [<span class="id" title="var">H_rel</span> [<span class="id" title="var">H_view1</span> <span class="id" title="var">H_view2</span>]]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exists</span> <span class="id" title="var">x</span>; <span class="id" title="tactic">repeat</span> <span class="id" title="tactic">split</span>; <span class="id" title="tactic">try</span> <span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">subst</span>; <span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">clear</span> <span class="id" title="var">IH_prot</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exists</span> <span class="id" title="var">j</span>; <span class="id" title="tactic">repeat</span> <span class="id" title="tactic">split</span>; <span class="id" title="tactic">try</span> <span class="id" title="var">lia</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
For any view smaller than the current view for any node, we can find
the state at which that view change occurred 
</div>
<div class="code">
<span class="id" title="keyword">Lemma</span> <a id="strongly_wedged_in_between" class="idref" href="#strongly_wedged_in_between"><span class="id" title="lemma">strongly_wedged_in_between</span></a> :<br/>
&nbsp;&nbsp;<span class="id" title="keyword">forall</span> (<a id="tr:174" class="idref" href="#tr:174"><span class="id" title="binder">tr</span></a> : <a class="idref" href="Giskard.global.html#GTrace"><span class="id" title="definition">GTrace</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Giskard.global.html#protocol_trace"><span class="id" title="definition">protocol_trace</span></a> <a class="idref" href="Giskard.global.html#tr:174"><span class="id" title="variable">tr</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">forall</span> (<a id="i:175" class="idref" href="#i:175"><span class="id" title="binder">i</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>) (<a id="n:176" class="idref" href="#n:176"><span class="id" title="binder">n</span></a> : <a class="idref" href="Giskard.structures.html#node"><span class="id" title="axiom">node</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Lists.List.html#In"><span class="id" title="definition">In</span></a> <a class="idref" href="Giskard.global.html#n:176"><span class="id" title="variable">n</span></a> <a class="idref" href="Giskard.structures.html#participants"><span class="id" title="axiom">participants</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">forall</span> (<a id="v_past:177" class="idref" href="#v_past:177"><span class="id" title="binder">v_past</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Giskard.global.html#v_past:177"><span class="id" title="variable">v_past</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Peano.html#::nat_scope:x_'&lt;'_x"><span class="id" title="notation">&lt;</span></a> <a class="idref" href="Giskard.structures.html#node_view"><span class="id" title="projection">node_view</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Datatypes.html#fst"><span class="id" title="definition">fst</span></a> (<a class="idref" href="Giskard.global.html#tr:174"><span class="id" title="variable">tr</span></a> <a class="idref" href="Giskard.global.html#i:175"><span class="id" title="variable">i</span></a>) <a class="idref" href="Giskard.global.html#n:176"><span class="id" title="variable">n</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">exists</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">(</span></a><a id="i_past:178" class="idref" href="#i_past:178"><span class="id" title="binder">i_past</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">),</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Giskard.global.html#i_past:178"><span class="id" title="variable">i_past</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Peano.html#::nat_scope:x_'&lt;'_x"><span class="id" title="notation">&lt;</span></a> <a class="idref" href="Giskard.global.html#i:175"><span class="id" title="variable">i</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Giskard.structures.html#node_view"><span class="id" title="projection">node_view</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Datatypes.html#fst"><span class="id" title="definition">fst</span></a> (<a class="idref" href="Giskard.global.html#tr:174"><span class="id" title="variable">tr</span></a> <a class="idref" href="Giskard.global.html#i_past:178"><span class="id" title="variable">i_past</span></a>) <a class="idref" href="Giskard.global.html#n:176"><span class="id" title="variable">n</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="Giskard.global.html#v_past:177"><span class="id" title="variable">v_past</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Giskard.structures.html#node_view"><span class="id" title="projection">node_view</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Datatypes.html#fst"><span class="id" title="definition">fst</span></a> (<a class="idref" href="Giskard.global.html#tr:174"><span class="id" title="variable">tr</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <a class="idref" href="Giskard.global.html#i_past:178"><span class="id" title="variable">i_past</span></a>)) <a class="idref" href="Giskard.global.html#n:176"><span class="id" title="variable">n</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <a class="idref" href="Giskard.global.html#v_past:177"><span class="id" title="variable">v_past</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">tr</span> <span class="id" title="var">H_prot</span> <span class="id" title="var">i</span> <span class="id" title="var">n</span> <span class="id" title="var">H_part</span> <span class="id" title="var">v_past</span> <span class="id" title="var">H_past</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">i</span> <span class="id" title="keyword">as</span> [|<span class="id" title="var">i</span> <span class="id" title="var">IH_prot</span>].<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">destruct</span> <span class="id" title="var">H_prot</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">H_init</span> <span class="id" title="var">_</span>];<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">H_init</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H_past</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">H_past</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">destruct</span> (<a class="idref" href="Giskard.global.html#view_same_or_plus_one"><span class="id" title="lemma">view_same_or_plus_one</span></a> <span class="id" title="var">i</span> <span class="id" title="var">n</span> <span class="id" title="var">H_prot</span> <span class="id" title="var">H_part</span>) <span class="id" title="keyword">as</span> [<span class="id" title="var">H_i_same</span> | <span class="id" title="var">H_i_next</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="var">spec</span> <span class="id" title="var">IH_prot</span>. <span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">IH_prot</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">x</span> [<span class="id" title="var">H_rel</span> [<span class="id" title="var">H_view1</span> <span class="id" title="var">H_view2</span>]]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exists</span> <span class="id" title="var">x</span>; <span class="id" title="tactic">repeat</span> <span class="id" title="tactic">split</span>; <span class="id" title="tactic">try</span> <span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">H_i_next</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H_past</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">v_past</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="Giskard.structures.html#node_view"><span class="id" title="projection">node_view</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Datatypes.html#fst"><span class="id" title="definition">fst</span></a> (<span class="id" title="var">tr</span> <span class="id" title="var">i</span>) <span class="id" title="var">n</span>) <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Logic.html#f031fe1957c4a4a8e217aa46af2b4e25"><span class="id" title="notation">\/</span></a> <span class="id" title="var">v_past</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Peano.html#::nat_scope:x_'&lt;'_x"><span class="id" title="notation">&lt;</span></a> <a class="idref" href="Giskard.structures.html#node_view"><span class="id" title="projection">node_view</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Datatypes.html#fst"><span class="id" title="definition">fst</span></a> (<span class="id" title="var">tr</span> <span class="id" title="var">i</span>) <span class="id" title="var">n</span>)) <span class="id" title="tactic">by</span> <span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">H_eq</span> | <span class="id" title="var">H_lt</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">subst</span>. <span class="id" title="tactic">clear</span> <span class="id" title="var">IH_prot</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exists</span> <span class="id" title="var">i</span>; <span class="id" title="tactic">repeat</span> <span class="id" title="tactic">split</span>; <span class="id" title="tactic">try</span> <span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="var">spec</span> <span class="id" title="var">IH_prot</span>. <span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">IH_prot</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">x</span> [<span class="id" title="var">H_rel</span> [<span class="id" title="var">H_view1</span> <span class="id" title="var">H_view2</span>]]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exists</span> <span class="id" title="var">x</span>; <span class="id" title="tactic">repeat</span> <span class="id" title="tactic">split</span>; <span class="id" title="tactic">try</span> <span class="id" title="var">lia</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="state_view_morphism" class="idref" href="#state_view_morphism"><span class="id" title="lemma">state_view_morphism</span></a>:<br/>
&nbsp;&nbsp;<span class="id" title="keyword">forall</span> <a id="tr:179" class="idref" href="#tr:179"><span class="id" title="binder">tr</span></a> : <a class="idref" href="Giskard.global.html#GTrace"><span class="id" title="definition">GTrace</span></a>,<br/>
&nbsp;&nbsp;<a class="idref" href="Giskard.global.html#protocol_trace"><span class="id" title="definition">protocol_trace</span></a> <a class="idref" href="Giskard.global.html#tr:179"><span class="id" title="variable">tr</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<span class="id" title="keyword">forall</span> (<a id="i1:180" class="idref" href="#i1:180"><span class="id" title="binder">i1</span></a> <a id="i2:181" class="idref" href="#i2:181"><span class="id" title="binder">i2</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>) (<a id="n:182" class="idref" href="#n:182"><span class="id" title="binder">n</span></a> : <a class="idref" href="Giskard.structures.html#node"><span class="id" title="axiom">node</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Lists.List.html#In"><span class="id" title="definition">In</span></a> <a class="idref" href="Giskard.global.html#n:182"><span class="id" title="variable">n</span></a> <a class="idref" href="Giskard.structures.html#participants"><span class="id" title="axiom">participants</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Giskard.structures.html#node_view"><span class="id" title="projection">node_view</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Datatypes.html#fst"><span class="id" title="definition">fst</span></a> (<a class="idref" href="Giskard.global.html#tr:179"><span class="id" title="variable">tr</span></a> <a class="idref" href="Giskard.global.html#i1:180"><span class="id" title="variable">i1</span></a>) <a class="idref" href="Giskard.global.html#n:182"><span class="id" title="variable">n</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Peano.html#::nat_scope:x_'&lt;'_x"><span class="id" title="notation">&lt;</span></a> <a class="idref" href="Giskard.structures.html#node_view"><span class="id" title="projection">node_view</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Datatypes.html#fst"><span class="id" title="definition">fst</span></a> (<a class="idref" href="Giskard.global.html#tr:179"><span class="id" title="variable">tr</span></a> <a class="idref" href="Giskard.global.html#i2:181"><span class="id" title="variable">i2</span></a>) <a class="idref" href="Giskard.global.html#n:182"><span class="id" title="variable">n</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Giskard.global.html#i1:180"><span class="id" title="variable">i1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Peano.html#::nat_scope:x_'&lt;'_x"><span class="id" title="notation">&lt;</span></a> <a class="idref" href="Giskard.global.html#i2:181"><span class="id" title="variable">i2</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">tr</span> <span class="id" title="var">H_prot</span> <span class="id" title="var">i1</span> <span class="id" title="var">i2</span> <span class="id" title="var">n</span> <span class="id" title="var">H_part</span> <span class="id" title="var">H_lt</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">i2</span> <span class="id" title="keyword">as</span> [|<span class="id" title="var">i2</span> <span class="id" title="var">IH_prot</span>].<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">destruct</span> <span class="id" title="var">H_prot</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">H_init</span> <span class="id" title="var">_</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">H_init</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H_lt</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">H_lt</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">destruct</span> (<a class="idref" href="Giskard.global.html#view_same_or_plus_one"><span class="id" title="lemma">view_same_or_plus_one</span></a> <span class="id" title="var">i2</span> <span class="id" title="var">n</span> <span class="id" title="var">H_prot</span> <span class="id" title="var">H_part</span>) <span class="id" title="keyword">as</span> [<span class="id" title="var">H_same</span> | <span class="id" title="var">H_incr</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">H_same</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H_lt</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">spec</span> <span class="id" title="var">IH_prot</span> <span class="id" title="var">H_lt</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">H_incr</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H_lt</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<a class="idref" href="Giskard.structures.html#node_view"><span class="id" title="projection">node_view</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Datatypes.html#fst"><span class="id" title="definition">fst</span></a> (<span class="id" title="var">tr</span> <span class="id" title="var">i1</span>) <span class="id" title="var">n</span>) <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="Giskard.structures.html#node_view"><span class="id" title="projection">node_view</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Datatypes.html#fst"><span class="id" title="definition">fst</span></a> (<span class="id" title="var">tr</span> <span class="id" title="var">i2</span>) <span class="id" title="var">n</span>) <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Logic.html#f031fe1957c4a4a8e217aa46af2b4e25"><span class="id" title="notation">\/</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Giskard.structures.html#node_view"><span class="id" title="projection">node_view</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Datatypes.html#fst"><span class="id" title="definition">fst</span></a> (<span class="id" title="var">tr</span> <span class="id" title="var">i1</span>) <span class="id" title="var">n</span>) <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Peano.html#::nat_scope:x_'&lt;'_x"><span class="id" title="notation">&lt;</span></a> <a class="idref" href="Giskard.structures.html#node_view"><span class="id" title="projection">node_view</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Datatypes.html#fst"><span class="id" title="definition">fst</span></a> (<span class="id" title="var">tr</span> <span class="id" title="var">i2</span>) <span class="id" title="var">n</span>)) <span class="id" title="tactic">by</span> <span class="id" title="var">lia</span>; <span class="id" title="tactic">clear</span> <span class="id" title="var">H_lt</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">H_eq</span> | <span class="id" title="var">H_lt</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">clear</span> <span class="id" title="var">IH_prot</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;View&nbsp;change&nbsp;occurred&nbsp;from&nbsp;i2&nbsp;to&nbsp;S&nbsp;i2&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;i1&nbsp;is&nbsp;in&nbsp;the&nbsp;same&nbsp;view&nbsp;as&nbsp;i2&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">H_eq</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H_incr</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<a class="idref" href="Giskard.structures.html#node_view"><span class="id" title="projection">node_view</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Datatypes.html#fst"><span class="id" title="definition">fst</span></a> (<span class="id" title="var">tr</span> <span class="id" title="var">i1</span>) <span class="id" title="var">n</span>) <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Peano.html#::nat_scope:x_'&lt;'_x"><span class="id" title="notation">&lt;</span></a> <a class="idref" href="Giskard.structures.html#node_view"><span class="id" title="projection">node_view</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Datatypes.html#fst"><span class="id" title="definition">fst</span></a> (<span class="id" title="var">tr</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <span class="id" title="var">i2</span>)) <span class="id" title="var">n</span>)) <span class="id" title="tactic">by</span> <span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">H_useful</span> := <a class="idref" href="Giskard.global.html#view_state_morphism"><span class="id" title="lemma">view_state_morphism</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">spec</span> <span class="id" title="var">H_useful</span> <span class="id" title="var">tr</span> <span class="id" title="var">H_prot</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <span class="id" title="var">i2</span>) <span class="id" title="var">i1</span> <span class="id" title="var">n</span> <span class="id" title="var">H_part</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="Giskard.lib.html#modus_tollens"><span class="id" title="lemma">modus_tollens</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H_useful</span>. <span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="var">spec</span> <span class="id" title="var">IH_prot</span> <span class="id" title="var">H_lt</span>; <span class="id" title="var">lia</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="participation_rights_global" class="idref" href="#participation_rights_global"><span class="id" title="lemma">participation_rights_global</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">forall</span> (<a id="tr:183" class="idref" href="#tr:183"><span class="id" title="binder">tr</span></a> : <a class="idref" href="Giskard.global.html#GTrace"><span class="id" title="definition">GTrace</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Giskard.global.html#protocol_trace"><span class="id" title="definition">protocol_trace</span></a> <a class="idref" href="Giskard.global.html#tr:183"><span class="id" title="variable">tr</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">forall</span> (<a id="i:184" class="idref" href="#i:184"><span class="id" title="binder">i</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>) (<a id="msg:185" class="idref" href="#msg:185"><span class="id" title="binder">msg</span></a> : <a class="idref" href="Giskard.structures.html#message"><span class="id" title="record">message</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Lists.List.html#In"><span class="id" title="definition">In</span></a> <a class="idref" href="Giskard.global.html#msg:185"><span class="id" title="variable">msg</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Datatypes.html#snd"><span class="id" title="definition">snd</span></a> (<a class="idref" href="Giskard.global.html#tr:183"><span class="id" title="variable">tr</span></a> <a class="idref" href="Giskard.global.html#i:184"><span class="id" title="variable">i</span></a>)) <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Lists.List.html#In"><span class="id" title="definition">In</span></a> (<a class="idref" href="Giskard.structures.html#get_sender"><span class="id" title="projection">get_sender</span></a> <a class="idref" href="Giskard.global.html#msg:185"><span class="id" title="variable">msg</span></a>) <a class="idref" href="Giskard.structures.html#participants"><span class="id" title="axiom">participants</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">tr</span> <span class="id" title="var">H_prot</span> <span class="id" title="var">i</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">i</span> <span class="id" title="keyword">as</span> [|<span class="id" title="var">i</span> <span class="id" title="var">IH_prot</span>]; <span class="id" title="tactic">intros</span> <span class="id" title="var">msg</span> <span class="id" title="var">H_in</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">destruct</span> <span class="id" title="var">H_prot</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">H_init</span> <span class="id" title="var">_</span>];<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">H_init</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H_in</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">H_in</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">destruct</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Lists.List.html#In_dec"><span class="id" title="abbreviation">In_dec</span></a> <a class="idref" href="Giskard.structures.html#message_eq_dec"><span class="id" title="definition">message_eq_dec</span></a> <span class="id" title="var">msg</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Datatypes.html#snd"><span class="id" title="definition">snd</span></a> (<span class="id" title="var">tr</span> <span class="id" title="var">i</span>))) <span class="id" title="keyword">as</span> [<span class="id" title="var">H_old</span> | <span class="id" title="var">H_new</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="var">now</span> <span class="id" title="tactic">apply</span> <span class="id" title="var">IH_prot</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">assert</span> (<span class="id" title="var">H_prot_copy</span> := <span class="id" title="var">H_prot</span>); <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H_prot</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">_</span> <span class="id" title="var">H_prot</span>];<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">spec</span> <span class="id" title="var">H_prot</span> <span class="id" title="var">i</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H_prot</span> <span class="id" title="keyword">as</span> [[<span class="id" title="var">n0</span> [<span class="id" title="var">H_in0</span> [<span class="id" title="var">p0</span> [<span class="id" title="var">msg0</span> [<span class="id" title="var">lm0</span> [<span class="id" title="var">H_step</span> <span class="id" title="var">H_deliver</span>]]]]]] | <span class="id" title="var">H_timeout</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">H_deliver</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H_in</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H_in</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Lists.List.html#in_app_iff"><span class="id" title="lemma">in_app_iff</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H_in</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H_in</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">H_in</span> | <span class="id" title="var">H_in</span>];<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">try</span> <span class="id" title="var">contradiction</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<a class="idref" href="Giskard.structures.html#get_sender"><span class="id" title="projection">get_sender</span></a> <span class="id" title="var">msg</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <span class="id" title="var">n0</span>) <span class="id" title="tactic">by</span> <span class="id" title="var">now</span> <span class="id" title="tactic">apply</span> <a class="idref" href="Giskard.global.html#delivered_means_sender_made_transition"><span class="id" title="lemma">delivered_means_sender_made_transition</span></a> <span class="id" title="keyword">with</span> <span class="id" title="var">tr</span> <span class="id" title="var">i</span> <span class="id" title="var">lm0</span> <span class="id" title="var">p0</span> <span class="id" title="var">msg0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">H_timeout</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H_in</span>. <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H_in</span>. <span class="id" title="var">contradiction</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="participation_rights" class="idref" href="#participation_rights"><span class="id" title="lemma">participation_rights</span></a> :<br/>
&nbsp;&nbsp;<span class="id" title="keyword">forall</span> (<a id="tr:186" class="idref" href="#tr:186"><span class="id" title="binder">tr</span></a> : <a class="idref" href="Giskard.global.html#GTrace"><span class="id" title="definition">GTrace</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Giskard.global.html#protocol_trace"><span class="id" title="definition">protocol_trace</span></a> <a class="idref" href="Giskard.global.html#tr:186"><span class="id" title="variable">tr</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">forall</span> (<a id="n:187" class="idref" href="#n:187"><span class="id" title="binder">n</span></a> : <a class="idref" href="Giskard.structures.html#node"><span class="id" title="axiom">node</span></a>) (<a id="i:188" class="idref" href="#i:188"><span class="id" title="binder">i</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>) (<a id="msg:189" class="idref" href="#msg:189"><span class="id" title="binder">msg</span></a> : <a class="idref" href="Giskard.structures.html#message"><span class="id" title="record">message</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Lists.List.html#In"><span class="id" title="definition">In</span></a> <a class="idref" href="Giskard.global.html#n:187"><span class="id" title="variable">n</span></a> <a class="idref" href="Giskard.structures.html#participants"><span class="id" title="axiom">participants</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Lists.List.html#In"><span class="id" title="definition">In</span></a> <a class="idref" href="Giskard.global.html#msg:189"><span class="id" title="variable">msg</span></a> (<a class="idref" href="Giskard.structures.html#counting_messages"><span class="id" title="projection">counting_messages</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Datatypes.html#fst"><span class="id" title="definition">fst</span></a> (<a class="idref" href="Giskard.global.html#tr:186"><span class="id" title="variable">tr</span></a> <a class="idref" href="Giskard.global.html#i:188"><span class="id" title="variable">i</span></a>) <a class="idref" href="Giskard.global.html#n:187"><span class="id" title="variable">n</span></a>)) <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Lists.List.html#In"><span class="id" title="definition">In</span></a> (<a class="idref" href="Giskard.structures.html#get_sender"><span class="id" title="projection">get_sender</span></a> <a class="idref" href="Giskard.global.html#msg:189"><span class="id" title="variable">msg</span></a>) <a class="idref" href="Giskard.structures.html#participants"><span class="id" title="axiom">participants</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">tr</span> <span class="id" title="var">H_prot</span> <span class="id" title="var">n</span> <span class="id" title="var">i</span> <span class="id" title="var">msg</span> <span class="id" title="var">H_part</span> <span class="id" title="var">H_in</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="Giskard.global.html#processed_means_sent_global"><span class="id" title="lemma">processed_means_sent_global</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H_in</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">try</span> <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">apply</span> <a class="idref" href="Giskard.global.html#participation_rights_global"><span class="id" title="lemma">participation_rights_global</span></a> <span class="id" title="keyword">with</span> <span class="id" title="var">tr</span> <span class="id" title="var">i</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
Any message property that holds for processed messages holds for sent messages 
</div>
<div class="code">
<span class="id" title="keyword">Lemma</span> <a id="lift_sent_to_received" class="idref" href="#lift_sent_to_received"><span class="id" title="lemma">lift_sent_to_received</span></a> :<br/>
&nbsp;&nbsp;<span class="id" title="keyword">forall</span> (<a id="P:190" class="idref" href="#P:190"><span class="id" title="binder">P</span></a> : <a class="idref" href="Giskard.structures.html#message"><span class="id" title="record">message</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <span class="id" title="keyword">Prop</span>), <br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">(</span></a><span class="id" title="keyword">forall</span> (<a id="tr:195" class="idref" href="#tr:195"><span class="id" title="binder">tr</span></a> : <a class="idref" href="Giskard.global.html#GTrace"><span class="id" title="definition">GTrace</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Giskard.global.html#protocol_trace"><span class="id" title="definition">protocol_trace</span></a> <a class="idref" href="Giskard.global.html#tr:195"><span class="id" title="variable">tr</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">forall</span> (<a id="n:196" class="idref" href="#n:196"><span class="id" title="binder">n</span></a> : <a class="idref" href="Giskard.structures.html#node"><span class="id" title="axiom">node</span></a>) (<a id="i:197" class="idref" href="#i:197"><span class="id" title="binder">i</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Lists.List.html#In"><span class="id" title="definition">In</span></a> <a class="idref" href="Giskard.global.html#n:196"><span class="id" title="variable">n</span></a> <a class="idref" href="Giskard.structures.html#participants"><span class="id" title="axiom">participants</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">forall</span> (<a id="msg:198" class="idref" href="#msg:198"><span class="id" title="binder">msg</span></a> : <a class="idref" href="Giskard.structures.html#message"><span class="id" title="record">message</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Lists.List.html#In"><span class="id" title="definition">In</span></a> <a class="idref" href="Giskard.global.html#msg:198"><span class="id" title="variable">msg</span></a> (<a class="idref" href="Giskard.structures.html#out_messages"><span class="id" title="projection">out_messages</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Datatypes.html#fst"><span class="id" title="definition">fst</span></a> (<a class="idref" href="Giskard.global.html#tr:195"><span class="id" title="variable">tr</span></a> <a class="idref" href="Giskard.global.html#i:197"><span class="id" title="variable">i</span></a>) <a class="idref" href="Giskard.global.html#n:196"><span class="id" title="variable">n</span></a>)) <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Giskard.global.html#P:190"><span class="id" title="variable">P</span></a> <a class="idref" href="Giskard.global.html#msg:198"><span class="id" title="variable">msg</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">(</span></a><span class="id" title="keyword">forall</span> (<a id="tr:191" class="idref" href="#tr:191"><span class="id" title="binder">tr</span></a> : <a class="idref" href="Giskard.global.html#GTrace"><span class="id" title="definition">GTrace</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Giskard.global.html#protocol_trace"><span class="id" title="definition">protocol_trace</span></a> <a class="idref" href="Giskard.global.html#tr:191"><span class="id" title="variable">tr</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">forall</span> (<a id="n:192" class="idref" href="#n:192"><span class="id" title="binder">n</span></a> : <a class="idref" href="Giskard.structures.html#node"><span class="id" title="axiom">node</span></a>) (<a id="i:193" class="idref" href="#i:193"><span class="id" title="binder">i</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Lists.List.html#In"><span class="id" title="definition">In</span></a> <a class="idref" href="Giskard.global.html#n:192"><span class="id" title="variable">n</span></a> <a class="idref" href="Giskard.structures.html#participants"><span class="id" title="axiom">participants</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">forall</span> (<a id="msg:194" class="idref" href="#msg:194"><span class="id" title="binder">msg</span></a> : <a class="idref" href="Giskard.structures.html#message"><span class="id" title="record">message</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Lists.List.html#In"><span class="id" title="definition">In</span></a> <a class="idref" href="Giskard.global.html#msg:194"><span class="id" title="variable">msg</span></a> (<a class="idref" href="Giskard.structures.html#counting_messages"><span class="id" title="projection">counting_messages</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Datatypes.html#fst"><span class="id" title="definition">fst</span></a> (<a class="idref" href="Giskard.global.html#tr:191"><span class="id" title="variable">tr</span></a> <a class="idref" href="Giskard.global.html#i:193"><span class="id" title="variable">i</span></a>) <a class="idref" href="Giskard.global.html#n:192"><span class="id" title="variable">n</span></a>)) <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Giskard.global.html#P:190"><span class="id" title="variable">P</span></a> <a class="idref" href="Giskard.global.html#msg:194"><span class="id" title="variable">msg</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">)</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">P</span> <span class="id" title="var">H_helper</span> <span class="id" title="var">tr</span> <span class="id" title="var">H_prot</span> <span class="id" title="var">n</span> <span class="id" title="var">i</span> <span class="id" title="var">H_part</span> <span class="id" title="var">msg</span> <span class="id" title="var">H_in</span>.<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;n&nbsp;processed&nbsp;msg&nbsp;-&gt;&nbsp;n&nbsp;received&nbsp;msg&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">H_useful</span> := <a class="idref" href="Giskard.global.html#processed_means_past_received"><span class="id" title="lemma">processed_means_past_received</span></a> <span class="id" title="var">H_prot</span> <span class="id" title="var">i</span> <span class="id" title="var">n</span> <span class="id" title="var">msg</span> <span class="id" title="var">H_part</span> <span class="id" title="var">H_in</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H_useful</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">i_past</span> [<span class="id" title="var">H_past</span> <span class="id" title="var">H_received</span>]].<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;n&nbsp;received&nbsp;msg&nbsp;-&gt;&nbsp;msg&nbsp;in&nbsp;global&nbsp;sent&nbsp;buffer&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">H_useful2</span> := <a class="idref" href="Giskard.global.html#delivered_means_sent_global"><span class="id" title="lemma">delivered_means_sent_global</span></a> <span class="id" title="var">H_prot</span> <span class="id" title="var">i_past</span> <span class="id" title="var">n</span> <span class="id" title="var">msg</span> <span class="id" title="var">H_part</span> <span class="id" title="var">H_received</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">H_part_sender</span> : <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Lists.List.html#In"><span class="id" title="definition">In</span></a> (<a class="idref" href="Giskard.structures.html#get_sender"><span class="id" title="projection">get_sender</span></a> <span class="id" title="var">msg</span>) <a class="idref" href="Giskard.structures.html#participants"><span class="id" title="axiom">participants</span></a>) <span class="id" title="tactic">by</span> <span class="id" title="var">now</span> <span class="id" title="tactic">apply</span> (<a class="idref" href="Giskard.global.html#participation_rights"><span class="id" title="lemma">participation_rights</span></a> <span class="id" title="var">H_prot</span> <span class="id" title="var">n</span> <span class="id" title="var">i</span> <span class="id" title="var">msg</span> <span class="id" title="var">H_part</span> <span class="id" title="var">H_in</span>).<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;msg&nbsp;in&nbsp;global&nbsp;sent&nbsp;buffer&nbsp;-&gt;&nbsp;msg&nbsp;in&nbsp;local&nbsp;sent&nbsp;buffer&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">H_useful3</span> := @<a class="idref" href="Giskard.global.html#global_local_out_if"><span class="id" title="lemma">global_local_out_if</span></a> <span class="id" title="var">tr</span> <span class="id" title="var">H_prot</span> <span class="id" title="var">i_past</span> <span class="id" title="var">msg</span> (<a class="idref" href="Giskard.structures.html#get_sender"><span class="id" title="projection">get_sender</span></a> <span class="id" title="var">msg</span>) <span class="id" title="var">H_part_sender</span>).<br/>
&nbsp;&nbsp;<span class="id" title="var">spec</span> <span class="id" title="var">H_useful3</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Lists.List.html#filter_In"><span class="id" title="lemma">filter_In</span></a>; <span class="id" title="tactic">split</span>; <span class="id" title="tactic">try</span> <span class="id" title="var">easy</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">rewrite</span> <a class="idref" href="Giskard.structures.html#node_eqb_refl"><span class="id" title="lemma">node_eqb_refl</span></a>.<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;Now&nbsp;apply&nbsp;assumption&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">apply</span> <span class="id" title="var">H_helper</span> <span class="id" title="keyword">with</span> <span class="id" title="var">tr</span> (<a class="idref" href="Giskard.structures.html#get_sender"><span class="id" title="projection">get_sender</span></a> <span class="id" title="var">msg</span>) <span class="id" title="var">i_past</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="sent_PrepareVote_means_received_PrepareBlock" class="idref" href="#sent_PrepareVote_means_received_PrepareBlock"><span class="id" title="lemma">sent_PrepareVote_means_received_PrepareBlock</span></a> :<br/>
&nbsp;&nbsp;<span class="id" title="keyword">forall</span> (<a id="tr:199" class="idref" href="#tr:199"><span class="id" title="binder">tr</span></a> : <a class="idref" href="Giskard.global.html#GTrace"><span class="id" title="definition">GTrace</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Giskard.global.html#protocol_trace"><span class="id" title="definition">protocol_trace</span></a> <a class="idref" href="Giskard.global.html#tr:199"><span class="id" title="variable">tr</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">forall</span> (<a id="n:200" class="idref" href="#n:200"><span class="id" title="binder">n</span></a> : <a class="idref" href="Giskard.structures.html#node"><span class="id" title="axiom">node</span></a>) (<a id="i:201" class="idref" href="#i:201"><span class="id" title="binder">i</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>) (<a id="msg:202" class="idref" href="#msg:202"><span class="id" title="binder">msg</span></a> : <a class="idref" href="Giskard.structures.html#message"><span class="id" title="record">message</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Lists.List.html#In"><span class="id" title="definition">In</span></a> <a class="idref" href="Giskard.global.html#n:200"><span class="id" title="variable">n</span></a> <a class="idref" href="Giskard.structures.html#participants"><span class="id" title="axiom">participants</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Lists.List.html#In"><span class="id" title="definition">In</span></a> <a class="idref" href="Giskard.global.html#msg:202"><span class="id" title="variable">msg</span></a> (<a class="idref" href="Giskard.structures.html#out_messages"><span class="id" title="projection">out_messages</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Datatypes.html#fst"><span class="id" title="definition">fst</span></a> (<a class="idref" href="Giskard.global.html#tr:199"><span class="id" title="variable">tr</span></a> <a class="idref" href="Giskard.global.html#i:201"><span class="id" title="variable">i</span></a>) <a class="idref" href="Giskard.global.html#n:200"><span class="id" title="variable">n</span></a>)) <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Giskard.structures.html#get_message_type"><span class="id" title="projection">get_message_type</span></a> <a class="idref" href="Giskard.global.html#msg:202"><span class="id" title="variable">msg</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="Giskard.structures.html#PrepareVote"><span class="id" title="constructor">PrepareVote</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">exists</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">(</span></a><a id="msg':203" class="idref" href="#msg':203"><span class="id" title="binder">msg'</span></a> : <a class="idref" href="Giskard.structures.html#message"><span class="id" title="record">message</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">),</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Lists.List.html#In"><span class="id" title="definition">In</span></a> <a class="idref" href="Giskard.global.html#msg':203"><span class="id" title="variable">msg'</span></a> (<a class="idref" href="Giskard.structures.html#counting_messages"><span class="id" title="projection">counting_messages</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Datatypes.html#fst"><span class="id" title="definition">fst</span></a> (<a class="idref" href="Giskard.global.html#tr:199"><span class="id" title="variable">tr</span></a> <a class="idref" href="Giskard.global.html#i:201"><span class="id" title="variable">i</span></a>) <a class="idref" href="Giskard.global.html#n:200"><span class="id" title="variable">n</span></a>)) <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Giskard.structures.html#get_message_type"><span class="id" title="projection">get_message_type</span></a> <a class="idref" href="Giskard.global.html#msg':203"><span class="id" title="variable">msg'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="Giskard.structures.html#PrepareBlock"><span class="id" title="constructor">PrepareBlock</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Giskard.structures.html#get_block"><span class="id" title="projection">get_block</span></a> <a class="idref" href="Giskard.global.html#msg':203"><span class="id" title="variable">msg'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="Giskard.structures.html#get_block"><span class="id" title="projection">get_block</span></a> <a class="idref" href="Giskard.global.html#msg:202"><span class="id" title="variable">msg</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Giskard.structures.html#get_view"><span class="id" title="projection">get_view</span></a> <a class="idref" href="Giskard.global.html#msg':203"><span class="id" title="variable">msg'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="Giskard.structures.html#get_view"><span class="id" title="projection">get_view</span></a> <a class="idref" href="Giskard.global.html#msg:202"><span class="id" title="variable">msg</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">tr</span> <span class="id" title="var">H_prot</span> <span class="id" title="var">n</span> <span class="id" title="var">i</span> <span class="id" title="var">msg</span> <span class="id" title="var">H_part</span> <span class="id" title="var">H_sent</span> <span class="id" title="var">H_type</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">generalize</span> <span class="id" title="tactic">dependent</span> <span class="id" title="var">msg</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">i</span> <span class="id" title="keyword">as</span> [|<span class="id" title="var">i</span> <span class="id" title="var">IH_prot</span>]; <span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">destruct</span> <span class="id" title="var">H_prot</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">H_init</span> <span class="id" title="var">_</span>];<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">H_init</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H_sent</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">H_sent</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">destruct</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Lists.List.html#In_dec"><span class="id" title="abbreviation">In_dec</span></a> <a class="idref" href="Giskard.structures.html#message_eq_dec"><span class="id" title="definition">message_eq_dec</span></a> <span class="id" title="var">msg</span> (<a class="idref" href="Giskard.structures.html#out_messages"><span class="id" title="projection">out_messages</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Datatypes.html#fst"><span class="id" title="definition">fst</span></a> (<span class="id" title="var">tr</span> <span class="id" title="var">i</span>) <span class="id" title="var">n</span>))) <span class="id" title="keyword">as</span> [<span class="id" title="var">H_old</span> | <span class="id" title="var">H_new</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="var">spec</span> <span class="id" title="var">IH_prot</span> <span class="id" title="var">msg</span> <span class="id" title="var">H_old</span> <span class="id" title="var">H_type</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">IH_prot</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">msg'</span> <span class="id" title="var">IH_prot</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exists</span> <span class="id" title="var">msg'</span>; <span class="id" title="tactic">repeat</span> <span class="id" title="tactic">split</span>; <span class="id" title="tactic">try</span> <span class="id" title="tactic">tauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">apply</span> <a class="idref" href="Giskard.global.html#counting_messages_monotonic"><span class="id" title="lemma">counting_messages_monotonic</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">clear</span> <span class="id" title="var">IH_prot</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">H_prot_copy</span> := <span class="id" title="var">H_prot</span>); <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H_prot</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">_</span> <span class="id" title="var">H_prot</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">spec</span> <span class="id" title="var">H_prot</span> <span class="id" title="var">i</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H_prot</span> <span class="id" title="keyword">as</span> [[<span class="id" title="var">n0</span> [<span class="id" title="var">H_in0</span> [<span class="id" title="var">p0</span> [<span class="id" title="var">msg0</span> [<span class="id" title="var">lm0</span> [<span class="id" title="var">H_step</span> <span class="id" title="var">H_deliver</span>]]]]]] | <span class="id" title="var">H_timeout</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;Establishing&nbsp;that&nbsp;n&nbsp;must&nbsp;be&nbsp;in&nbsp;lm0&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Lists.List.html#In"><span class="id" title="definition">In</span></a> <span class="id" title="var">msg</span> <span class="id" title="var">lm0</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<a class="idref" href="Giskard.global.html#out_messages_change_means_sent"><span class="id" title="lemma">out_messages_change_means_sent</span></a> <span class="id" title="var">H_prot_copy</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">H_in0</span> <span class="id" title="var">H_deliver</span> <span class="id" title="var">H_step</span> <span class="id" title="var">_</span> <span class="id" title="var">H_part</span>); <span class="id" title="tactic">try</span> <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">n0</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <span class="id" title="var">n</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<a class="idref" href="Giskard.global.html#out_message_change_tells_sender"><span class="id" title="lemma">out_message_change_tells_sender</span></a> <span class="id" title="var">H_prot_copy</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">H_in0</span> <span class="id" title="var">H_deliver</span> <span class="id" title="var">H_step</span> <span class="id" title="var">n</span> <span class="id" title="var">H_part</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exists</span> <span class="id" title="var">msg</span>; <span class="id" title="tactic">tauto</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">H0</span> <span class="id" title="tactic">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;Case&nbsp;analysis&nbsp;on&nbsp;transition&nbsp;made&nbsp;from&nbsp;i&nbsp;~~&gt;&nbsp;S&nbsp;i&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">p0</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">H_step_copy</span> := <span class="id" title="var">H_step</span>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H_step</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">H_update</span> [<span class="id" title="var">H_broadcast</span> <span class="id" title="var">H_rest</span>]];<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">H_broadcast</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">try</span> <span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Lists.List.html#in_inv"><span class="id" title="lemma">in_inv</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;For&nbsp;cases&nbsp;that&nbsp;do&nbsp;not&nbsp;send&nbsp;messages&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">try</span> <span class="id" title="tactic">tauto</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">try</span> (<span class="id" title="tactic">apply</span> <a class="idref" href="Giskard.local.html#make_PrepareBlocks_message_type"><span class="id" title="lemma">make_PrepareBlocks_message_type</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>; <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">H_type</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>; <span class="id" title="tactic">discriminate</span>); <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">repeat</span> <span class="id" title="tactic">destruct</span> <span class="id" title="var">H</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">H</span> | <span class="id" title="var">H</span>]; <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">try</span> (<span class="id" title="tactic">subst</span>; <span class="id" title="tactic">rewrite</span> <span class="id" title="var">H_type</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H_rest</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<a class="idref" href="Giskard.structures.html#PrepareVote"><span class="id" title="constructor">PrepareVote</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="Giskard.structures.html#PrepareQC"><span class="id" title="constructor">PrepareQC</span></a>) <span class="id" title="tactic">by</span> <span class="id" title="tactic">tauto</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">discriminate</span>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">try</span> (<span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">H</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H_type</span>; <span class="id" title="tactic">discriminate</span>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">try</span> <span class="id" title="tactic">inversion</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;In&nbsp;the&nbsp;three&nbsp;cases&nbsp;where&nbsp;voting&nbsp;actually&nbsp;occurs,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;the&nbsp;existential&nbsp;witness&nbsp;is&nbsp;in&nbsp;H&nbsp;*)</span><br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Lists.List.html#in_map_iff"><span class="id" title="lemma">in_map_iff</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">msg'</span> [<span class="id" title="var">H_eq'</span> <span class="id" title="var">H_about_msg'</span>]];<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exists</span> <span class="id" title="var">msg'</span>; <span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">H_eq'</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Lists.List.html#filter_In"><span class="id" title="lemma">filter_In</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H_about_msg'</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H_about_msg'</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">H_in'</span> <span class="id" title="var">H_about_msg'</span>];<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Datatypes.html#andb_prop"><span class="id" title="lemma">andb_prop</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H_about_msg'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H_about_msg'</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">H_view'</span> <span class="id" title="var">H_type'</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Datatypes.html#andb_prop"><span class="id" title="lemma">andb_prop</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H_view'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H_view'</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">H_view'</span> <span class="id" title="var">_</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Datatypes.html#andb_prop"><span class="id" title="lemma">andb_prop</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H_view'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H_view'</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">H_view'</span> <span class="id" title="var">_</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="Giskard.structures.html#message_type_eqb_correct"><span class="id" title="lemma">message_type_eqb_correct</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H_type'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">repeat</span> <span class="id" title="tactic">split</span>; <span class="id" title="tactic">try</span> <span class="id" title="tactic">tauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">apply</span> <a class="idref" href="Giskard.global.html#counting_messages_monotonic"><span class="id" title="lemma">counting_messages_monotonic</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="Giskard.local.html#view_valid"><span class="id" title="definition">view_valid</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H_rest</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Arith.PeanoNat.html#Nat.eqb_eq"><span class="id" title="lemma">Nat.eqb_eq</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H_view'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">H_view'</span>. <span class="id" title="tactic">symmetry</span>; <span class="id" title="var">easy</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Lists.List.html#in_map_iff"><span class="id" title="lemma">in_map_iff</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">msg'</span> [<span class="id" title="var">H_eq'</span> <span class="id" title="var">H_about_msg'</span>]];<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exists</span> <span class="id" title="var">msg'</span>; <span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">H_eq'</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Lists.List.html#filter_In"><span class="id" title="lemma">filter_In</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H_about_msg'</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H_about_msg'</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">H_in'</span> <span class="id" title="var">H_about_msg'</span>];<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Datatypes.html#andb_prop"><span class="id" title="lemma">andb_prop</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H_about_msg'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H_about_msg'</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">H_view'</span> <span class="id" title="var">H_type'</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Datatypes.html#andb_prop"><span class="id" title="lemma">andb_prop</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H_view'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H_view'</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">H_view'</span> <span class="id" title="var">_</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Datatypes.html#andb_prop"><span class="id" title="lemma">andb_prop</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H_view'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H_view'</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">H_view'</span> <span class="id" title="var">_</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="Giskard.structures.html#message_type_eqb_correct"><span class="id" title="lemma">message_type_eqb_correct</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H_type'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">repeat</span> <span class="id" title="tactic">split</span>; <span class="id" title="tactic">try</span> <span class="id" title="tactic">tauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">apply</span> <a class="idref" href="Giskard.global.html#counting_messages_monotonic"><span class="id" title="lemma">counting_messages_monotonic</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="Giskard.local.html#view_valid"><span class="id" title="definition">view_valid</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H_rest</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Arith.PeanoNat.html#Nat.eqb_eq"><span class="id" title="lemma">Nat.eqb_eq</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H_view'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">H_view'</span>. <span class="id" title="tactic">symmetry</span>; <span class="id" title="var">easy</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Lists.List.html#in_map_iff"><span class="id" title="lemma">in_map_iff</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">msg'</span> [<span class="id" title="var">H_eq'</span> <span class="id" title="var">H_about_msg'</span>]];<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exists</span> <span class="id" title="var">msg'</span>; <span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">H_eq'</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Lists.List.html#filter_In"><span class="id" title="lemma">filter_In</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H_about_msg'</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H_about_msg'</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">H_in'</span> <span class="id" title="var">H_about_msg'</span>];<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Datatypes.html#andb_prop"><span class="id" title="lemma">andb_prop</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H_about_msg'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H_about_msg'</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">H_view'</span> <span class="id" title="var">H_type'</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Datatypes.html#andb_prop"><span class="id" title="lemma">andb_prop</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H_view'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H_view'</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">H_view'</span> <span class="id" title="var">_</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Datatypes.html#andb_prop"><span class="id" title="lemma">andb_prop</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H_view'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H_view'</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">H_view'</span> <span class="id" title="var">_</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="Giskard.structures.html#message_type_eqb_correct"><span class="id" title="lemma">message_type_eqb_correct</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H_type'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">repeat</span> <span class="id" title="tactic">split</span>; <span class="id" title="tactic">try</span> <span class="id" title="tactic">tauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">apply</span> <a class="idref" href="Giskard.global.html#counting_messages_monotonic"><span class="id" title="lemma">counting_messages_monotonic</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="Giskard.local.html#view_valid"><span class="id" title="definition">view_valid</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H_rest</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Arith.PeanoNat.html#Nat.eqb_eq"><span class="id" title="lemma">Nat.eqb_eq</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H_view'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">H_view'</span>. <span class="id" title="tactic">symmetry</span>; <span class="id" title="var">easy</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;In&nbsp;the&nbsp;timeout&nbsp;case&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">H_timeout</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H_sent</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="Giskard.structures.html#is_member_correct"><span class="id" title="lemma">is_member_correct</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H_part</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H_sent</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">H_part</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H_sent</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">tauto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="vote_quorum_current_view_persistent" class="idref" href="#vote_quorum_current_view_persistent"><span class="id" title="lemma">vote_quorum_current_view_persistent</span></a> :<br/>
&nbsp;&nbsp;<span class="id" title="keyword">forall</span> (<a id="tr:204" class="idref" href="#tr:204"><span class="id" title="binder">tr</span></a> : <a class="idref" href="Giskard.global.html#GTrace"><span class="id" title="definition">GTrace</span></a>), <a class="idref" href="Giskard.global.html#protocol_trace"><span class="id" title="definition">protocol_trace</span></a> <a class="idref" href="Giskard.global.html#tr:204"><span class="id" title="variable">tr</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<span class="id" title="keyword">forall</span> (<a id="n:205" class="idref" href="#n:205"><span class="id" title="binder">n</span></a> : <a class="idref" href="Giskard.structures.html#node"><span class="id" title="axiom">node</span></a>) (<a id="i:206" class="idref" href="#i:206"><span class="id" title="binder">i</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>), <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Lists.List.html#In"><span class="id" title="definition">In</span></a> <a class="idref" href="Giskard.global.html#n:205"><span class="id" title="variable">n</span></a> <a class="idref" href="Giskard.structures.html#participants"><span class="id" title="axiom">participants</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<span class="id" title="keyword">forall</span> (<a id="b:207" class="idref" href="#b:207"><span class="id" title="binder">b</span></a> : <a class="idref" href="Giskard.structures.html#block"><span class="id" title="axiom">block</span></a>), <a class="idref" href="Giskard.local.html#vote_quorum_in_view"><span class="id" title="definition">vote_quorum_in_view</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Datatypes.html#fst"><span class="id" title="definition">fst</span></a> (<a class="idref" href="Giskard.global.html#tr:204"><span class="id" title="variable">tr</span></a> <a class="idref" href="Giskard.global.html#i:206"><span class="id" title="variable">i</span></a>) <a class="idref" href="Giskard.global.html#n:205"><span class="id" title="variable">n</span></a>) (<a class="idref" href="Giskard.structures.html#node_view"><span class="id" title="projection">node_view</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Datatypes.html#fst"><span class="id" title="definition">fst</span></a> (<a class="idref" href="Giskard.global.html#tr:204"><span class="id" title="variable">tr</span></a> <a class="idref" href="Giskard.global.html#i:206"><span class="id" title="variable">i</span></a>) <a class="idref" href="Giskard.global.html#n:205"><span class="id" title="variable">n</span></a>)) <a class="idref" href="Giskard.global.html#b:207"><span class="id" title="variable">b</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<span class="id" title="keyword">forall</span> (<a id="j:208" class="idref" href="#j:208"><span class="id" title="binder">j</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>), <a class="idref" href="Giskard.global.html#i:206"><span class="id" title="variable">i</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Peano.html#cb53cf0ee22c036a03b4a9281c68b5a3"><span class="id" title="notation">&lt;=</span></a> <a class="idref" href="Giskard.global.html#j:208"><span class="id" title="variable">j</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="Giskard.local.html#vote_quorum_in_view"><span class="id" title="definition">vote_quorum_in_view</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Datatypes.html#fst"><span class="id" title="definition">fst</span></a> (<a class="idref" href="Giskard.global.html#tr:204"><span class="id" title="variable">tr</span></a> <a class="idref" href="Giskard.global.html#j:208"><span class="id" title="variable">j</span></a>) <a class="idref" href="Giskard.global.html#n:205"><span class="id" title="variable">n</span></a>) (<a class="idref" href="Giskard.structures.html#node_view"><span class="id" title="projection">node_view</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Datatypes.html#fst"><span class="id" title="definition">fst</span></a> (<a class="idref" href="Giskard.global.html#tr:204"><span class="id" title="variable">tr</span></a> <a class="idref" href="Giskard.global.html#i:206"><span class="id" title="variable">i</span></a>) <a class="idref" href="Giskard.global.html#n:205"><span class="id" title="variable">n</span></a>)) <a class="idref" href="Giskard.global.html#b:207"><span class="id" title="variable">b</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">tr</span> <span class="id" title="var">H_prot</span> <span class="id" title="var">n</span> <span class="id" title="var">i</span> <span class="id" title="var">H_part</span> <span class="id" title="var">b</span> <span class="id" title="var">H_vote</span> <span class="id" title="var">j</span> <span class="id" title="var">H_le</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="Giskard.local.html#vote_quorum_in_view"><span class="id" title="definition">vote_quorum_in_view</span></a>, <a class="idref" href="Giskard.local.html#processed_PrepareVote_in_view_about_block"><span class="id" title="definition">processed_PrepareVote_in_view_about_block</span></a>,<br/>
&nbsp;&nbsp;&nbsp;<a class="idref" href="Giskard.local.html#processed_PrepareVote_in_view_about_block"><span class="id" title="definition">processed_PrepareVote_in_view_about_block</span></a> <span class="id" title="tactic">in</span> *.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">H_useful</span> := @<a class="idref" href="Giskard.structures.html#quorum_subset"><span class="id" title="axiom">quorum_subset</span></a> <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Lists.List.html#filter"><span class="id" title="definition">filter</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="keyword">fun</span> <a id="msg:212" class="idref" href="#msg:212"><span class="id" title="binder">msg</span></a> : <a class="idref" href="Giskard.structures.html#message"><span class="id" title="record">message</span></a> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Giskard.structures.html#message_type_eqb"><span class="id" title="definition">message_type_eqb</span></a> (<a class="idref" href="Giskard.structures.html#get_message_type"><span class="id" title="projection">get_message_type</span></a> <a class="idref" href="Giskard.global.html#msg:210"><span class="id" title="variable">msg</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Giskard.structures.html#PrepareVote"><span class="id" title="constructor">PrepareVote</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Datatypes.html#::bool_scope:x_'&amp;&amp;'_x"><span class="id" title="notation">&amp;&amp;</span></a> <a class="idref" href="Giskard.structures.html#block_eqb"><span class="id" title="axiom">block_eqb</span></a> (<a class="idref" href="Giskard.structures.html#get_block"><span class="id" title="projection">get_block</span></a> <a class="idref" href="Giskard.global.html#msg:210"><span class="id" title="variable">msg</span></a>) <span class="id" title="var">b</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Datatypes.html#::bool_scope:x_'&amp;&amp;'_x"><span class="id" title="notation">&amp;&amp;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Datatypes.html#::bool_scope:x_'&amp;&amp;'_x"><span class="id" title="notation">(</span></a><a class="idref" href="Giskard.structures.html#get_view"><span class="id" title="projection">get_view</span></a> <a class="idref" href="Giskard.global.html#msg:210"><span class="id" title="variable">msg</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Arith.PeanoNat.html#ad2ec4e405f68c46c0a176e3e94ae2e3"><span class="id" title="notation">=?</span></a> <a class="idref" href="Giskard.structures.html#node_view"><span class="id" title="projection">node_view</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Datatypes.html#fst"><span class="id" title="definition">fst</span></a> (<span class="id" title="var">tr</span> <span class="id" title="var">i</span>) <span class="id" title="var">n</span>)<a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Datatypes.html#::bool_scope:x_'&amp;&amp;'_x"><span class="id" title="notation">)</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="Giskard.structures.html#counting_messages"><span class="id" title="projection">counting_messages</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Datatypes.html#fst"><span class="id" title="definition">fst</span></a> (<span class="id" title="var">tr</span> <span class="id" title="var">i</span>) <span class="id" title="var">n</span>)))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Lists.List.html#filter"><span class="id" title="definition">filter</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="keyword">fun</span> <a id="msg:211" class="idref" href="#msg:211"><span class="id" title="binder">msg</span></a> : <a class="idref" href="Giskard.structures.html#message"><span class="id" title="record">message</span></a> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Giskard.structures.html#message_type_eqb"><span class="id" title="definition">message_type_eqb</span></a> (<a class="idref" href="Giskard.structures.html#get_message_type"><span class="id" title="projection">get_message_type</span></a> <a class="idref" href="Giskard.global.html#msg:209"><span class="id" title="variable">msg</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Giskard.structures.html#PrepareVote"><span class="id" title="constructor">PrepareVote</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Datatypes.html#::bool_scope:x_'&amp;&amp;'_x"><span class="id" title="notation">&amp;&amp;</span></a> <a class="idref" href="Giskard.structures.html#block_eqb"><span class="id" title="axiom">block_eqb</span></a> (<a class="idref" href="Giskard.structures.html#get_block"><span class="id" title="projection">get_block</span></a> <a class="idref" href="Giskard.global.html#msg:209"><span class="id" title="variable">msg</span></a>) <span class="id" title="var">b</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Datatypes.html#::bool_scope:x_'&amp;&amp;'_x"><span class="id" title="notation">&amp;&amp;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Datatypes.html#::bool_scope:x_'&amp;&amp;'_x"><span class="id" title="notation">(</span></a><a class="idref" href="Giskard.structures.html#get_view"><span class="id" title="projection">get_view</span></a> <a class="idref" href="Giskard.global.html#msg:209"><span class="id" title="variable">msg</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Arith.PeanoNat.html#ad2ec4e405f68c46c0a176e3e94ae2e3"><span class="id" title="notation">=?</span></a> <a class="idref" href="Giskard.structures.html#node_view"><span class="id" title="projection">node_view</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Datatypes.html#fst"><span class="id" title="definition">fst</span></a> (<span class="id" title="var">tr</span> <span class="id" title="var">i</span>) <span class="id" title="var">n</span>)<a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Datatypes.html#::bool_scope:x_'&amp;&amp;'_x"><span class="id" title="notation">)</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="Giskard.structures.html#counting_messages"><span class="id" title="projection">counting_messages</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Datatypes.html#fst"><span class="id" title="definition">fst</span></a> (<span class="id" title="var">tr</span> <span class="id" title="var">j</span>) <span class="id" title="var">n</span>)))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">H_vote</span>).<br/>
&nbsp;&nbsp;<span class="id" title="var">spec</span> <span class="id" title="var">H_useful</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">msg</span> <span class="id" title="var">H_in</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Lists.List.html#filter_In"><span class="id" title="lemma">filter_In</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H_in</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H_in</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">H_in</span> <span class="id" title="var">H_rest</span>].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Lists.List.html#filter_In"><span class="id" title="lemma">filter_In</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">split</span>; <span class="id" title="tactic">try</span> <span class="id" title="tactic">tauto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">apply</span> <a class="idref" href="Giskard.global.html#counting_messages_inclusion"><span class="id" title="lemma">counting_messages_inclusion</span></a> <span class="id" title="keyword">with</span> <span class="id" title="var">i</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">assumption</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="PrepareVote_about_block_in_view_global" class="idref" href="#PrepareVote_about_block_in_view_global"><span class="id" title="definition">PrepareVote_about_block_in_view_global</span></a> (<a id="tr:213" class="idref" href="#tr:213"><span class="id" title="binder">tr</span></a> : <a class="idref" href="Giskard.global.html#GTrace"><span class="id" title="definition">GTrace</span></a>) <a id="i:214" class="idref" href="#i:214"><span class="id" title="binder">i</span></a> <a id="b:215" class="idref" href="#b:215"><span class="id" title="binder">b</span></a> <a id="p:216" class="idref" href="#p:216"><span class="id" title="binder">p</span></a> :=<br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Lists.List.html#filter"><span class="id" title="definition">filter</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="keyword">fun</span> <a id="msg:217" class="idref" href="#msg:217"><span class="id" title="binder">msg</span></a> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Giskard.structures.html#message_type_eqb"><span class="id" title="definition">message_type_eqb</span></a> (<a class="idref" href="Giskard.structures.html#get_message_type"><span class="id" title="projection">get_message_type</span></a> <a class="idref" href="Giskard.global.html#msg:217"><span class="id" title="variable">msg</span></a>) <a class="idref" href="Giskard.structures.html#PrepareVote"><span class="id" title="constructor">PrepareVote</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Datatypes.html#::bool_scope:x_'&amp;&amp;'_x"><span class="id" title="notation">&amp;&amp;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Giskard.structures.html#block_eqb"><span class="id" title="axiom">block_eqb</span></a> (<a class="idref" href="Giskard.structures.html#get_block"><span class="id" title="projection">get_block</span></a> <a class="idref" href="Giskard.global.html#msg:217"><span class="id" title="variable">msg</span></a>) <a class="idref" href="Giskard.global.html#b:215"><span class="id" title="variable">b</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Datatypes.html#::bool_scope:x_'&amp;&amp;'_x"><span class="id" title="notation">&amp;&amp;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Arith.PeanoNat.html#Nat.eqb"><span class="id" title="definition">Nat.eqb</span></a> (<a class="idref" href="Giskard.structures.html#get_view"><span class="id" title="projection">get_view</span></a> <a class="idref" href="Giskard.global.html#msg:217"><span class="id" title="variable">msg</span></a>) <a class="idref" href="Giskard.global.html#p:216"><span class="id" title="variable">p</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Datatypes.html#snd"><span class="id" title="definition">snd</span></a> (<a class="idref" href="Giskard.global.html#tr:213"><span class="id" title="variable">tr</span></a> <a class="idref" href="Giskard.global.html#i:214"><span class="id" title="variable">i</span></a>)).<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="PrepareVote_about_block_global" class="idref" href="#PrepareVote_about_block_global"><span class="id" title="definition">PrepareVote_about_block_global</span></a> (<a id="tr:218" class="idref" href="#tr:218"><span class="id" title="binder">tr</span></a> : <a class="idref" href="Giskard.global.html#GTrace"><span class="id" title="definition">GTrace</span></a>) <a id="i:219" class="idref" href="#i:219"><span class="id" title="binder">i</span></a> <a id="b:220" class="idref" href="#b:220"><span class="id" title="binder">b</span></a> :=<br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Lists.List.html#filter"><span class="id" title="definition">filter</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="keyword">fun</span> <a id="msg:221" class="idref" href="#msg:221"><span class="id" title="binder">msg</span></a> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Giskard.structures.html#message_type_eqb"><span class="id" title="definition">message_type_eqb</span></a> (<a class="idref" href="Giskard.structures.html#get_message_type"><span class="id" title="projection">get_message_type</span></a> <a class="idref" href="Giskard.global.html#msg:221"><span class="id" title="variable">msg</span></a>) <a class="idref" href="Giskard.structures.html#PrepareVote"><span class="id" title="constructor">PrepareVote</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Datatypes.html#::bool_scope:x_'&amp;&amp;'_x"><span class="id" title="notation">&amp;&amp;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Giskard.structures.html#block_eqb"><span class="id" title="axiom">block_eqb</span></a> (<a class="idref" href="Giskard.structures.html#get_block"><span class="id" title="projection">get_block</span></a> <a class="idref" href="Giskard.global.html#msg:221"><span class="id" title="variable">msg</span></a>) <a class="idref" href="Giskard.global.html#b:220"><span class="id" title="variable">b</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Datatypes.html#snd"><span class="id" title="definition">snd</span></a> (<a class="idref" href="Giskard.global.html#tr:218"><span class="id" title="variable">tr</span></a> <a class="idref" href="Giskard.global.html#i:219"><span class="id" title="variable">i</span></a>)).<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="vote_quorum_in_view_global" class="idref" href="#vote_quorum_in_view_global"><span class="id" title="definition">vote_quorum_in_view_global</span></a> <a id="tr:222" class="idref" href="#tr:222"><span class="id" title="binder">tr</span></a> <a id="i:223" class="idref" href="#i:223"><span class="id" title="binder">i</span></a> <a id="b:224" class="idref" href="#b:224"><span class="id" title="binder">b</span></a> <a id="p:225" class="idref" href="#p:225"><span class="id" title="binder">p</span></a> :=<br/>
&nbsp;&nbsp;<a class="idref" href="Giskard.structures.html#quorum"><span class="id" title="definition">quorum</span></a> (<a class="idref" href="Giskard.global.html#PrepareVote_about_block_in_view_global"><span class="id" title="definition">PrepareVote_about_block_in_view_global</span></a> <a class="idref" href="Giskard.global.html#tr:222"><span class="id" title="variable">tr</span></a> <a class="idref" href="Giskard.global.html#i:223"><span class="id" title="variable">i</span></a> <a class="idref" href="Giskard.global.html#b:224"><span class="id" title="variable">b</span></a> <a class="idref" href="Giskard.global.html#p:225"><span class="id" title="variable">p</span></a>).<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="vote_quorum_in_view_persistent" class="idref" href="#vote_quorum_in_view_persistent"><span class="id" title="lemma">vote_quorum_in_view_persistent</span></a> :<br/>
&nbsp;&nbsp;<span class="id" title="keyword">forall</span> (<a id="tr:226" class="idref" href="#tr:226"><span class="id" title="binder">tr</span></a> : <a class="idref" href="Giskard.global.html#GTrace"><span class="id" title="definition">GTrace</span></a>), <a class="idref" href="Giskard.global.html#protocol_trace"><span class="id" title="definition">protocol_trace</span></a> <a class="idref" href="Giskard.global.html#tr:226"><span class="id" title="variable">tr</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<span class="id" title="keyword">forall</span> (<a id="n:227" class="idref" href="#n:227"><span class="id" title="binder">n</span></a> : <a class="idref" href="Giskard.structures.html#node"><span class="id" title="axiom">node</span></a>) (<a id="i:228" class="idref" href="#i:228"><span class="id" title="binder">i</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>), <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Lists.List.html#In"><span class="id" title="definition">In</span></a> <a class="idref" href="Giskard.global.html#n:227"><span class="id" title="variable">n</span></a> <a class="idref" href="Giskard.structures.html#participants"><span class="id" title="axiom">participants</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<span class="id" title="keyword">forall</span> (<a id="b:229" class="idref" href="#b:229"><span class="id" title="binder">b</span></a> : <a class="idref" href="Giskard.structures.html#block"><span class="id" title="axiom">block</span></a>) (<a id="p:230" class="idref" href="#p:230"><span class="id" title="binder">p</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>), <a class="idref" href="Giskard.local.html#vote_quorum_in_view"><span class="id" title="definition">vote_quorum_in_view</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Datatypes.html#fst"><span class="id" title="definition">fst</span></a> (<a class="idref" href="Giskard.global.html#tr:226"><span class="id" title="variable">tr</span></a> <a class="idref" href="Giskard.global.html#i:228"><span class="id" title="variable">i</span></a>) <a class="idref" href="Giskard.global.html#n:227"><span class="id" title="variable">n</span></a>) <a class="idref" href="Giskard.global.html#p:230"><span class="id" title="variable">p</span></a> <a class="idref" href="Giskard.global.html#b:229"><span class="id" title="variable">b</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<span class="id" title="keyword">forall</span> (<a id="j:231" class="idref" href="#j:231"><span class="id" title="binder">j</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>), <a class="idref" href="Giskard.global.html#i:228"><span class="id" title="variable">i</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Peano.html#cb53cf0ee22c036a03b4a9281c68b5a3"><span class="id" title="notation">&lt;=</span></a> <a class="idref" href="Giskard.global.html#j:231"><span class="id" title="variable">j</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="Giskard.local.html#vote_quorum_in_view"><span class="id" title="definition">vote_quorum_in_view</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Datatypes.html#fst"><span class="id" title="definition">fst</span></a> (<a class="idref" href="Giskard.global.html#tr:226"><span class="id" title="variable">tr</span></a> <a class="idref" href="Giskard.global.html#j:231"><span class="id" title="variable">j</span></a>) <a class="idref" href="Giskard.global.html#n:227"><span class="id" title="variable">n</span></a>) <a class="idref" href="Giskard.global.html#p:230"><span class="id" title="variable">p</span></a> <a class="idref" href="Giskard.global.html#b:229"><span class="id" title="variable">b</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">tr</span> <span class="id" title="var">H_prot</span> <span class="id" title="var">n</span> <span class="id" title="var">i</span> <span class="id" title="var">H_part</span> <span class="id" title="var">b</span> <span class="id" title="var">p</span> <span class="id" title="var">H_vote</span> <span class="id" title="var">j</span> <span class="id" title="var">H_le</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="Giskard.local.html#vote_quorum_in_view"><span class="id" title="definition">vote_quorum_in_view</span></a>, <a class="idref" href="Giskard.local.html#processed_PrepareVote_in_view_about_block"><span class="id" title="definition">processed_PrepareVote_in_view_about_block</span></a> <span class="id" title="tactic">in</span> *.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">H_useful</span> := @<a class="idref" href="Giskard.structures.html#quorum_subset"><span class="id" title="axiom">quorum_subset</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Lists.List.html#filter"><span class="id" title="definition">filter</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="keyword">fun</span> <a id="msg:235" class="idref" href="#msg:235"><span class="id" title="binder">msg</span></a> : <a class="idref" href="Giskard.structures.html#message"><span class="id" title="record">message</span></a> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Giskard.structures.html#message_type_eqb"><span class="id" title="definition">message_type_eqb</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="Giskard.structures.html#get_message_type"><span class="id" title="projection">get_message_type</span></a> <a class="idref" href="Giskard.global.html#msg:233"><span class="id" title="variable">msg</span></a>) <a class="idref" href="Giskard.structures.html#PrepareVote"><span class="id" title="constructor">PrepareVote</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Datatypes.html#::bool_scope:x_'&amp;&amp;'_x"><span class="id" title="notation">&amp;&amp;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Giskard.structures.html#block_eqb"><span class="id" title="axiom">block_eqb</span></a> (<a class="idref" href="Giskard.structures.html#get_block"><span class="id" title="projection">get_block</span></a> <a class="idref" href="Giskard.global.html#msg:233"><span class="id" title="variable">msg</span></a>) <span class="id" title="var">b</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Datatypes.html#::bool_scope:x_'&amp;&amp;'_x"><span class="id" title="notation">&amp;&amp;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Datatypes.html#::bool_scope:x_'&amp;&amp;'_x"><span class="id" title="notation">(</span></a><a class="idref" href="Giskard.structures.html#get_view"><span class="id" title="projection">get_view</span></a> <a class="idref" href="Giskard.global.html#msg:233"><span class="id" title="variable">msg</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Arith.PeanoNat.html#ad2ec4e405f68c46c0a176e3e94ae2e3"><span class="id" title="notation">=?</span></a> <span class="id" title="var">p</span><a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Datatypes.html#::bool_scope:x_'&amp;&amp;'_x"><span class="id" title="notation">)</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="Giskard.structures.html#counting_messages"><span class="id" title="projection">counting_messages</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Datatypes.html#fst"><span class="id" title="definition">fst</span></a> (<span class="id" title="var">tr</span> <span class="id" title="var">i</span>) <span class="id" title="var">n</span>)))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Lists.List.html#filter"><span class="id" title="definition">filter</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="keyword">fun</span> <a id="msg:234" class="idref" href="#msg:234"><span class="id" title="binder">msg</span></a> : <a class="idref" href="Giskard.structures.html#message"><span class="id" title="record">message</span></a> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Giskard.structures.html#message_type_eqb"><span class="id" title="definition">message_type_eqb</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="Giskard.structures.html#get_message_type"><span class="id" title="projection">get_message_type</span></a> <a class="idref" href="Giskard.global.html#msg:232"><span class="id" title="variable">msg</span></a>) <a class="idref" href="Giskard.structures.html#PrepareVote"><span class="id" title="constructor">PrepareVote</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Datatypes.html#::bool_scope:x_'&amp;&amp;'_x"><span class="id" title="notation">&amp;&amp;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Giskard.structures.html#block_eqb"><span class="id" title="axiom">block_eqb</span></a> (<a class="idref" href="Giskard.structures.html#get_block"><span class="id" title="projection">get_block</span></a> <a class="idref" href="Giskard.global.html#msg:232"><span class="id" title="variable">msg</span></a>) <span class="id" title="var">b</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Datatypes.html#::bool_scope:x_'&amp;&amp;'_x"><span class="id" title="notation">&amp;&amp;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Datatypes.html#::bool_scope:x_'&amp;&amp;'_x"><span class="id" title="notation">(</span></a><a class="idref" href="Giskard.structures.html#get_view"><span class="id" title="projection">get_view</span></a> <a class="idref" href="Giskard.global.html#msg:232"><span class="id" title="variable">msg</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Arith.PeanoNat.html#ad2ec4e405f68c46c0a176e3e94ae2e3"><span class="id" title="notation">=?</span></a> <span class="id" title="var">p</span><a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Datatypes.html#::bool_scope:x_'&amp;&amp;'_x"><span class="id" title="notation">)</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="Giskard.structures.html#counting_messages"><span class="id" title="projection">counting_messages</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Datatypes.html#fst"><span class="id" title="definition">fst</span></a> (<span class="id" title="var">tr</span> <span class="id" title="var">j</span>) <span class="id" title="var">n</span>)))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">H_vote</span>).<br/>
&nbsp;&nbsp;<span class="id" title="var">spec</span> <span class="id" title="var">H_useful</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">msg</span> <span class="id" title="var">H_in</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Lists.List.html#filter_In"><span class="id" title="lemma">filter_In</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H_in</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H_in</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">H_in</span> <span class="id" title="var">H_rest</span>].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Lists.List.html#filter_In"><span class="id" title="lemma">filter_In</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">split</span>; <span class="id" title="tactic">try</span> <span class="id" title="tactic">tauto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">apply</span> <a class="idref" href="Giskard.global.html#counting_messages_inclusion"><span class="id" title="lemma">counting_messages_inclusion</span></a> <span class="id" title="keyword">with</span> <span class="id" title="var">i</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">assumption</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="vote_quorum_in_view_global_step" class="idref" href="#vote_quorum_in_view_global_step"><span class="id" title="lemma">vote_quorum_in_view_global_step</span></a> :<br/>
&nbsp;&nbsp;<span class="id" title="keyword">forall</span> <a id="tr:236" class="idref" href="#tr:236"><span class="id" title="binder">tr</span></a> <a id="i:237" class="idref" href="#i:237"><span class="id" title="binder">i</span></a> <a id="b:238" class="idref" href="#b:238"><span class="id" title="binder">b</span></a> <a id="p:239" class="idref" href="#p:239"><span class="id" title="binder">p</span></a>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Giskard.global.html#protocol_trace"><span class="id" title="definition">protocol_trace</span></a> <a class="idref" href="Giskard.global.html#tr:236"><span class="id" title="variable">tr</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Giskard.global.html#vote_quorum_in_view_global"><span class="id" title="definition">vote_quorum_in_view_global</span></a> <a class="idref" href="Giskard.global.html#tr:236"><span class="id" title="variable">tr</span></a> <a class="idref" href="Giskard.global.html#i:237"><span class="id" title="variable">i</span></a> <a class="idref" href="Giskard.global.html#b:238"><span class="id" title="variable">b</span></a> <a class="idref" href="Giskard.global.html#p:239"><span class="id" title="variable">p</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Giskard.global.html#vote_quorum_in_view_global"><span class="id" title="definition">vote_quorum_in_view_global</span></a> <a class="idref" href="Giskard.global.html#tr:236"><span class="id" title="variable">tr</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <a class="idref" href="Giskard.global.html#i:237"><span class="id" title="variable">i</span></a>) <a class="idref" href="Giskard.global.html#b:238"><span class="id" title="variable">b</span></a> <a class="idref" href="Giskard.global.html#p:239"><span class="id" title="variable">p</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">tr</span> <span class="id" title="var">i</span> <span class="id" title="var">b</span> <span class="id" title="var">p</span> <span class="id" title="var">H_prot</span> <span class="id" title="var">H_vote</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="Giskard.global.html#vote_quorum_in_view_global"><span class="id" title="definition">vote_quorum_in_view_global</span></a>, <a class="idref" href="Giskard.global.html#PrepareVote_about_block_in_view_global"><span class="id" title="definition">PrepareVote_about_block_in_view_global</span></a> <span class="id" title="tactic">in</span> *.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">H_useful</span> := @<a class="idref" href="Giskard.structures.html#quorum_subset"><span class="id" title="axiom">quorum_subset</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Lists.List.html#filter"><span class="id" title="definition">filter</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="keyword">fun</span> <a id="msg:243" class="idref" href="#msg:243"><span class="id" title="binder">msg</span></a> : <a class="idref" href="Giskard.structures.html#message"><span class="id" title="record">message</span></a> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Giskard.structures.html#message_type_eqb"><span class="id" title="definition">message_type_eqb</span></a> (<a class="idref" href="Giskard.structures.html#get_message_type"><span class="id" title="projection">get_message_type</span></a> <a class="idref" href="Giskard.global.html#msg:241"><span class="id" title="variable">msg</span></a>) <a class="idref" href="Giskard.structures.html#PrepareVote"><span class="id" title="constructor">PrepareVote</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Datatypes.html#::bool_scope:x_'&amp;&amp;'_x"><span class="id" title="notation">&amp;&amp;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Giskard.structures.html#block_eqb"><span class="id" title="axiom">block_eqb</span></a> (<a class="idref" href="Giskard.structures.html#get_block"><span class="id" title="projection">get_block</span></a> <a class="idref" href="Giskard.global.html#msg:241"><span class="id" title="variable">msg</span></a>) <span class="id" title="var">b</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Datatypes.html#::bool_scope:x_'&amp;&amp;'_x"><span class="id" title="notation">&amp;&amp;</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Datatypes.html#::bool_scope:x_'&amp;&amp;'_x"><span class="id" title="notation">(</span></a><a class="idref" href="Giskard.structures.html#get_view"><span class="id" title="projection">get_view</span></a> <a class="idref" href="Giskard.global.html#msg:241"><span class="id" title="variable">msg</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Arith.PeanoNat.html#ad2ec4e405f68c46c0a176e3e94ae2e3"><span class="id" title="notation">=?</span></a> <span class="id" title="var">p</span><a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Datatypes.html#::bool_scope:x_'&amp;&amp;'_x"><span class="id" title="notation">)</span></a>) <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Datatypes.html#snd"><span class="id" title="definition">snd</span></a> (<span class="id" title="var">tr</span> <span class="id" title="var">i</span>)))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Lists.List.html#filter"><span class="id" title="definition">filter</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="keyword">fun</span> <a id="msg:242" class="idref" href="#msg:242"><span class="id" title="binder">msg</span></a> : <a class="idref" href="Giskard.structures.html#message"><span class="id" title="record">message</span></a> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Giskard.structures.html#message_type_eqb"><span class="id" title="definition">message_type_eqb</span></a> (<a class="idref" href="Giskard.structures.html#get_message_type"><span class="id" title="projection">get_message_type</span></a> <a class="idref" href="Giskard.global.html#msg:240"><span class="id" title="variable">msg</span></a>) <a class="idref" href="Giskard.structures.html#PrepareVote"><span class="id" title="constructor">PrepareVote</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Datatypes.html#::bool_scope:x_'&amp;&amp;'_x"><span class="id" title="notation">&amp;&amp;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Giskard.structures.html#block_eqb"><span class="id" title="axiom">block_eqb</span></a> (<a class="idref" href="Giskard.structures.html#get_block"><span class="id" title="projection">get_block</span></a> <a class="idref" href="Giskard.global.html#msg:240"><span class="id" title="variable">msg</span></a>) <span class="id" title="var">b</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Datatypes.html#::bool_scope:x_'&amp;&amp;'_x"><span class="id" title="notation">&amp;&amp;</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Datatypes.html#::bool_scope:x_'&amp;&amp;'_x"><span class="id" title="notation">(</span></a><a class="idref" href="Giskard.structures.html#get_view"><span class="id" title="projection">get_view</span></a> <a class="idref" href="Giskard.global.html#msg:240"><span class="id" title="variable">msg</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Arith.PeanoNat.html#ad2ec4e405f68c46c0a176e3e94ae2e3"><span class="id" title="notation">=?</span></a> <span class="id" title="var">p</span><a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Datatypes.html#::bool_scope:x_'&amp;&amp;'_x"><span class="id" title="notation">)</span></a>) <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Datatypes.html#snd"><span class="id" title="definition">snd</span></a> (<span class="id" title="var">tr</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <span class="id" title="var">i</span>))))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">H_vote</span>).<br/>
&nbsp;&nbsp;<span class="id" title="var">spec</span> <span class="id" title="var">H_useful</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">msg</span> <span class="id" title="var">H_in</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Lists.List.html#filter_In"><span class="id" title="lemma">filter_In</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H_in</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H_in</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">H_in</span> <span class="id" title="var">H_rest</span>].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Lists.List.html#filter_In"><span class="id" title="lemma">filter_In</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">split</span>; <span class="id" title="tactic">try</span> <span class="id" title="tactic">tauto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">apply</span> <a class="idref" href="Giskard.global.html#global_messages_monotonic_step"><span class="id" title="lemma">global_messages_monotonic_step</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">assumption</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="make_PrepareBlocks_message_type" class="idref" href="#make_PrepareBlocks_message_type"><span class="id" title="lemma">make_PrepareBlocks_message_type</span></a> :<br/>
&nbsp;&nbsp;<span class="id" title="keyword">forall</span> <a id="s:244" class="idref" href="#s:244"><span class="id" title="binder">s</span></a> <a id="msg0:245" class="idref" href="#msg0:245"><span class="id" title="binder">msg0</span></a> <a id="msg:246" class="idref" href="#msg:246"><span class="id" title="binder">msg</span></a>, <br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Lists.List.html#In"><span class="id" title="definition">In</span></a> <a class="idref" href="Giskard.global.html#msg:246"><span class="id" title="variable">msg</span></a> (<a class="idref" href="Giskard.local.html#make_PrepareBlocks"><span class="id" title="definition">make_PrepareBlocks</span></a> <a class="idref" href="Giskard.global.html#s:244"><span class="id" title="variable">s</span></a> <a class="idref" href="Giskard.global.html#msg0:245"><span class="id" title="variable">msg0</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="Giskard.structures.html#get_message_type"><span class="id" title="projection">get_message_type</span></a> <a class="idref" href="Giskard.global.html#msg:246"><span class="id" title="variable">msg</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="Giskard.structures.html#PrepareBlock"><span class="id" title="constructor">PrepareBlock</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>. <span class="id" title="tactic">unfold</span> <a class="idref" href="Giskard.local.html#make_PrepareBlocks"><span class="id" title="definition">make_PrepareBlocks</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">H</span> | [<span class="id" title="var">H</span> | [<span class="id" title="var">H</span> | <span class="id" title="var">H</span>]]];<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">subst</span>; <span class="id" title="tactic">try</span> <span class="id" title="var">easy</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="ViewChange_quorum_global" class="idref" href="#ViewChange_quorum_global"><span class="id" title="lemma">ViewChange_quorum_global</span></a> :<br/>
&nbsp;&nbsp;<span class="id" title="keyword">forall</span> (<a id="tr:247" class="idref" href="#tr:247"><span class="id" title="binder">tr</span></a> : <a class="idref" href="Giskard.global.html#GTrace"><span class="id" title="definition">GTrace</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Giskard.global.html#protocol_trace"><span class="id" title="definition">protocol_trace</span></a> <a class="idref" href="Giskard.global.html#tr:247"><span class="id" title="variable">tr</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">forall</span> (<a id="i:248" class="idref" href="#i:248"><span class="id" title="binder">i</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>) (<a id="msg:249" class="idref" href="#msg:249"><span class="id" title="binder">msg</span></a> : <a class="idref" href="Giskard.structures.html#message"><span class="id" title="record">message</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Lists.List.html#In"><span class="id" title="definition">In</span></a> <a class="idref" href="Giskard.global.html#msg:249"><span class="id" title="variable">msg</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Datatypes.html#snd"><span class="id" title="definition">snd</span></a> (<a class="idref" href="Giskard.global.html#tr:247"><span class="id" title="variable">tr</span></a> <a class="idref" href="Giskard.global.html#i:248"><span class="id" title="variable">i</span></a>)) <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Giskard.structures.html#get_message_type"><span class="id" title="projection">get_message_type</span></a> <a class="idref" href="Giskard.global.html#msg:249"><span class="id" title="variable">msg</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="Giskard.structures.html#ViewChange"><span class="id" title="constructor">ViewChange</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Giskard.global.html#vote_quorum_in_view_global"><span class="id" title="definition">vote_quorum_in_view_global</span></a> <a class="idref" href="Giskard.global.html#tr:247"><span class="id" title="variable">tr</span></a> <a class="idref" href="Giskard.global.html#i:248"><span class="id" title="variable">i</span></a> (<a class="idref" href="Giskard.structures.html#get_block"><span class="id" title="projection">get_block</span></a> <a class="idref" href="Giskard.global.html#msg:249"><span class="id" title="variable">msg</span></a>) (<a class="idref" href="Giskard.structures.html#get_view"><span class="id" title="projection">get_view</span></a> <a class="idref" href="Giskard.global.html#msg:249"><span class="id" title="variable">msg</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">tr</span> <span class="id" title="var">H_prot</span> <span class="id" title="var">i</span>; <br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">i</span> <span class="id" title="keyword">as</span> [|<span class="id" title="var">i</span> <span class="id" title="var">IH_prot</span>];<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">msg</span> <span class="id" title="var">H_in</span> <span class="id" title="var">H_type</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">destruct</span> <span class="id" title="var">H_prot</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">H_init</span> <span class="id" title="var">_</span>];<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">H_init</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H_in</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">H_in</span>.<br/>
&nbsp;&nbsp;-  <span class="id" title="tactic">destruct</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Lists.List.html#In_dec"><span class="id" title="abbreviation">In_dec</span></a> <a class="idref" href="Giskard.structures.html#message_eq_dec"><span class="id" title="definition">message_eq_dec</span></a> <span class="id" title="var">msg</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Datatypes.html#snd"><span class="id" title="definition">snd</span></a> (<span class="id" title="var">tr</span> <span class="id" title="var">i</span>))) <span class="id" title="keyword">as</span> [<span class="id" title="var">H_old</span> | <span class="id" title="var">H_new</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">apply</span> <a class="idref" href="Giskard.global.html#vote_quorum_in_view_global_step"><span class="id" title="lemma">vote_quorum_in_view_global_step</span></a>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">try</span> <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">apply</span> <span class="id" title="var">IH_prot</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">assert</span> (<span class="id" title="var">H_prot_copy</span> := <span class="id" title="var">H_prot</span>); <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H_prot</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">_</span> <span class="id" title="var">H_prot</span>];<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">spec</span> <span class="id" title="var">H_prot</span> <span class="id" title="var">i</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H_prot</span> <span class="id" title="keyword">as</span> [[<span class="id" title="var">n0</span> [<span class="id" title="var">H_in0</span> [<span class="id" title="var">p0</span> [<span class="id" title="var">msg0</span> [<span class="id" title="var">lm0</span> [<span class="id" title="var">H_step</span> <span class="id" title="var">H_deliver</span>]]]]]] | <span class="id" title="var">H_timeout</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">H_in_copy</span> := <span class="id" title="var">H_in</span>); <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">H_deliver</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H_in</span>; <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H_in</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Lists.List.html#in_app_iff"><span class="id" title="lemma">in_app_iff</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H_in</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H_in</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">H_in</span> | <span class="id" title="var">H_in</span>];<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">try</span> <span class="id" title="var">contradiction</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">H_step_copy</span> := <span class="id" title="var">H_step</span>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">p0</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H_step</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">H_update</span> [<span class="id" title="var">H_out</span> <span class="id" title="var">H_rest</span>]];<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">H_out</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H_in</span>; <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;For&nbsp;all&nbsp;cases&nbsp;that&nbsp;do&nbsp;not&nbsp;send&nbsp;messages&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">try</span> (<span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H_in</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">contradiction</span>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">try</span> (<span class="id" title="tactic">apply</span> <a class="idref" href="Giskard.global.html#make_PrepareBlocks_message_type"><span class="id" title="lemma">make_PrepareBlocks_message_type</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H_in</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">H_type</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H_in</span>; <span class="id" title="tactic">discriminate</span>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">try</span> <span class="id" title="tactic">destruct</span> <span class="id" title="var">H_in</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">H_in</span> | <span class="id" title="var">H_in</span>]; <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">try</span> (<span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">H_in</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H_type</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H_type</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">discriminate</span>); <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">try</span> (<span class="id" title="tactic">apply</span> <a class="idref" href="Giskard.local.html#pending_PrepareVote_correct"><span class="id" title="lemma">pending_PrepareVote_correct</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H_in</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">H_type</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H_in</span>; <span class="id" title="var">easy</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H_in</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">H_in</span> | <span class="id" title="var">H_in</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">H_in</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H_type</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H_type</span>; <span class="id" title="tactic">discriminate</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="tactic">apply</span> <a class="idref" href="Giskard.global.html#make_PrepareBlocks_message_type"><span class="id" title="lemma">make_PrepareBlocks_message_type</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H_in</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">H_type</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H_in</span>; <span class="id" title="tactic">discriminate</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">H_timeout</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H_in</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H_in</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">contradiction</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="vote_quorum_local_means_vote_quorum_global" class="idref" href="#vote_quorum_local_means_vote_quorum_global"><span class="id" title="lemma">vote_quorum_local_means_vote_quorum_global</span></a> :<br/>
&nbsp;&nbsp;<span class="id" title="keyword">forall</span> <a id="tr:250" class="idref" href="#tr:250"><span class="id" title="binder">tr</span></a>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Giskard.global.html#protocol_trace"><span class="id" title="definition">protocol_trace</span></a> <a class="idref" href="Giskard.global.html#tr:250"><span class="id" title="variable">tr</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">forall</span> (<a id="i:251" class="idref" href="#i:251"><span class="id" title="binder">i</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>) (<a id="n:252" class="idref" href="#n:252"><span class="id" title="binder">n</span></a> : <a class="idref" href="Giskard.structures.html#node"><span class="id" title="axiom">node</span></a>) (<a id="b1:253" class="idref" href="#b1:253"><span class="id" title="binder">b1</span></a> : <a class="idref" href="Giskard.structures.html#block"><span class="id" title="axiom">block</span></a>) (<a id="p:254" class="idref" href="#p:254"><span class="id" title="binder">p</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Lists.List.html#In"><span class="id" title="definition">In</span></a> <a class="idref" href="Giskard.global.html#n:252"><span class="id" title="variable">n</span></a> <a class="idref" href="Giskard.structures.html#participants"><span class="id" title="axiom">participants</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Giskard.local.html#vote_quorum_in_view"><span class="id" title="definition">vote_quorum_in_view</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Datatypes.html#fst"><span class="id" title="definition">fst</span></a> (<a class="idref" href="Giskard.global.html#tr:250"><span class="id" title="variable">tr</span></a> <a class="idref" href="Giskard.global.html#i:251"><span class="id" title="variable">i</span></a>) <a class="idref" href="Giskard.global.html#n:252"><span class="id" title="variable">n</span></a>) <a class="idref" href="Giskard.global.html#p:254"><span class="id" title="variable">p</span></a> <a class="idref" href="Giskard.global.html#b1:253"><span class="id" title="variable">b1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Giskard.global.html#vote_quorum_in_view_global"><span class="id" title="definition">vote_quorum_in_view_global</span></a> <a class="idref" href="Giskard.global.html#tr:250"><span class="id" title="variable">tr</span></a> <a class="idref" href="Giskard.global.html#i:251"><span class="id" title="variable">i</span></a> <a class="idref" href="Giskard.global.html#b1:253"><span class="id" title="variable">b1</span></a> <a class="idref" href="Giskard.global.html#p:254"><span class="id" title="variable">p</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">tr</span> <span class="id" title="var">H_prot</span> <span class="id" title="var">i</span> <span class="id" title="var">n</span> <span class="id" title="var">b1</span> <span class="id" title="var">p</span> <span class="id" title="var">H_part</span> <span class="id" title="var">H_local</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">red</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H_local</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="Giskard.structures.html#quorum_subset"><span class="id" title="axiom">quorum_subset</span></a> <span class="id" title="keyword">with</span> (<a class="idref" href="Giskard.local.html#processed_PrepareVote_in_view_about_block"><span class="id" title="definition">processed_PrepareVote_in_view_about_block</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Datatypes.html#fst"><span class="id" title="definition">fst</span></a> (<span class="id" title="var">tr</span> <span class="id" title="var">i</span>) <span class="id" title="var">n</span>) <span class="id" title="var">p</span> <span class="id" title="var">b1</span>); <span class="id" title="tactic">try</span> <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">msg</span> <span class="id" title="var">H_in</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Lists.List.html#filter_In"><span class="id" title="lemma">filter_In</span></a>; <br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Lists.List.html#filter_In"><span class="id" title="lemma">filter_In</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H_in</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">H_in</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">H_in</span> <span class="id" title="var">H_typeblockview</span>].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">split</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="Giskard.global.html#processed_means_sent_global"><span class="id" title="lemma">processed_means_sent_global</span></a> <span class="id" title="keyword">with</span> <span class="id" title="var">n</span>; <span class="id" title="tactic">try</span> <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">assumption</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="vote_quorum_in_view_step_global" class="idref" href="#vote_quorum_in_view_step_global"><span class="id" title="lemma">vote_quorum_in_view_step_global</span></a> :<br/>
&nbsp;&nbsp;<span class="id" title="keyword">forall</span> <a id="tr:255" class="idref" href="#tr:255"><span class="id" title="binder">tr</span></a> <a id="i:256" class="idref" href="#i:256"><span class="id" title="binder">i</span></a> <a id="b:257" class="idref" href="#b:257"><span class="id" title="binder">b</span></a> <a id="p:258" class="idref" href="#p:258"><span class="id" title="binder">p</span></a>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Giskard.global.html#protocol_trace"><span class="id" title="definition">protocol_trace</span></a> <a class="idref" href="Giskard.global.html#tr:255"><span class="id" title="variable">tr</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Giskard.global.html#vote_quorum_in_view_global"><span class="id" title="definition">vote_quorum_in_view_global</span></a> <a class="idref" href="Giskard.global.html#tr:255"><span class="id" title="variable">tr</span></a> <a class="idref" href="Giskard.global.html#i:256"><span class="id" title="variable">i</span></a> <a class="idref" href="Giskard.global.html#b:257"><span class="id" title="variable">b</span></a> <a class="idref" href="Giskard.global.html#p:258"><span class="id" title="variable">p</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Giskard.global.html#vote_quorum_in_view_global"><span class="id" title="definition">vote_quorum_in_view_global</span></a> <a class="idref" href="Giskard.global.html#tr:255"><span class="id" title="variable">tr</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <a class="idref" href="Giskard.global.html#i:256"><span class="id" title="variable">i</span></a>) <a class="idref" href="Giskard.global.html#b:257"><span class="id" title="variable">b</span></a> <a class="idref" href="Giskard.global.html#p:258"><span class="id" title="variable">p</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">tr</span> <span class="id" title="var">i</span> <span class="id" title="var">b</span> <span class="id" title="var">p</span> <span class="id" title="var">H_prot</span> <span class="id" title="var">H_prepare</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">red</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="Giskard.structures.html#quorum_subset"><span class="id" title="axiom">quorum_subset</span></a> <span class="id" title="keyword">with</span> (<a class="idref" href="Giskard.global.html#PrepareVote_about_block_in_view_global"><span class="id" title="definition">PrepareVote_about_block_in_view_global</span></a> <span class="id" title="var">tr</span> <span class="id" title="var">i</span> <span class="id" title="var">b</span> <span class="id" title="var">p</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">assumption</span>. <span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Lists.List.html#filter_In"><span class="id" title="lemma">filter_In</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Lists.List.html#filter_In"><span class="id" title="lemma">filter_In</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">split</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">H</span>. <span class="id" title="var">now</span> <span class="id" title="tactic">apply</span> <a class="idref" href="Giskard.global.html#global_messages_monotonic_step"><span class="id" title="lemma">global_messages_monotonic_step</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">tauto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="qc_current_view_persistent" class="idref" href="#qc_current_view_persistent"><span class="id" title="lemma">qc_current_view_persistent</span></a> :<br/>
&nbsp;<span class="id" title="keyword">forall</span> (<a id="tr:259" class="idref" href="#tr:259"><span class="id" title="binder">tr</span></a> : <a class="idref" href="Giskard.global.html#GTrace"><span class="id" title="definition">GTrace</span></a>), <a class="idref" href="Giskard.global.html#protocol_trace"><span class="id" title="definition">protocol_trace</span></a> <a class="idref" href="Giskard.global.html#tr:259"><span class="id" title="variable">tr</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;<span class="id" title="keyword">forall</span> (<a id="n:260" class="idref" href="#n:260"><span class="id" title="binder">n</span></a> : <a class="idref" href="Giskard.structures.html#node"><span class="id" title="axiom">node</span></a>) (<a id="i:261" class="idref" href="#i:261"><span class="id" title="binder">i</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>), <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Lists.List.html#In"><span class="id" title="definition">In</span></a> <a class="idref" href="Giskard.global.html#n:260"><span class="id" title="variable">n</span></a> <a class="idref" href="Giskard.structures.html#participants"><span class="id" title="axiom">participants</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;<span class="id" title="keyword">forall</span> (<a id="b:262" class="idref" href="#b:262"><span class="id" title="binder">b</span></a> : <a class="idref" href="Giskard.structures.html#block"><span class="id" title="axiom">block</span></a>),<br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">exists</span></a> <a id="msg:265" class="idref" href="#msg:265"><span class="id" title="binder">msg</span></a> : <a class="idref" href="Giskard.structures.html#message"><span class="id" title="record">message</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">,</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Lists.List.html#In"><span class="id" title="definition">In</span></a> <a class="idref" href="Giskard.global.html#msg:265"><span class="id" title="variable">msg</span></a> (<a class="idref" href="Giskard.structures.html#counting_messages"><span class="id" title="projection">counting_messages</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Datatypes.html#fst"><span class="id" title="definition">fst</span></a> (<a class="idref" href="Giskard.global.html#tr:259"><span class="id" title="variable">tr</span></a> <a class="idref" href="Giskard.global.html#i:261"><span class="id" title="variable">i</span></a>) <a class="idref" href="Giskard.global.html#n:260"><span class="id" title="variable">n</span></a>)) <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Giskard.structures.html#get_view"><span class="id" title="projection">get_view</span></a> <a class="idref" href="Giskard.global.html#msg:265"><span class="id" title="variable">msg</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="Giskard.structures.html#node_view"><span class="id" title="projection">node_view</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Datatypes.html#fst"><span class="id" title="definition">fst</span></a> (<a class="idref" href="Giskard.global.html#tr:259"><span class="id" title="variable">tr</span></a> <a class="idref" href="Giskard.global.html#i:261"><span class="id" title="variable">i</span></a>) <a class="idref" href="Giskard.global.html#n:260"><span class="id" title="variable">n</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Giskard.structures.html#get_block"><span class="id" title="projection">get_block</span></a> <a class="idref" href="Giskard.global.html#msg:265"><span class="id" title="variable">msg</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="Giskard.global.html#b:262"><span class="id" title="variable">b</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a> <a class="idref" href="Giskard.structures.html#get_message_type"><span class="id" title="projection">get_message_type</span></a> <a class="idref" href="Giskard.global.html#msg:265"><span class="id" title="variable">msg</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="Giskard.structures.html#PrepareQC"><span class="id" title="constructor">PrepareQC</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;<span class="id" title="keyword">forall</span> (<a id="j:263" class="idref" href="#j:263"><span class="id" title="binder">j</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>), <a class="idref" href="Giskard.global.html#i:261"><span class="id" title="variable">i</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Peano.html#cb53cf0ee22c036a03b4a9281c68b5a3"><span class="id" title="notation">&lt;=</span></a> <a class="idref" href="Giskard.global.html#j:263"><span class="id" title="variable">j</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">exists</span></a> <a id="msg:264" class="idref" href="#msg:264"><span class="id" title="binder">msg</span></a> : <a class="idref" href="Giskard.structures.html#message"><span class="id" title="record">message</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">,</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Lists.List.html#In"><span class="id" title="definition">In</span></a> <a class="idref" href="Giskard.global.html#msg:264"><span class="id" title="variable">msg</span></a> (<a class="idref" href="Giskard.structures.html#counting_messages"><span class="id" title="projection">counting_messages</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Datatypes.html#fst"><span class="id" title="definition">fst</span></a> (<a class="idref" href="Giskard.global.html#tr:259"><span class="id" title="variable">tr</span></a> <a class="idref" href="Giskard.global.html#j:263"><span class="id" title="variable">j</span></a>) <a class="idref" href="Giskard.global.html#n:260"><span class="id" title="variable">n</span></a>)) <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Giskard.structures.html#get_view"><span class="id" title="projection">get_view</span></a> <a class="idref" href="Giskard.global.html#msg:264"><span class="id" title="variable">msg</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="Giskard.structures.html#node_view"><span class="id" title="projection">node_view</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Datatypes.html#fst"><span class="id" title="definition">fst</span></a> (<a class="idref" href="Giskard.global.html#tr:259"><span class="id" title="variable">tr</span></a> <a class="idref" href="Giskard.global.html#i:261"><span class="id" title="variable">i</span></a>) <a class="idref" href="Giskard.global.html#n:260"><span class="id" title="variable">n</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Giskard.structures.html#get_block"><span class="id" title="projection">get_block</span></a> <a class="idref" href="Giskard.global.html#msg:264"><span class="id" title="variable">msg</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="Giskard.global.html#b:262"><span class="id" title="variable">b</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a> <a class="idref" href="Giskard.structures.html#get_message_type"><span class="id" title="projection">get_message_type</span></a> <a class="idref" href="Giskard.global.html#msg:264"><span class="id" title="variable">msg</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="Giskard.structures.html#PrepareQC"><span class="id" title="constructor">PrepareQC</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">tr</span> <span class="id" title="var">H_prot</span> <span class="id" title="var">n</span> <span class="id" title="var">i</span> <span class="id" title="var">H_part</span> <span class="id" title="var">b</span> <span class="id" title="var">H_QC</span> <span class="id" title="var">j</span> <span class="id" title="var">H_le</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H_QC</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">msg</span> [<span class="id" title="var">H_in</span> [<span class="id" title="var">H_view</span> [<span class="id" title="var">H_block</span> <span class="id" title="var">H_type</span>]]]].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">exists</span> <span class="id" title="var">msg</span>; <span class="id" title="tactic">repeat</span> <span class="id" title="tactic">split</span>; <span class="id" title="tactic">try</span> <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">apply</span> <a class="idref" href="Giskard.global.html#counting_messages_inclusion"><span class="id" title="lemma">counting_messages_inclusion</span></a> <span class="id" title="keyword">with</span> <span class="id" title="var">i</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="qc_in_view_persistent" class="idref" href="#qc_in_view_persistent"><span class="id" title="lemma">qc_in_view_persistent</span></a> :<br/>
&nbsp;<span class="id" title="keyword">forall</span> (<a id="tr:266" class="idref" href="#tr:266"><span class="id" title="binder">tr</span></a> : <a class="idref" href="Giskard.global.html#GTrace"><span class="id" title="definition">GTrace</span></a>), <a class="idref" href="Giskard.global.html#protocol_trace"><span class="id" title="definition">protocol_trace</span></a> <a class="idref" href="Giskard.global.html#tr:266"><span class="id" title="variable">tr</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;<span class="id" title="keyword">forall</span> (<a id="n:267" class="idref" href="#n:267"><span class="id" title="binder">n</span></a> : <a class="idref" href="Giskard.structures.html#node"><span class="id" title="axiom">node</span></a>) (<a id="i:268" class="idref" href="#i:268"><span class="id" title="binder">i</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>), <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Lists.List.html#In"><span class="id" title="definition">In</span></a> <a class="idref" href="Giskard.global.html#n:267"><span class="id" title="variable">n</span></a> <a class="idref" href="Giskard.structures.html#participants"><span class="id" title="axiom">participants</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;<span class="id" title="keyword">forall</span> (<a id="b:269" class="idref" href="#b:269"><span class="id" title="binder">b</span></a> : <a class="idref" href="Giskard.structures.html#block"><span class="id" title="axiom">block</span></a>) (<a id="p:270" class="idref" href="#p:270"><span class="id" title="binder">p</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>),<br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">exists</span></a> <a id="msg:273" class="idref" href="#msg:273"><span class="id" title="binder">msg</span></a> : <a class="idref" href="Giskard.structures.html#message"><span class="id" title="record">message</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">,</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Lists.List.html#In"><span class="id" title="definition">In</span></a> <a class="idref" href="Giskard.global.html#msg:273"><span class="id" title="variable">msg</span></a> (<a class="idref" href="Giskard.structures.html#counting_messages"><span class="id" title="projection">counting_messages</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Datatypes.html#fst"><span class="id" title="definition">fst</span></a> (<a class="idref" href="Giskard.global.html#tr:266"><span class="id" title="variable">tr</span></a> <a class="idref" href="Giskard.global.html#i:268"><span class="id" title="variable">i</span></a>) <a class="idref" href="Giskard.global.html#n:267"><span class="id" title="variable">n</span></a>)) <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Giskard.structures.html#get_view"><span class="id" title="projection">get_view</span></a> <a class="idref" href="Giskard.global.html#msg:273"><span class="id" title="variable">msg</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="Giskard.global.html#p:270"><span class="id" title="variable">p</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Giskard.structures.html#get_block"><span class="id" title="projection">get_block</span></a> <a class="idref" href="Giskard.global.html#msg:273"><span class="id" title="variable">msg</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="Giskard.global.html#b:269"><span class="id" title="variable">b</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a> <a class="idref" href="Giskard.structures.html#get_message_type"><span class="id" title="projection">get_message_type</span></a> <a class="idref" href="Giskard.global.html#msg:273"><span class="id" title="variable">msg</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="Giskard.structures.html#PrepareQC"><span class="id" title="constructor">PrepareQC</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;<span class="id" title="keyword">forall</span> (<a id="j:271" class="idref" href="#j:271"><span class="id" title="binder">j</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>), <a class="idref" href="Giskard.global.html#i:268"><span class="id" title="variable">i</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Peano.html#cb53cf0ee22c036a03b4a9281c68b5a3"><span class="id" title="notation">&lt;=</span></a> <a class="idref" href="Giskard.global.html#j:271"><span class="id" title="variable">j</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">exists</span></a> <a id="msg:272" class="idref" href="#msg:272"><span class="id" title="binder">msg</span></a> : <a class="idref" href="Giskard.structures.html#message"><span class="id" title="record">message</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">,</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Lists.List.html#In"><span class="id" title="definition">In</span></a> <a class="idref" href="Giskard.global.html#msg:272"><span class="id" title="variable">msg</span></a> (<a class="idref" href="Giskard.structures.html#counting_messages"><span class="id" title="projection">counting_messages</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Datatypes.html#fst"><span class="id" title="definition">fst</span></a> (<a class="idref" href="Giskard.global.html#tr:266"><span class="id" title="variable">tr</span></a> <a class="idref" href="Giskard.global.html#j:271"><span class="id" title="variable">j</span></a>) <a class="idref" href="Giskard.global.html#n:267"><span class="id" title="variable">n</span></a>)) <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Giskard.structures.html#get_view"><span class="id" title="projection">get_view</span></a> <a class="idref" href="Giskard.global.html#msg:272"><span class="id" title="variable">msg</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="Giskard.global.html#p:270"><span class="id" title="variable">p</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Giskard.structures.html#get_block"><span class="id" title="projection">get_block</span></a> <a class="idref" href="Giskard.global.html#msg:272"><span class="id" title="variable">msg</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="Giskard.global.html#b:269"><span class="id" title="variable">b</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a> <a class="idref" href="Giskard.structures.html#get_message_type"><span class="id" title="projection">get_message_type</span></a> <a class="idref" href="Giskard.global.html#msg:272"><span class="id" title="variable">msg</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="Giskard.structures.html#PrepareQC"><span class="id" title="constructor">PrepareQC</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">tr</span> <span class="id" title="var">H_prot</span> <span class="id" title="var">n</span> <span class="id" title="var">i</span> <span class="id" title="var">H_part</span> <span class="id" title="var">b</span> <span class="id" title="var">p</span> <span class="id" title="var">H_QC</span> <span class="id" title="var">j</span> <span class="id" title="var">H_le</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H_QC</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">msg</span> [<span class="id" title="var">H_in</span> [<span class="id" title="var">H_view</span> [<span class="id" title="var">H_block</span> <span class="id" title="var">H_type</span>]]]].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">exists</span> <span class="id" title="var">msg</span>; <span class="id" title="tactic">repeat</span> <span class="id" title="tactic">split</span>; <span class="id" title="tactic">try</span> <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">apply</span> <a class="idref" href="Giskard.global.html#counting_messages_inclusion"><span class="id" title="lemma">counting_messages_inclusion</span></a> <span class="id" title="keyword">with</span> <span class="id" title="var">i</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="prepare_in_view_persistent" class="idref" href="#prepare_in_view_persistent"><span class="id" title="lemma">prepare_in_view_persistent</span></a> :<br/>
&nbsp;&nbsp;<span class="id" title="keyword">forall</span> (<a id="tr:274" class="idref" href="#tr:274"><span class="id" title="binder">tr</span></a> : <a class="idref" href="Giskard.global.html#GTrace"><span class="id" title="definition">GTrace</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Giskard.global.html#protocol_trace"><span class="id" title="definition">protocol_trace</span></a> <a class="idref" href="Giskard.global.html#tr:274"><span class="id" title="variable">tr</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">forall</span> (<a id="n:275" class="idref" href="#n:275"><span class="id" title="binder">n</span></a> : <a class="idref" href="Giskard.structures.html#node"><span class="id" title="axiom">node</span></a>) (<a id="i:276" class="idref" href="#i:276"><span class="id" title="binder">i</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Lists.List.html#In"><span class="id" title="definition">In</span></a> <a class="idref" href="Giskard.global.html#n:275"><span class="id" title="variable">n</span></a> <a class="idref" href="Giskard.structures.html#participants"><span class="id" title="axiom">participants</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">forall</span> (<a id="b:277" class="idref" href="#b:277"><span class="id" title="binder">b</span></a> : <a class="idref" href="Giskard.structures.html#block"><span class="id" title="axiom">block</span></a>) (<a id="p:278" class="idref" href="#p:278"><span class="id" title="binder">p</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Giskard.local.html#prepare_stage_in_view"><span class="id" title="definition">prepare_stage_in_view</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Datatypes.html#fst"><span class="id" title="definition">fst</span></a> (<a class="idref" href="Giskard.global.html#tr:274"><span class="id" title="variable">tr</span></a> <a class="idref" href="Giskard.global.html#i:276"><span class="id" title="variable">i</span></a>) <a class="idref" href="Giskard.global.html#n:275"><span class="id" title="variable">n</span></a>) <a class="idref" href="Giskard.global.html#p:278"><span class="id" title="variable">p</span></a> <a class="idref" href="Giskard.global.html#b:277"><span class="id" title="variable">b</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">forall</span> (<a id="j:279" class="idref" href="#j:279"><span class="id" title="binder">j</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Giskard.global.html#i:276"><span class="id" title="variable">i</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Peano.html#cb53cf0ee22c036a03b4a9281c68b5a3"><span class="id" title="notation">&lt;=</span></a> <a class="idref" href="Giskard.global.html#j:279"><span class="id" title="variable">j</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Giskard.local.html#prepare_stage_in_view"><span class="id" title="definition">prepare_stage_in_view</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Datatypes.html#fst"><span class="id" title="definition">fst</span></a> (<a class="idref" href="Giskard.global.html#tr:274"><span class="id" title="variable">tr</span></a> <a class="idref" href="Giskard.global.html#j:279"><span class="id" title="variable">j</span></a>) <a class="idref" href="Giskard.global.html#n:275"><span class="id" title="variable">n</span></a>) <a class="idref" href="Giskard.global.html#p:278"><span class="id" title="variable">p</span></a> <a class="idref" href="Giskard.global.html#b:277"><span class="id" title="variable">b</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">tr</span> <span class="id" title="var">H_prot</span> <span class="id" title="var">n</span> <span class="id" title="var">i</span> <span class="id" title="var">H_part</span> <span class="id" title="var">b</span> <span class="id" title="var">p</span> <span class="id" title="var">H_prepare</span> <span class="id" title="var">j</span> <span class="id" title="var">H_le</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H_prepare</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">H_vote</span> | <span class="id" title="var">H_QC</span>].<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">left</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">apply</span> <a class="idref" href="Giskard.global.html#vote_quorum_in_view_persistent"><span class="id" title="lemma">vote_quorum_in_view_persistent</span></a> <span class="id" title="keyword">with</span> <span class="id" title="var">i</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">right</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">apply</span> <a class="idref" href="Giskard.global.html#qc_in_view_persistent"><span class="id" title="lemma">qc_in_view_persistent</span></a> <span class="id" title="keyword">with</span> <span class="id" title="var">i</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
No blocks can be at prepare stage in <span class="inlinecode"><a class="idref" href="Giskard.global.html#GState_init"><span class="id" title="definition">GState_init</span></a></span>. 
</div>
<div class="code">
<span class="id" title="keyword">Lemma</span> <a id="no_prepare_blocks_GState_init" class="idref" href="#no_prepare_blocks_GState_init"><span class="id" title="lemma">no_prepare_blocks_GState_init</span></a> :<br/>
&nbsp;&nbsp;<span class="id" title="keyword">forall</span> (<a id="n:280" class="idref" href="#n:280"><span class="id" title="binder">n</span></a> : <a class="idref" href="Giskard.structures.html#node"><span class="id" title="axiom">node</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Lists.List.html#In"><span class="id" title="definition">In</span></a> <a class="idref" href="Giskard.global.html#n:280"><span class="id" title="variable">n</span></a> <a class="idref" href="Giskard.structures.html#participants"><span class="id" title="axiom">participants</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">forall</span> (<a id="b:281" class="idref" href="#b:281"><span class="id" title="binder">b</span></a> : <a class="idref" href="Giskard.structures.html#block"><span class="id" title="axiom">block</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Giskard.local.html#prepare_stage"><span class="id" title="definition">prepare_stage</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Datatypes.html#fst"><span class="id" title="definition">fst</span></a> <a class="idref" href="Giskard.global.html#GState_init"><span class="id" title="definition">GState_init</span></a> <a class="idref" href="Giskard.global.html#n:280"><span class="id" title="variable">n</span></a>) <a class="idref" href="Giskard.global.html#b:281"><span class="id" title="variable">b</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Logic.html#False"><span class="id" title="inductive">False</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">n</span> <span class="id" title="var">H_in</span> <span class="id" title="var">b</span> <span class="id" title="var">H_stage</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="Giskard.global.html#GState_init"><span class="id" title="definition">GState_init</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H_stage</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H_stage</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">v_past</span> [<span class="id" title="var">H_past</span> <span class="id" title="var">H_prepare</span>]].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H_past</span>. <span class="id" title="tactic">assert</span> (<span class="id" title="var">v_past</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.12.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> 0) <span class="id" title="tactic">by</span> <span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H_prepare</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">H_vote</span> | <span class="id" title="var">H_qc</span>].<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">inversion</span> <span class="id" title="var">H_vote</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="Giskard.structures.html#empty_has_no_two_thirds"><span class="id" title="lemma">empty_has_no_two_thirds</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">contradiction</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">inversion</span> <span class="id" title="var">H_qc</span>. <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">tauto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>
</div>
</div>
<div id="footer">
  Generated by <a href="http://coq.inria.fr">coqdoc</a> and improved with <a href="https://github.com/palmskog/coqdocjs">CoqdocJS</a> as adapted for <a href="https://github.com/coq-community">coq-community</a>
</div>
</div>
</body>

</html>
